(()=>{"use strict";var e,t={6961:(e,t,a)=>{a(6124);var s=a(7294),n=a(3935),r=a(3727);a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p,a.p;var o=a(6245),i=a(5977),c=a(4379);function l(e,t,a){"info"==e?c.fn.info(t):"success"==e?c.fn.success(t,a):"warning"==e?c.fn.warning(t):"error"==e&&c.fn.error(t)}var m=a(4301),d=a.n(m);async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=await d()("https://zeer-marketplace-api-macsik121.herokuapp.com/graphql",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:e,variables:t})}),s=await a.json();return s.data}async function p(e){let t=await d()("https://zeer-marketplace-ui-macsik121.herokuapp.com/loader.exe",{method:"POST"});t=await t.blob();const a=window.URL.createObjectURL(t);let s=!1,n=!0;if(console.log(e.download),""==e.download)s=!0;else{console.log("checking user for subscriptions");let e=(0,o.Z)(localStorage.getItem("token"));e=e.name;const{user:t}=await h("\n            query user($name: String!) {\n                user(name: $name) {\n                    subscriptions {\n                        status {\n                            isActive\n                        }\n                    }\n                }\n            }\n        ",{name:e});for(let e=0;e<t.subscriptions.length;e++)if(t.subscriptions[e].status.isActive){n=!0;break}}n?(e.download="loader.exe",e.href=a,s&&e.click()):l("error","У вас нету ни одной активной подписки")}var u=a(6066);const g=function(e){let{product:t,styles:a,className:n}=e;return s.createElement("div",{className:"pop-product ".concat(n),style:{backgroundImage:'url("'.concat(a.background,'")'),backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover"}},s.createElement("div",{className:"pop-product-blackBG"}),s.createElement("img",{src:"/images/red-dot.png"}),s.createElement("div",{className:"general"},s.createElement("div",{className:"cost"},"от ",t.costPerDayInfo," / в день"),s.createElement("div",{className:"title"},t.title)))};const w=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t="\n        query popularProducts($amountToGet: Int!) {\n            popularProducts(amountToGet: $amountToGet) {\n                title\n                costPerDay\n                costPerDayInfo\n                id\n                productFor\n                workingTime\n                description\n                locationOnclick\n                imageURL\n                imageURLdashboard\n                peopleBought {\n                    name\n                    avatar\n                }\n                cost {\n                    perDay\n                    perMonth\n                    perYear\n                }\n                allCost {\n                    cost\n                    costPer\n                    menuText\n                    days\n                }\n            }\n        }\n    ",a={amountToGet:e},s=await h(t,a),n=s.popularProducts;return n};function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function v(e){let{children:t,showLogin:a,locationOnclick:n,i:o}=e;return localStorage.getItem("token")?s.createElement(r.rU,{className:"link-to",to:n,key:o},t):s.createElement("button",{type:"button",className:"link-to",onClick:a,key:o},t)}class y extends s.Component{constructor(){super(),this.state={products:[]}}async componentDidMount(){const e=await w(4);this.setState({products:e})}render(){const{products:e}=this.state,t=e.map(((e,t)=>s.createElement(v,{children:s.createElement(g,{className:this.props.className,styles:{background:e.imageURL},product:e}),showLogin:this.props.showLogin,i:t,product:e,locationOnclick:e.locationOnclick})));return s.createElement(u.Z,E({className:"slider"},{dots:!0,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:4,adaptiveHeight:!0}),t,t)}}var b=a(366),N=a(7678);function S(e){let{handleToken:t,handleExpire:a}=e;return s.createElement(N.Z,{sitekey:"6LevWdccAAAAAMlqf12x4LKOAg4un7Lbjl-Cz3hY",onChange:t,onExpired:a,className:"re-captcha"})}async function f(){let e=await fetch("https://ipinfo.io/json?token=c02c29cd1f1bb4");return e=await e.json(),e}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){P(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function P(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(e){return s.createElement("div",{className:"heading"},s.createElement("h2",{className:"authorization"},"Авторизация"),s.createElement("button",{className:"close-modal"},s.createElement(b.Z,{className:"close-icon",onClick:e.hideLogin})))}class M extends s.Component{constructor(){super(),this.state={user:{},signInAttempt:{},rememberMe:!1,formError:{message:"."},formErrorStyles:{opacity:0},signInAttempt:{},isDisabled:!1,isPasswordShown:!1,reCaptchaPassed:!1},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleRememberMeClick=this.handleRememberMeClick.bind(this),this.showError=this.showError.bind(this),this.handleFocusInput=this.handleFocusInput.bind(this),this.enableSubmitButton=this.enableSubmitButton.bind(this),this.changeRememberMe=this.changeRememberMe.bind(this),this.toggleShowingPassword=this.toggleShowingPassword.bind(this)}showError(e){this.setState({formError:{message:e},formErrorStyles:{opacity:1}})}enableSubmitButton(){this.setState({isDisabled:!1})}changeRememberMe(){this.setState({rememberMe:!this.state.rememberMe})}async handleSubmit(e){this.setState({isDisabled:!0}),e.preventDefault();const t=document.forms.signin,a=t.email.value,s=t.password.value;if(this.setState({rememberMe:t.rememberMe.checked}),t.email.blur(),t.password.blur(),""==a)return this.showError("Пожалуйста, введите имя или адрес эл. почты"),void this.enableSubmitButton();if(""==s)return this.showError("Введите пароль для входа в аккаунт"),void this.enableSubmitButton();if(!this.state.reCaptchaPassed)return l("error","Вы не прошли Ре Капчу"),void this.enableSubmitButton();const n=await f(),{ip:r,city:o}=n,i={email:a,password:s,rememberMe:this.state.rememberMe,navigator:{platform:navigator.platform,userAgent:navigator.userAgent,appName:navigator.appName,appVersion:navigator.appVersion},locationData:{ip:r,location:o}},c=await h("\n            mutation signIn(\n                $email: String!,\n                $password: String!,\n                $rememberMe: Boolean!,\n                $navigator: NavigatorInput!,\n                $locationData: LocationInput!\n            ) {\n                signIn(\n                    email: $email,\n                    password: $password,\n                    rememberMe: $rememberMe,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    user {\n                        name\n                        email\n                    }\n                    token\n                    message\n                }\n            }\n        ",i);this.setState({signInAttempt:c.signIn});const{signInAttempt:m}=this.state;if(""!=m.token){localStorage.setItem("token",m.token);await this.props.getUser()&&(this.props.history.push("/dashboard"),l("info","Авторизация прошла успешно")),this.enableSubmitButton()}else l("error",m.message),this.enableSubmitButton()}handleFocusInput(){this.setState({formErrorStyles:{opacity:0}})}handleRememberMeClick(e){e.currentTarget.childNodes[0].checked=!this.state.rememberMe,this.setState({rememberMe:!this.state.rememberMe})}handleChange(e){const{value:t,name:a}=e.target;this.setState({user:k(k({},this.state.user),{},{[a]:t})})}toggleShowingPassword(){this.setState({isPasswordShown:!this.state.isPasswordShown})}render(){const{rememberMe:e,formError:t,formErrorStyles:a,isPasswordShown:n,isDisabled:r,reCaptchaPassed:o}=this.state,{style:i,hideLogin:c,showSignup:l,toggleForgotPassword:m,hideForgotPassword:d}=this.props;return s.createElement("div",{style:this.props.style,className:"signin auth-form"},s.createElement("div",{className:"container"},s.createElement(D,{hideLogin:c}),s.createElement("label",{style:a,className:"error"},t.message),s.createElement("form",{name:"signin",className:"signin-form form",onSubmit:this.handleSubmit,style:{opacity:r?.65:1,pointerEvents:r?"none":"all",userSelect:r?"none":"text"}},s.createElement("div",{className:"email field-wrap"},s.createElement("input",{onFocus:this.handleFocusInput,name:"email",className:"field",onChange:this.handleChange,required:"required"}),s.createElement("label",null,"Имя пользователя / Эл. почта")),s.createElement("div",{className:"password field-wrap"},s.createElement("input",{required:"required",onFocus:this.handleFocusInput,name:"password",className:"field",onChange:this.handleChange,type:n?"text":"password"}),s.createElement("label",null,"Пароль"),s.createElement("img",{onClick:this.toggleShowingPassword,src:"/images/field-shown.png",className:"eye"}),s.createElement("img",{style:n?{display:"none"}:{display:"block"},onClick:this.toggleShowingPassword,src:"/images/closed-eye.png",className:"hidden-password"})),s.createElement("div",{onClick:this.handleRememberMeClick,className:"remember"},s.createElement("div",{className:"checkbox"},s.createElement("input",{checked:e,onChange:this.changeRememberMe,className:"check",type:"checkbox",name:"rememberMe"}),s.createElement("div",{className:"checkmark"})),s.createElement("label",{onClick:this.handleRememberMeClick,className:"remember-me"},"Запомнить")),s.createElement(S,{handleToken:()=>this.setState({reCaptchaPassed:!0}),handleExpire:()=>this.setState({reCaptchaPassed:!1})}),s.createElement("button",{className:"submit-button",type:"submit"},"Войти"),s.createElement("div",{className:"addition"},s.createElement("button",{type:"button",onClick:function(){d(),c(),l()}.bind(this)},"Зарегестрироваться"),s.createElement("button",{type:"button",onClick:m},"Забыл пароль")))))}}const A=(0,i.EN)(M);function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function O(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class L extends s.Component{constructor(){super(),this.state={formError:{message:"."},formErrorStyles:{opacity:"0"},signUpAttempt:{},agreed:!1,isPasswordShown:!1,isRepeatedPasswordShown:!1,isRequestMaking:!1,reCaptchaPassed:!1},this.handleSubmit=this.handleSubmit.bind(this),this.handleFieldFocus=this.handleFieldFocus.bind(this),this.showError=this.showError.bind(this),this.toggleAgree=this.toggleAgree.bind(this),this.toggleShowingPassword=this.toggleShowingPassword.bind(this),this.toggleShowingRepeatedPassword=this.toggleShowingRepeatedPassword.bind(this)}showError(e){this.setState({formError:{message:e},formErrorStyles:{opacity:1}})}validateEmail(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}async handleSubmit(e){this.setState({isRequestMaking:!0}),e.preventDefault();const t=document.forms.signup,a=t.name.value.trim(),s=t.email.value.trim(),n=t.password.value.trim(),r=t.confirmPassword.value.trim(),o=this.state.agreed;if(""==a||a.length<3)return""==a?this.showError("Придумайте своё имя для регистрации в системе"):a.length<3&&this.showError("Имя должно быть не мене 3-х символов"),void this.setState({isRequestMaking:!1});for(let e=0;e<a.length;e++)if("/"==a[e])return this.showError('Твоё имя пользователя не должно содержать "/" символ'),void this.setState({isRequestMaking:!1});if("faq"==a.toLowerCase())return this.showError("Ваше имя не должно быть FAQ"),void this.setState({isRequestMaking:!1});if("products"==a.toLowerCase())return this.showError("Ваше имя не должно быть products"),void this.setState({isRequestMaking:!1});if(""==s)return this.showError("Напишите свою почту, чтобы зарегестрироваться"),void this.setState({isRequestMaking:!1});if(!this.validateEmail(s))return this.showError("Вы ввели почту неверено"),void this.setState({isRequestMaking:!1});if(n.length<6)return this.showError("Минимальная длина пароля 6 символов"),void this.setState({isRequestMaking:!1});if(n!=r)return this.showError("Повторите пароль правильно"),void this.setState({isRequestMaking:!1});if(!o)return this.showError("Вы должны согласится с правилами"),void this.setState({isRequestMaking:!1});if(!this.state.reCaptchaPassed)return l("error","Вы не прошли РеКапчу"),void this.setState({isRequestMaking:!1});const i=await f(),{ip:c,city:m}=i,d={name:a,email:s,password:n,navigator:{userAgent:navigator.userAgent,platform:navigator.platform,appName:navigator.appName,appVersion:navigator.appVersion},locationData:{ip:c,location:m}},p=await h("\n            mutation signUp(\n                $email: String!,\n                $password: String!,\n                $name: String!,\n                $navigator: NavigatorInput,\n                $locationData: LocationInput\n            ) {\n                signUp(\n                    email: $email,\n                    password: $password,\n                    name: $name,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    user {\n                        name\n                        email\n                    }\n                    token\n                    message\n                }\n            }\n        ",d);this.setState({signUpAttempt:p.signUp});const{signUpAttempt:u}=this.state;return u.token&&""!=u.token?(localStorage.setItem("token",u.token),this.props.getUser(),this.props.history.push("/dashboard"),l("success","Вы успешно зарегистрированы!"),void this.setState({isRequestMaking:!1})):(l("error",u.message),void this.setState({isRequestMaking:!1}))}handleFieldFocus(e){this.setState({formErrorStyles:{opacity:0}})}toggleAgree(){this.setState({agreed:!this.state.agreed})}toggleShowingPassword(){this.setState({isPasswordShown:!this.state.isPasswordShown})}toggleShowingRepeatedPassword(){this.setState({isRepeatedPasswordShown:!this.state.isRepeatedPasswordShown})}render(){const{formError:e,formErrorStyles:t,agreed:a,isPasswordShown:n,isRepeatedPasswordShown:r,isRequestMaking:o}=this.state,{hideSignup:i,showLogin:c,toggleAgreement:l,hideAgreement:m}=this.props,d=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){O(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.style);return d.pointerEvents=o?"none":"all",s.createElement("div",{style:d,className:"signup auth-form"},s.createElement("div",{className:"container"},s.createElement("div",{className:"heading"},s.createElement("h2",{className:"authentication"},"Регистрация"),s.createElement("button",{onClick:i,className:"close-modal"},s.createElement(b.Z,{className:"close-icon"}))),s.createElement("label",{style:t,className:"error"},e.message),s.createElement("form",{name:"signup",onSubmit:this.handleSubmit,className:"signup-form form",style:{opacity:o?.5:1}},s.createElement("div",{className:"field-wrap"},s.createElement("input",{required:"required",onFocus:this.handleFieldFocus,name:"name",className:"field"}),s.createElement("label",null,"Имя пользователя")),s.createElement("div",{className:"field-wrap"},s.createElement("input",{required:"required",onFocus:this.handleFieldFocus,name:"email",className:"field"}),s.createElement("label",null,"Эл. почта")),s.createElement("div",{className:"field-wrap"},s.createElement("input",{required:"required",onFocus:this.handleFieldFocus,name:"password",className:"field",type:n?"text":"password"}),s.createElement("label",null,"Придумайте пароль"),s.createElement("img",{onClick:this.toggleShowingPassword,src:"/images/field-shown.png",className:"eye"}),s.createElement("img",{style:n?{display:"none"}:{display:"block"},onClick:this.toggleShowingPassword,src:"/images/closed-eye.png",className:"hidden-password"})),s.createElement("div",{className:"field-wrap"},s.createElement("input",{required:"required",onFocus:this.handleFieldFocus,name:"confirmPassword",className:"field",type:r?"text":"password"}),s.createElement("label",null,"Пароль ещё раз"),s.createElement("img",{onClick:this.toggleShowingRepeatedPassword,src:"/images/field-shown.png",className:"eye"}),s.createElement("img",{style:r?{display:"none"}:{display:"block"},onClick:this.toggleShowingRepeatedPassword,src:"/images/closed-eye.png",className:"hidden-password"})),s.createElement("div",{className:"terms-n-policy"},s.createElement("div",{className:"checkbox",onClick:this.toggleAgree},s.createElement("input",{checked:a,onChange:function(){this.toggleAgree()}.bind(this),className:"check",type:"checkbox"}),s.createElement("div",{className:"checkmark"})),s.createElement("span",{className:"agreement"},"Согласен ",s.createElement("span",{className:"rules",onClick:l},"с правилами"))),s.createElement(S,{handleToken:()=>this.setState({reCaptchaPassed:!0}),handleExpire:()=>this.setState({reCaptchaPassed:!1})}),s.createElement("button",{type:"submit",className:"submit-button"},"Создать аккаунт")),s.createElement("div",{className:"addition"},s.createElement("button",{onClick:function(){m(),i(),c()}.bind(this)},"У меня есть аккаунт"),s.createElement("button",{className:"bold",onClick:function(){m(),i(),c()}.bind(this)},"Войти"))))}}const q=(0,i.EN)(L);class U extends s.Component{constructor(){super(),this.state={agreement:[{title:"Общие правила",rules:["Администрация вправе отказать в воврате средств","Возврат средств возможен, если ПО не работает по нашей вине","Мы не несем отвественность за блокировку вашего аккаунта","Подписка на 9999 дней будет работать, пока проект продолжает свое существование","При покупке подписки с вас не будут ежемесячно списывать без вашего уведомления деньги, как это сделано в другом популярном проекте","Мы вправе отказать вам в сбросе HWID, если так посчитаем нужным. За исключением использования ченжера в компьютерных клубах","Для работы требуется стабильное интернет соединение."]},{title:"За что можно получить блокировку",rules:["За использование программ анализа трафика, декомпиляцию кода и другие вспомогательные средства для взломаны программы","Запрещено продавать\\передавать подписку 3-м лицам","Оскорбление Администрации проекта","Попытка обмануть Администрацию проекта","Администрация вправе заблокировать подписку без объяснения причины"]}]}}render(){const{style:e,hideAgreement:t}=this.props,a=this.state.agreement.map(((e,t)=>s.createElement("div",{className:"term",key:e.title},s.createElement("h3",{className:"term-title"},e.title,":"),s.createElement("ul",{className:"rules"},e.rules.map(((e,a)=>s.createElement("li",{key:e,className:"rule"},t+1,".",a+1,"  ",e,".")))))));return s.createElement("div",{style:e,className:"privacy-and-policy-agreement"},s.createElement("div",{className:"heading"},s.createElement("h2",null,"Соглашение"),s.createElement(b.Z,{onClick:t,className:"close-modal"})),s.createElement("div",{className:"agreement"},s.createElement("span",{className:"advise"},"Перед покупкой сответуем ознакомиться:"),a))}}class T extends s.Component{constructor(){super(),this.state={requestMaking:!1,captchaPassed:!1},this.handleSubmit=this.handleSubmit.bind(this)}async handleSubmit(e){if(e.preventDefault(),this.setState({requestMaking:!0}),!this.state.captchaPassed)return l("error","Вы не прошли Ре Капчу"),void this.setState({requestMaking:!1});const t=document.forms.resetPassword.email.value,{city:a,ip:s}=await f(),{userAgent:n,platform:r}=navigator,o={email:t,navigator:{userAgent:n,platform:r},locationData:{location:a,ip:s}},{resetPassword:{message:i,success:c}}=await h("\n            mutation resetPassword(\n                $email: String!,\n                $navigator: NavigatorInput!,\n                $locationData: LocationInput!\n            ) {\n                resetPassword(\n                    email: $email,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    message\n                    success\n                }\n            }\n        ",o);l(c?"info":"error",i),c&&this.props.hideForgotPassword(),this.setState({requestMaking:!1})}render(){const{style:e,hideForgotPassword:t,showLogin:a}=this.props,{requestMaking:n}=this.state;return s.createElement("div",{style:e,className:"forgot-password-modal"},s.createElement("div",{className:"heading"},s.createElement("h2",null,"Сброс пароля"),s.createElement(b.Z,{onClick:t,className:"close-modal"})),s.createElement("form",{onSubmit:this.handleSubmit,className:"forgot-password",name:"resetPassword",style:{opacity:n?.5:1,pointerEvents:n?"none":"all"}},s.createElement("div",{className:"email field-wrap"},s.createElement("input",{className:"field",name:"email",required:"required"}),s.createElement("label",null,"Имя пользователя / Эл. почта")),s.createElement(S,{handleToken:()=>this.setState({captchaPassed:!0}),handleExpire:()=>this.setState({captchaPassed:!1})}),s.createElement("button",{className:"reset-password",type:"submit"},"Сбросить пароль")),s.createElement("div",{className:"addition"},s.createElement("button",{onClick:t},"Вспомнил пароль"),s.createElement("button",{onClick:t},"Войти")))}}class x extends s.Component{constructor(){super(),this.state={contacts:{owner:"Шинкевич А.П",info:{companyIE:"321253600039494",TIN:"254300096636",email:"zeerchangers@gmail.com",phone:"+79677527491"}}}}render(){const{style:e,hideModal:t}=this.props,{contacts:a}=this.state,{companyIE:n,TIN:r,email:o,phone:i}=a.info;return s.createElement("div",{className:"contacts-modal",style:e},s.createElement("div",{className:"heading"},s.createElement("h3",null,"Контакты"),s.createElement(b.Z,{className:"close-icon",onClick:t})),s.createElement("div",{className:"table"},s.createElement("h3",{className:"contacts-owner"},"ИП ",a.owner),s.createElement("div",{className:"info-wrap"},s.createElement("div",{className:"information"},s.createElement("div",{className:"companyIE"},"ОГРНИП"),s.createElement("div",{className:"companyIE"},n)),s.createElement("div",{className:"information"},s.createElement("div",{className:"tin"},"ИНН"),s.createElement("div",{className:"tin"},r)),s.createElement("div",{className:"information"},s.createElement("div",{className:"email"},"Email"),s.createElement("div",{className:"email"},o)),s.createElement("div",{className:"information"},s.createElement("div",{className:"phone"},"Телефон"),s.createElement("div",{className:"phone"},i)))))}}class $ extends s.Component{constructor(){super(),this.state={products:[],deviceWidth:0,showingLogin:!1,showingSignup:!1,showingAgreement:!1,showingForgotPassword:!1,token:"",advantages:[{imgURL:"/images/advantage1-icon.png",characterURL:"/images/advantage1-character.png",title:"защита",content:"Внедрение чита в игру происходит\n                    совершенно незаметно для античита.\n                    Еще ни один наш пользователь<br />\n                    не получил блокировок"},{imgURL:"/images/advantage2-icon.png",characterURL:"/images/advantage2-character.png",title:"функционал",content:"Команда наших профессиональных\n                    разработчиков подготовила для вас \n                    более сотни разных функций.\n                    Спеши опробовать!"},{imgURL:"/images/advantage3-icon.png",characterURL:"/images/advantage3-character.png",title:"оптимизация",content:"Мы все время заняты улучшением\n                    скорости работы и производительности, \n                    чтобы читы работали быстро,\n                    а Ваш FPS не падал!"},{imgURL:"/images/advantage4-icon.png",characterURL:"/images/advantage4-character.png",title:"поддержка",content:"Круглосуточная поддержка,\n                    которая окажет Вам помощь\n                    при установке и ответит  на вопросы\n                    по использованию."},{imgURL:"/images/advantage5-icon.png",characterURL:"/images/advantage5-character.png",title:"скорость обновлений",content:"Мы всегда следим за обновлениями\n                    игры и наш софт обновляется так быстро, \n                    что Вы даже не узнаете об этом!"},{imgURL:"/images/advantage6-icon.png",characterURL:"/images/advantage6-character.png",title:"приемущество",content:"Почувствуй, как твое преимущество\n                    над врагом растет, а игра упрощается!"}],contactsShown:!1,termsOfUseShown:!1,privacyPolicyShown:!1,dataProcessingShown:!1},this.showLogin=this.showLogin.bind(this),this.hideLogin=this.hideLogin.bind(this),this.toggleLogin=this.toggleLogin.bind(this),this.showSignup=this.showSignup.bind(this),this.hideSignup=this.hideSignup.bind(this),this.toggleSignup=this.toggleSignup.bind(this),this.showAgreement=this.showAgreement.bind(this),this.hideAgreement=this.hideAgreement.bind(this),this.toggleAgreement=this.toggleAgreement.bind(this),this.showForgotPassword=this.showForgotPassword.bind(this),this.hideForgotPassword=this.hideForgotPassword.bind(this),this.toggleForgotPassword=this.toggleForgotPassword.bind(this),this.hideContacts=this.hideContacts.bind(this),this.hidePrivacyPolicy=this.hidePrivacyPolicy.bind(this),this.hideTermsOfUse=this.hideTermsOfUse.bind(this),this.hideDataProcessing=this.hideDataProcessing.bind(this),this.setAllContactsToHidden=this.setAllContactsToHidden.bind(this)}componentDidUpdate(e,t){let a=localStorage.getItem("token");a||(a=""),t.token!=a&&this.setState({token:a})}async componentDidMount(){const e=localStorage.getItem("token");e&&""!=e?this.setState({token:e}):this.setState({token:""}),window.onkeydown=function(e){const{showingLogin:t,showingForgotPassword:a,showingAgreement:s,showingSignup:n}=this.state;27==e.keyCode&&t&&!a?this.hideLogin():27==e.keyCode&&a&&this.hideForgotPassword(),27==e.keyCode&&s?this.hideAgreement():27==e.keyCode&&n&&this.hideSignup(),27==e.keyCode&&(this.hideContacts(),this.hideTermsOfUse(),this.hidePrivacyPolicy(),this.hideDataProcessing())}.bind(this),this.setState({products:await w(4),deviceWidth:window.innerWidth})}toggleLogin(){this.setState({showingLogin:!this.state.showingLogin,showingSignup:!1,showingAgreement:!1,showingForgotPassword:!1})}showLogin(){this.setState({showingLogin:!0,showingSignup:!1})}hideLogin(){this.setState({showingLogin:!1,showingSignup:!1,showingAgreement:!1})}toggleSignup(){this.setState({showingSignup:!this.state.showingSignup,showingLogin:!1,showingAgreement:!1,showingForgotPassword:!1})}showSignup(){this.setState({showingSignup:!0,showingLogin:!1})}hideSignup(){this.setState({showingSignup:!1,showingLogin:!1,showingAgreement:!1})}toggleAgreement(){this.setState({showingAgreement:!this.state.showingAgreement,showingLogin:!1})}showAgreement(){this.setState({showingAgreement:!0})}hideAgreement(){this.setState({showingAgreement:!1})}toggleForgotPassword(){this.setState({showingForgotPassword:!this.state.showingForgotPassword})}showForgotPassword(){this.setState({showingForgotPassword:!0})}hideForgotPassword(){this.setState({showingForgotPassword:!1})}hideContacts(){this.setState({contactsShown:!1})}hideTermsOfUse(){this.setState({termsOfUseShown:!1})}hidePrivacyPolicy(){this.setState({privacyPolicyShown:!1})}hideDataProcessing(){this.setState({dataProcessingShown:!1})}setAllContactsToHidden(){this.hideDataProcessing(),this.hidePrivacyPolicy(),this.hideTermsOfUse(),this.hideContacts()}render(){const{products:e,deviceWidth:t,showingLogin:a,showingSignup:n,showingAgreement:o,showingForgotPassword:i,contactsShown:c,termsOfUseShown:l,privacyPolicyShown:m,dataProcessingShown:d,token:h}=this.state,u=d||l||m||c,w=e.map((e=>s.createElement(g,{className:this.props.className,styles:{background:e.imageURL},product:e,key:e.id})));this.state.advantages.map(((e,t)=>s.createElement("div",{key:e.title,className:"advantage advantage".concat(++t)},s.createElement("img",{className:"img",src:e.imgURL}),s.createElement("h2",{className:"advantage-title"},e.title),s.createElement("span",{className:"content"},e.content),s.createElement("img",{className:"character",src:e.characterURL}),s.createElement("div",{className:"bottom-line"}),t+1==1&&s.createElement("div",{className:"even-bg"}),s.createElement("div",{className:"background"}))));return s.createElement("div",{className:"home",style:{overflow:a||n?"hidden":"visible",height:a||n?"100vh":"auto"}},s.createElement("div",{className:"header",style:{opacity:a||n||c||l||m||d||i||o?.5:1,pointerEvents:a||n||c||l||m||d||i||o?"none":"all",userSelect:a||n||c||l||m||d||i||o?"none":"text"}},s.createElement("nav",{className:"nav"},s.createElement("div",{className:"nav-BG"}),s.createElement("div",{className:"nav-wrap"},s.createElement("div",{className:"nav-gray-line"}),s.createElement("div",{className:"container"},s.createElement("div",{className:"container"},s.createElement("div",null,s.createElement(r.rU,{to:"/",className:"logo"},s.createElement("img",{src:"/images/zeer-logo.png"}),s.createElement("h1",null,"zeer"))),s.createElement("a",{style:a||n?{pointerEvents:"none",userSelect:"none"}:{pointerEvents:"all",userSelect:"text"},className:"download-loader",onClick:e=>{localStorage.getItem("token")?p(e.target):this.showLogin()}},s.createElement("img",{src:"/images/download-loader.png"}),s.createElement("span",{className:"text-content"},"скачать zeer loader")),s.createElement("div",{className:"gray-line"}),s.createElement("div",{className:"social-media"},s.createElement("a",{className:"social-media-link",target:"_blank",href:"https://t.me/zeer_changer"},s.createElement("img",{src:"/images/telegram-icon.png"})),s.createElement("a",{className:"social-media-link",target:"_blank",href:"https://vk.com/zeer_csgo"},s.createElement("img",{src:"/images/vk-icon.png"}))),s.createElement("div",{className:"auth-buttons"},""==h?s.createElement(s.Fragment,null,s.createElement("button",{onClick:this.toggleLogin,className:"button"},"Войти"),s.createElement("button",{onClick:this.toggleSignup,className:"button"},"Регистрация")):s.createElement(r.rU,{className:"button",to:"/dashboard"},"Личный Кабинет"))))))),s.createElement(A,{style:a?{opacity:"".concat(i?"0.85":"1"),transition:"500ms",pointerEvents:"".concat(i?"none":"all"),userSelect:"".concat(i?"none":"text")}:{opacity:0,transform:"translateY(-120%)"},getUser:this.props.getUser,hideLogin:this.hideLogin,hideForgotPassword:this.hideForgotPassword,toggleForgotPassword:this.toggleForgotPassword,showSignup:this.showSignup}),s.createElement(q,{style:n?{opacity:1,transform:"translateY(0)"}:{opacity:0,transform:"translateY(-120%)"},getUser:this.props.getUser,hideSignup:this.hideSignup,showLogin:this.showLogin,toggleAgreement:this.toggleAgreement,hideAgreement:this.hideAgreement}),s.createElement(U,{style:o?{opacity:1,transform:"translateY(0)",top:0}:{opacity:0,transform:"translateY(-170%)",top:"-100%"},hideAgreement:this.hideAgreement}),s.createElement(T,{style:i?{opacity:1,transform:"translateY(0)"}:{opacity:0,transform:"translateY(-180%)"},hideForgotPassword:this.hideForgotPassword,showLogin:this.showLogin}),s.createElement(x,{style:{opacity:u?1:0,transform:"translateY(".concat(u?0:"-150%",")")},hideModal:this.setAllContactsToHidden}),s.createElement("div",{style:{opacity:a||n||c||l||m||d||i||o?.5:1,pointerEvents:a||n||c||l||m||d||i||o?"none":"all",userSelect:a||n||c||l||m||d||i||o?"none":"text"},className:"slider-wrap"},s.createElement("div",{className:"container"},s.createElement("div",{className:"info"},s.createElement("h3",{className:"popular-products"},"Популярные продукты")),t>650?s.createElement(y,{showLogin:this.showLogin}):s.createElement("div",{className:"pop-products"},w))),s.createElement("div",{style:{opacity:a||n||c||l||m||d||i||o?.5:1,pointerEvents:a||n||c||l||m||d||i||o?"none":"all",userSelect:a||n||c||l||m||d||i||o?"none":"text"},className:"advantages"},s.createElement("div",{className:"container"},s.createElement("div",{className:"advantage advantage1"},s.createElement("img",{className:"img",src:"/images/advantage1-icon.png"}),s.createElement("h2",{className:"advantage-title"},"защита"),s.createElement("span",{className:"content"},"Внедрение чита в игру происходит",s.createElement("br",null),"совершенно незаметно для античита.",s.createElement("br",null),"Еще ни один наш пользователь",s.createElement("br",null),"не получил блокировок"),s.createElement("img",{className:"character",src:"/images/advantage1-character.png"}),s.createElement("div",{className:"bottom-line"}),s.createElement("div",{className:"background"})),s.createElement("div",{className:"advantage advantage2"},s.createElement("img",{className:"img",src:"/images/advantage2-icon.png"}),s.createElement("h2",{className:"advantage-title"},"функционал"),s.createElement("span",{className:"content"},"Команда наших профессиональных",s.createElement("br",null),"разработчиков подготовила для вас",s.createElement("br",null),"более сотни разных функций.",s.createElement("br",null),"Спеши опробовать!"),s.createElement("img",{className:"character",src:"/images/advantage2-character.png"}),s.createElement("div",{className:"bottom-line"}),s.createElement("div",{className:"even-bg"}),s.createElement("div",{className:"background"})),s.createElement("div",{className:"advantage advantage3"},s.createElement("img",{className:"img",src:"/images/advantage3-icon.png"}),s.createElement("h2",{className:"advantage-title"},"оптимизация"),s.createElement("span",{className:"content"},"Мы все время заняты улучшением",s.createElement("br",null),"скорости работы и производительности,",s.createElement("br",null),"чтобы читы работали быстро,",s.createElement("br",null),"а Ваш FPS не падал!"),s.createElement("img",{className:"character",src:"/images/advantage3-character.png"}),s.createElement("div",{className:"bottom-line"}),s.createElement("div",{className:"background"})),s.createElement("div",{className:"advantage advantage4"},s.createElement("img",{className:"img",src:"/images/advantage4-icon.png"}),s.createElement("h2",{className:"advantage-title"},"поддержка"),s.createElement("span",{className:"content"},"Круглосуточная поддержка,",s.createElement("br",null),"которая окажет Вам помощь",s.createElement("br",null),"при установке и ответит на вопросы",s.createElement("br",null),"по использованию."),s.createElement("img",{className:"character",src:"/images/advantage4-character.png"}),s.createElement("div",{className:"bottom-line"}),s.createElement("div",{className:"even-bg"}),s.createElement("div",{className:"background"})),s.createElement("div",{className:"advantage advantage5"},s.createElement("img",{className:"img",src:"/images/advantage5-icon.png"}),s.createElement("h2",{className:"advantage-title"},"скорость обновлений"),s.createElement("span",{className:"content"},"Мы всегда следим за обновлениями",s.createElement("br",null),"игры и наш софт обновляется так быстро,",s.createElement("br",null),"что Вы даже не узнаете об этом!"),s.createElement("img",{className:"character",src:"/images/advantage5-character.png"}),s.createElement("div",{className:"bottom-line"}),s.createElement("div",{className:"background"})),s.createElement("div",{className:"advantage advantage6"},s.createElement("img",{className:"img",src:"/images/advantage6-icon.png"}),s.createElement("h2",{className:"advantage-title"},"приемущество"),s.createElement("span",{className:"content"},"Почувствуй, как твое преимущество",s.createElement("br",null),"над врагом растет, а игра упрощается!"),s.createElement("img",{className:"character",src:"/images/advantage6-character.png"}),s.createElement("div",{className:"bottom-line"}),s.createElement("div",{className:"even-bg"}),s.createElement("div",{className:"background"})))),s.createElement("div",{className:"wrap footer-wrap"},s.createElement("div",{className:"footer-bg"}),s.createElement("div",{className:"footer-bottom-bg"}),s.createElement("div",{className:"steps",style:{opacity:a||n||c||l||m||d||i||o?.5:1,pointerEvents:a||n||c||l||m||d||i||o?"none":"all",userSelect:a||n||c||l||m||d||i||o?"none":"text"}},s.createElement("div",{className:"container"},s.createElement("h2",{className:"instruction"},"Инструкция как купить"),s.createElement("div",{className:"container"},s.createElement("div",{className:"step1 step"},s.createElement("div",{className:"step-bg"},s.createElement("div",{className:"bg"}),s.createElement("img",{className:"character",src:"/images/step1-character.png"}),s.createElement("img",{className:"icon",src:"/images/step1-icon.png"})),s.createElement("label",{className:"instruction-num"},"01"),s.createElement("span",{className:"to-do"},"пройти регистрацию")),s.createElement("div",{className:"red-line"}),s.createElement("div",{className:"step2 step"},s.createElement("div",{className:"step-bg"},s.createElement("div",{className:"bg"}),s.createElement("img",{className:"character",src:"/images/step2-character.png"}),s.createElement("img",{className:"icon",src:"/images/step2-icon.png"})),s.createElement("label",{className:"instruction-num"},"02"),s.createElement("span",{className:"to-do"},"выбрать продукт",s.createElement("br",null)," в личном кабинете")),s.createElement("div",{className:"red-line red-line2"}),s.createElement("div",{className:"step3 step"},s.createElement("div",{className:"step-bg"},s.createElement("div",{className:"bg"}),s.createElement("img",{className:"character",src:"/images/step3-character.png"}),s.createElement("img",{className:"icon",src:"/images/step3-icon.png"})),s.createElement("label",{className:"instruction-num"},"03"),s.createElement("span",{className:"to-do"},"Произвести оплату")),s.createElement("div",{className:"red-line"}),s.createElement("div",{className:"step4 step"},s.createElement("div",{className:"step-bg"},s.createElement("div",{className:"bg"}),s.createElement("img",{className:"character",src:"/images/step4-character.png"}),s.createElement("img",{className:"icon",src:"/images/step4-icon.png"})),s.createElement("label",{className:"instruction-num"},"04"),s.createElement("span",{className:"to-do"},"Скачать лоадер"))))),s.createElement("footer",{className:"footer",style:{opacity:a||n||c||l||m||d||i||o?.5:1,pointerEvents:a||n||c||l||m||d||i||o?"none":"all",userSelect:a||n||c||l||m||d||i||o?"none":"text"}},s.createElement("div",{className:"footer-gray-line"}),s.createElement("div",{className:"wrap"},s.createElement("div",{className:"modal-buttons"},s.createElement("button",{onClick:()=>this.setState({contactsShown:!0}),className:"button"},"контакты"),s.createElement("a",{className:"button",href:"/terms.pdf"},"пользовательское соглашение"),s.createElement("a",{className:"button",href:"/privacy-policy.pdf"},"политика конфиденциальности"),s.createElement("a",{className:"button",href:"/processing-personal-data.pdf"},"обработка данных")),s.createElement("div",{className:"payment-methods"},s.createElement("a",{href:"https://info.paymaster.ru/",className:"link"},s.createElement("img",{className:"logo",src:"/images/paymaster-standart-logo.png"})),s.createElement("img",{className:"round-logo logo",src:"/images/vtb-logo.png"}),s.createElement("img",{className:"round-logo logo",src:"/images/brs-logo.png"}),s.createElement("img",{className:"round-logo logo",src:"/images/alfa-bank-logo.png"}),s.createElement("img",{className:"round-logo logo",src:"/images/webmoney-logo.png"}),s.createElement("img",{className:"round-logo logo",src:"/images/sbp-logo.png"}),s.createElement("img",{className:"round-logo logo",src:"/images/mastercard-logo.png"}),s.createElement("img",{className:"round-logo logo",src:"/images/maestro-logo.png"}),s.createElement("img",{className:"round-logo logo",src:"/images/visa-logo.png"}),s.createElement("img",{className:"logo",src:"/images/qiwi-logo.png"}))))))}}const j=(0,i.EN)($);class F extends s.Component{constructor(){super(),this.state={notFoundContent:s.createElement("label",{className:"content"},"Возможно вы неверно указали адрес страницы,",s.createElement("br",null)," либо страница не существует")}}render(){const{notFoundContent:e}=this.state;return s.createElement(s.Fragment,null,s.createElement("div",{className:"not-found"},s.createElement("div",{className:"not-found-bg"}),s.createElement("h2",null,"Страница не найдена"),e,s.createElement("div",{className:"error"},s.createElement("span",{className:"four"},"4"),s.createElement("img",{src:"/images/logo-not-found.png",className:"logo"}),s.createElement("span",{className:"four"},"4")),s.createElement("div",{className:"link"},s.createElement(r.rU,{className:"link-to-home",to:"/"},"Перейти на главную"))))}}var I=a(5477);function B(e){let{people:t,renderPeopleLimit:a=3}=e,n=[];if(t)for(let e=0;e<t.length&&e<a;e++){const a=t[e];let r={};a.avatar.includes("#")?r.background="".concat(a.avatar):r.background='url("'.concat(a.avatar,'") center/cover no-repeat');const o={background:r.background};0!=e&&(o.marginLeft="-5px"),n.push(s.createElement("div",{style:o,key:a.name,className:"person-bought"},a.avatar.includes("#")&&s.createElement("span",{className:"first-two-char"},a.name.substring(0,2))))}return s.createElement("div",{className:"bought-people"},t&&t.length<1?s.createElement("label",{style:{margin:0},className:"nobody-bought"},"Этот товар ещё никто не купил"):s.createElement("div",{className:"bought-people-wrap"},s.createElement("div",{className:"people"},n),s.createElement("label",{className:"bought-amount"},"+",t&&t.length,s.createElement("span",null,"Уже приобрели этот продукт"))))}function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function _(e){const{user:t,userAvatar:a,subscriptions:n,deviceWidth:o,isRequestMaking:i,showChoosingDays:c}=e;let l;return e.popularProducts.length>0&&(l=e.popularProducts.map((e=>s.createElement("div",{className:"popular-product",style:{opacity:i?0:1,width:"370px"},key:e.id},s.createElement("img",{className:"cover",style:{width:"330px"},src:e.imageURLdashboard}),s.createElement("div",{className:"title"},s.createElement("h3",{className:"product-title"},e.title," | ",s.createElement("span",{className:"product-for"},e.productFor))),s.createElement("span",{className:"description"},e.description),s.createElement(B,{people:e.peopleBought}),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button ".concat("onupdate"==e.status?"disabled":""),onClick:()=>c(e)},"Купить"),s.createElement(r.rU,{className:"button",to:"/dashboard/products/".concat(e.title)},"Подробнее")))))),s.createElement("div",{className:"lobby"},s.createElement("div",{className:"container"},s.createElement("h2",{className:"welcome"},"Добро пожаловать, ",s.createElement("span",{className:"user-avatar-wrap",style:{opacity:Object.keys(t).length>1?1:0}},t.name?t.name:"имя"),"!"),s.createElement("div",{className:"general-info"},s.createElement("div",{className:"info"},s.createElement("div",{className:"user"},s.createElement("div",{className:"general"},s.createElement("div",{className:"avatar",style:a},s.createElement("span",{className:"first-char"},t.nameFirstChar)),s.createElement("div",{className:"data"},s.createElement("span",{className:"user-name"},t.name),s.createElement("span",{className:"user-email"},t.email))),s.createElement("div",{className:"buttons"},s.createElement("a",{className:"download-loader button",onClick:e=>p(e.target)},"Скачать лоадер"),s.createElement(r.rU,{className:"subs button",to:"/dashboard/subscriptions"},"Подписки"))),s.createElement("div",{className:"subscriptions"},s.createElement(r.rU,{className:"subscription all",to:"/dashboard/subscriptions"},s.createElement("div",{className:"all subs"},s.createElement("div",{className:"amount"},n.all.length),s.createElement("div",{className:"type"},"Всего")),s.createElement("div",{className:"linear-gradient-bg all"}),s.createElement("img",{src:"/images/all.png",className:"subscription-character"})),s.createElement(r.rU,{className:"subscription active",to:"/dashboard/subscriptions"},s.createElement("div",{className:"active subs"},s.createElement("div",{className:"amount"},n.active.length),s.createElement("div",{className:"type"},"Активные")),s.createElement("div",{className:"linear-gradient-bg active"}),s.createElement("img",{src:"/images/active.png",className:"subscription-character"})),s.createElement(r.rU,{className:"subscription overdue",to:"/dashboard/subscriptions"},s.createElement("div",{className:"overdue subs"},s.createElement("div",{className:"amount"},n.overdue.length),s.createElement("div",{className:"type"},"Просроченные")),s.createElement("div",{className:"linear-gradient-bg overdue"}),s.createElement("img",{src:"/images/overdue.png",className:"subscription-character"})))),s.createElement("div",{className:"opportunities"},s.createElement("div",{className:"reset opportunity"},s.createElement("h2",null,"Сброс привязки"),s.createElement("img",{src:"/images/reset.png",className:"character"}),s.createElement("span",{className:"content"},'Убедитесь, что вы не "нарушаете правила"'),s.createElement("div",{className:"links"},s.createElement(r.rU,{to:"/dashboard/reset-binding"},"Перейти"),s.createElement("a",{href:"/terms.pdf"},"Правила"))),s.createElement("div",{className:"questions opportunity"},s.createElement("h2",null,"Собрали наиболее актуальные",s.createElement("br",null)," ответы на вопросы"),s.createElement("img",{src:"/images/answers_to_questions.png",className:"character"}),s.createElement(r.rU,{className:"explore",to:"/dashboard/FAQ"},"Изучить"))),s.createElement("a",{href:"https://vk.com/@zeer_csgo-start-zeer-loader",target:"_blank",className:"video"},s.createElement("img",{src:"/images/play-button.svg",className:"play"}),s.createElement("div",{className:"watch"}))),s.createElement("h2",{className:"popular-products"},"Популярные продукты"),o>1080?i?s.createElement(I.Z,{style:{display:i?"block":"none",margin:"50px auto 0 auto"}}):s.createElement(u.Z,Y({className:"popular-products-slider"},{infinite:!0,speed:500,slidesToShow:3,slidesToScroll:3,autoplaySpeed:7500,responsive:[{breakpoint:1180,settings:{arrows:!1}}]}),l,l):s.createElement("div",{className:"popular-products-slides"},l)))}class z extends s.Component{render(){const{isRequestMaking:e,showChoosingDays:t,chooseDaysAmountShown:a}=this.props;let n={};e?(n.opacity=0,n.pointerEvents="none",n.userSelect="none"):(n.opacity=1,n.pointerEvents="all",n.userSelect="text"),n.pointerEvents=a?"none":"all";const o=this.props.products.map((e=>s.createElement("div",{key:e.id,className:"product"},s.createElement("img",{className:"cover",src:e.imageURLdashboard}),s.createElement("div",{className:"product-title"},s.createElement("h3",{className:"title"},e.title," | ",e.productFor)),s.createElement("div",{className:"description"},e.description),s.createElement(B,{people:e.peopleBought}),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button buy ".concat("onupdate"==e.status?"disabled":""),onClick:()=>t(e)},"Купить"),s.createElement(r.rU,{className:"button detailed",to:"/dashboard/products/".concat(e.title)},"Подробнее")))));return s.createElement("div",{id:"products",className:"products"},s.createElement(I.Z,{style:e?{display:"block"}:{display:"none"},className:"progress-bar"}),s.createElement("div",{className:"container",style:n},o))}}class K extends s.Component{constructor(){super(),this.state={showDropdown:!1,choosenDropdown:""}}componentDidUpdate(e){const{getCost:t,getChoosenDropdown:a,costPerDay:s,allCost:n}=this.props,{choosenDropdown:r}=this.state;n&&e.allCost!=n&&n[0]&&(this.setState({choosenDropdown:n[0].menuText}),t(n[0].cost),a(n[0].menuText))}calculateCost(e){const{getCost:t,getChoosenDropdown:a}=this.props;a&&a(e),this.setState({choosenDropdown:e}),t&&t(e)}render(){const{allCost:e}=this.props;let{showDropdown:t,choosenDropdown:a}=this.state;const n=!!this.props.verticalLayout&&this.props.verticalLayout;let r,o=[];return e&&e[0]&&(o=e.map(((e,t)=>s.createElement("div",{className:"item",key:t,onClick:()=>this.calculateCost(e.menuText)},e.menuText,e.menuText==a&&s.createElement("img",{className:"cost-selected",src:"/images/selected-cost.png"}))))),e&&e[0]&&e.map((e=>{e.menuText==a&&(r=s.createElement("span",{className:"cost"},e.cost,"₽ / ",e.costPer))})),s.createElement("div",{className:"calc-cost",style:{flexDirection:n?"column":"row"}},s.createElement("div",{className:"dropdown",onClick:function(){this.setState({showDropdown:!this.state.showDropdown})}.bind(this),style:t?{borderBottomLeftRadius:0,borderBottomRightRadius:0,padding:"0 -1px"}:{borderBottomLeftRadius:"10px",borderBottomRightRadius:"10px",padding:"0 -1px"}},s.createElement("div",{className:"calculated-time"},a,s.createElement("img",{className:"dropdown-arrow",src:"/images/categories-arrow-menu.png"})),s.createElement("div",{className:"items",style:t?{maxHeight:"550px",transition:"350ms"}:{maxHeight:"0",transition:"200ms"}},o)),s.createElement("div",{className:"gray-line",style:{display:n?"none":"block"}}),s.createElement("div",{className:"calculated-cost",style:{marginTop:n?"15px":0}},r))}}function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(a),!0).forEach((function(t){H(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function H(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class W extends s.Component{constructor(){super(),this.state={product:{allCost:[],cost:0},choosenDropdown:"Ежеквартально",cost:0,requestMaking:!1,promoName:"",promoUsed:!1},this.getChoosenDropdown=this.getChoosenDropdown.bind(this),this.getCost=this.getCost.bind(this),this.activatePromocode=this.activatePromocode.bind(this),this.handlePromoNameChange=this.handlePromoNameChange.bind(this)}componentDidUpdate(e){const{product:t}=this.props;e.product!=t&&this.setState({product:t}),t.allCost&&e.product.allCost!=t.allCost&&this.setState({choosenDropdown:t.allCost[0].menuText})}getChoosenDropdown(e){this.setState({choosenDropdown:e})}getCost(e){this.setState({cost:e})}async activatePromocode(e){e.preventDefault(),this.setState({requestMaking:!0});const{product:{title:t,allCost:a},promoUsed:s}=this.state,n=document.forms.activatePromo.promoName.value,r=(0,o.Z)(localStorage.getItem("token")),{ip:i,city:c}=await f(),m={name:n,title:t,username:r.name,navigator:{userAgent:navigator.userAgent},locationData:{ip:i,location:c}},{activatePromo:{response:{message:d,success:p},discountPercent:u}}=await h("\n            mutation activatePromo(\n                $name: String!,\n                $title: String!,\n                $username: String!,\n                $navigator: NavigatorInput!,\n                $locationData: LocationInput!\n            ) {\n                activatePromo(\n                    name: $name,\n                    title: $title,\n                    username: $username,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    response {\n                        message\n                        success\n                    }\n                    discountPercent\n                }\n            }\n        ",m);l(p?"success":"error",d),1==u||s||a.map((e=>{e.cost=Math.round(e.cost-u/100*e.cost),0==e.cost&&(e.cost=1)})),this.setState({requestMaking:!1,product:V(V({},this.state.product),{},{allCost:a}),promoUsed:!0})}handlePromoNameChange(e){this.setState({promoName:e.target.value})}render(){const{style:e,hideModal:t,buyProduct:a}=this.props,{product:n,choosenDropdown:r,requestMaking:o,promoName:i}=this.state,{costPerDay:c,title:l}=n;let m=1,d=1;return n.allCost&&n.allCost.map((e=>{e.menuText.toLowerCase()==r.toLowerCase()&&(m=e.cost,d=e.days)})),s.createElement("div",{className:"choosing-cost-modal",style:{pointerEvents:o?"none":e.pointerEvents,opacity:o?.5:e.opacity}},s.createElement("div",{className:"heading"},s.createElement("h3",null,"Выберите количество дней"),s.createElement(b.Z,{className:"close-icon",onClick:t})),s.createElement("div",{className:"choose-cost"},s.createElement("h3",{className:"product-title"},"Покупка продукта ",l),s.createElement(K,{verticalLayout:!0,costPerDay:c,getChoosenDropdown:this.getChoosenDropdown,getCost:this.getCost,cost:n.cost,allCost:n.allCost}),s.createElement("button",{className:"buy-product",onClick:()=>{a({title:l,cost:m,days:d,promoName:i})}},"Купить")),s.createElement("form",{className:"activate-promocode",name:"activatePromo",onSubmit:this.activatePromocode},s.createElement("div",{className:"field-wrap"},s.createElement("input",{type:"text",name:"promoName",className:"promo-name-field",required:!0,onChange:this.handlePromoNameChange,value:i}),s.createElement("label",{className:"field-label"},"Введите промокод")),s.createElement("button",{className:"activate",type:"submit"},"Активировать")))}}function G(e){let{message:t,style:a}=e;return s.createElement("div",{className:"message-modal",style:a},t)}class Q extends s.Component{constructor(){super(),this.state={subscriptions:{all:[],overdue:[],active:[]},showAll:!1,isRequestSent:!1,message:"Message",isMessageShown:!1},this.freezeSubscription=this.freezeSubscription.bind(this),this.unfreezeSubscription=this.unfreezeSubscription.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.showMessageModal=this.showMessageModal.bind(this),this.hideMessageModal=this.hideMessageModal.bind(this),this.refuseSub=this.refuseSub.bind(this)}componentDidUpdate(e){const{subscriptions:t}=this.props;e.subscriptions!=this.props.subscriptions&&this.setState({subscriptions:t})}componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.props.hideAgreement()}.bind(this);const{subscriptions:e}=this.props,t=(0,o.Z)(localStorage.getItem("token"));this.setState({subscriptions:e,user:t})}async unfreezeSubscription(e){this.setState({isRequestSent:!0});const t=e.target.parentNode.parentNode.parentNode.parentNode.childNodes[0].childNodes[0].textContent,a={name:this.state.user.name,title:t};await h("\n            mutation unfreezeSubscription($name: String!, $title: String!) {\n                unfreezeSubscription(name: $name, title: $title) {\n                    success\n                    message\n                }\n            }\n        ",a),await this.props.getSubscriptions(),this.setState({isRequestSent:!1})}async freezeSubscription(e){this.setState({isRequestSent:!0});const t=e.target.parentNode.parentNode.parentNode.parentNode.childNodes[0].childNodes[0].textContent,a={name:this.state.user.name,title:t};await h("\n            mutation freezeSubscription($name: String!, $title: String!) {\n                freezeSubscription(name: $name, title: $title) {\n                    message\n                    success\n                }\n            }\n        ",a);(new Date).setMonth((new Date).getMonth()+1);l("info","Вы заморозили подписку ".concat(t)),await this.props.getSubscriptions(),this.setState({isRequestSent:!1})}async handleSubmit(e){this.setState({isRequestSent:!0}),e.preventDefault();const t=document.forms.activateKey.keyName;t.blur();const a=(0,o.Z)(localStorage.getItem("token")),s=await f(),{ip:n,city:r}=s,i={username:a.name,keyName:t.value,navigator:{userAgent:navigator.userAgent,platform:navigator.platform,appName:navigator.appName,appVersion:navigator.appVersion},locationData:{ip:n,location:r}},c=await h("\n            mutation activateKey(\n                $username: String!,\n                $keyName: String!,\n                $navigator: NavigatorInput,\n                $locationData: LocationInput\n            ) {\n                activateKey(\n                    username: $username,\n                    keyName: $keyName,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    message\n                    success\n                }\n            }\n        ",i);t.value="",await this.props.getSubscriptions(),this.setState({isRequestSent:!1});const{message:m,success:d}=c.activateKey;l(d?"success":"error",m)}showMessageModal(){this.setState({isMessageShown:!0})}hideMessageModal(){this.setState({isMessageShown:!1})}chooseSub(e){const{products:t,showChoosingDays:a}=this.props,{title:s}=e;let n={};for(let e=0;e<t.length;e++){const a=t[e];if(s==a.title){n=a;break}}a(n)}async refuseSub(e){this.setState({isRequestSent:!0});const t={title:e,name:(0,o.Z)(localStorage.getItem("token")).name},{refuseSub:{success:a,message:s}}=await h("\n            mutation refuseSub($name: String!, $title: String!) {\n                refuseSub(name: $name, title: $title) {\n                    message\n                    success\n                }\n            }\n        ",t);l(a?"info":"error",s),await this.props.getSubscriptions(),this.setState({isRequestSent:!1})}render(){const{subscriptions:e,isRequestSent:t,showAll:a,isMessageShown:n,message:o,showChoosingDays:i}=this.state,{toggleAgreement:c,agreementShown:l,chooseDaysShown:m}=this.props,d=[],h=[];for(let t=0;t<e.all.length;t++){const a=e.all[t],{status:n,imageURL:o,title:i,productFor:c,activelyUntil:l,wasFreezed:m}=a;n.isExpired&&h.push(s.createElement("div",{key:i,className:"subscription"},s.createElement("img",{src:o||"",style:{border:"3px solid #FC5A5A"},className:"subscription-icon"}),s.createElement("div",{className:"content"},s.createElement("h3",{className:"sub-title"},i," | ",c),s.createElement("span",{className:"overdue"},"Просроченo"),s.createElement("div",{className:"status-content expired"},s.createElement("label",{className:"status payment-required"},"Требуется оплата"),s.createElement("div",{className:"buttons-wrap"},s.createElement("div",{className:"buttons"},s.createElement("button",{onClick:()=>this.chooseSub(a),className:"button pay"},"Оплатить"),s.createElement("button",{className:"button refuse",onClick:()=>this.refuseSub(a.title)},"Oтказаться")),s.createElement(r.rU,{to:"/dashboard/products/".concat(i),className:"product-info"},"i"))))))}for(let n=0;n<e.all.length;n++){const o=e.all[n],{status:i,imageURL:c,title:l,productFor:h,activelyUntil:p,wasFreezed:u}=o,g=u;if(!a&&n>6)break;(i.isActive||i.isFreezed)&&d.push(s.createElement("div",{key:l,className:"subscription"},s.createElement("img",{style:i.isFreezed?{mixBlendMode:"luminosity"}:{mixBlendMode:"inherit"},src:c||"",className:"subscription-icon"}),s.createElement("div",{className:"content"},s.createElement("h3",{className:"sub-title"},l," | ",h),s.createElement("span",{className:"active-until"},"\n                                    Активно до\n                                    ".concat(new Date(p).toLocaleDateString(),"\n                                ")),i.isActive&&s.createElement("div",{className:"status-content active"},s.createElement("label",{className:"active status"},"Работает"),s.createElement("div",{className:"buttons-wrap"},s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button extend",onClick:()=>this.chooseSub(o)},"Продлить"),s.createElement("button",{className:"button freeze",onClick:this.freezeSubscription,onMouseEnter:e=>{e.target.style.backgroundColor="rgba(255, 255, 255, .1)"},onMouseLeave:e=>{e.target.style.backgroundColor=g?"#dfdfdf":"transparent"},style:{background:g?"#dfdfdf":"transparent",pointerEvents:t||g||m?"none":"all",color:g?"rgb(100, 100, 100)":"#fafafb"}},"Заморозить")),s.createElement(r.rU,{to:"/dashboard/products/".concat(l),className:"product-info"},"i"))),i.isFreezed&&s.createElement("div",{className:"status-content freezed"},s.createElement("label",{className:"freezed status"},"Заморожен"),s.createElement("div",{className:"buttons-wrap"},s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button extend",onClick:()=>this.chooseSub(o)},"Продлить"),s.createElement("button",{onClick:this.unfreezeSubscription,className:"button unfreeze"},"Разморозить")),s.createElement(r.rU,{to:"/dashboard/products/".concat(l),className:"product-info"},"i"))))))}return s.createElement("div",{className:"subscriptions",style:{opacity:l||m?.5:1,pointerEvents:l||m?"none":"all",userSelect:l||m?"none":"text",transition:"300ms"}},s.createElement(G,{style:{opacity:n?1:0,zIndex:n?1:-1},message:o}),s.createElement("div",{className:"container"},s.createElement("div",{className:"all-subscriptions"},s.createElement("h2",{className:"active-subs-title"},"Активные подписки"),s.createElement(I.Z,{style:{display:this.props.isRequestMaking?"block":"none"},className:"progress-bar"}),s.createElement("div",{className:"active-subs",style:{pointerEvents:t||l||m?"none":"all",opacity:this.props.isRequestMaking?0:l||m?.5:1}},d),s.createElement("div",{className:"show-all"},e.all&&e.active.length>6?s.createElement("div",{className:"show-all-wrap"},s.createElement("button",{onClick:function(){this.setState({showAll:!this.state.showAll})}.bind(this),className:"show"},"Показать ещё"),s.createElement("label",null,"Показано ","".concat(d.length)," подписок из ","".concat(e.active.length))):s.createElement("div",{className:"show-all-wrap"},s.createElement("label",{style:{margin:0}},"Показано ",d.length," подписок из ",e.active&&e.active.length))),e.overdue&&e.overdue.length>0&&s.createElement("h2",{className:"overdue-sub-title"},"Просроченные подписки"),s.createElement("div",{className:"expired-subscriptions",style:{pointerEvents:t||l||m?"none":"all",opacity:this.props.isRequestMaking?0:l||m?.5:1}},h)),s.createElement("form",{onSubmit:this.handleSubmit,className:"activate-product",style:{pointerEvents:t||l||m?"none":"all",userSelect:t||l||m?"none":"text"},name:"activateKey"},s.createElement("h2",null,"Активация"),s.createElement("label",{className:"activate-product-label"},"Если есть ключ",s.createElement("br",null),"активации, то вставьте",s.createElement("br",null),"его в специальное поле"),s.createElement("div",{className:"field-wrap"},s.createElement("input",{name:"keyName",className:"activate-key",required:"required"}),s.createElement("label",null,"Введите ключ")),s.createElement("button",{type:"submit",className:"activate"},"Активировать ключ"),s.createElement("label",{className:"terms"},'Нажимая кнопку "Активировать ключ"',s.createElement("br",null),"я соглашаюсь  ",s.createElement("a",{href:"https://zeer-marketplace-ui-macsik121.herokuapp.com/terms.pdf",type:"button",className:"terms-n-policy",style:{cursor:t?"default":"pointer"}},"с правилами")))))}}function J(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?J(Object(a),!0).forEach((function(t){ee(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):J(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class te extends s.Component{constructor(){super(),this.state={answers:[],answersCopy:[],searchValue:"",categoriesToSearch:[],currentCategory:"Все категории",hiddenSearchCategories:!0,deviceWidth:0},this.renderAnswers=this.renderAnswers.bind(this),this.addElement=this.addElement.bind(this),this.handleChangeCategory=this.handleChangeCategory.bind(this),this.handleSearch=this.handleSearch.bind(this),this.filterAnswers=this.filterAnswers.bind(this),this.toggleCategoryMenu=this.toggleCategoryMenu.bind(this),this.hiddenCategoryMenu=this.hiddenCategoryMenu.bind(this)}componentDidUpdate(e,t){if(e.answers!=this.props.answers){const{answers:e}=this.props,t=["Все категории"];e.map((e=>t.push(e.sort))),this.setState({answers:e,answersCopy:e.slice(),categoriesToSearch:t})}const{currentCategory:a,answersCopy:s,searchValue:n}=this.state,r=this.state.answersCopy.slice();if(t.currentCategory!=a)for(let e=0;e<r.length;e++){if("Все категории"==a){this.setState({answers:s},(()=>this.filterAnswers(n)));break}r[e].sort==a&&this.setState({answers:[X({},r[e])]},(()=>this.filterAnswers(n)))}}componentDidMount(){const{answers:e}=this.props;this.setState({answers:e,answersCopy:e.slice()});let t=[...e];t=t.map((e=>(e.isShown=!1,e)));const a=["Все категории"];t.map((e=>a.push(e.sort))),this.setState({categoriesToSearch:a,deviceWidth:window.innerWidth,answersCopy:t.slice(),answers:t})}filterAnswers(e){const{answers:t,answersCopy:a,currentCategory:s}=this.state;this.setState({searchValue:e});let n=[];if(t.map((t=>{let a=X({},t);a.answers=[],t.answers.filter((t=>{(t.title.toLowerCase().includes(e.toLowerCase().trim())||t.answer.toLowerCase().includes(e.toLowerCase().trim()))&&a.answers.push(t)})),a.answers.length>0&&n.push(a)})),e.length<1){n=[];for(let e=0;e<a.length;e++)("Все категории"==s||s==a[e].sort)&&n.push(a[e]);this.setState({answers:n})}else n.length<1?this.setState({answers:[]}):this.setState({answers:n})}addElement(e){const t=e.answers.map(((e,t)=>s.createElement("div",{key:t,className:"answer"},s.createElement("div",{className:"answer-main-bg"}),s.createElement("div",{className:"answer-additional-bg"}),s.createElement("h4",{className:"answer-title"},e.title,"?"),s.createElement("div",{className:"answer-to-question"},e.answer),s.createElement("div",{className:"answer-rate"},s.createElement("div",{className:"bar"},s.createElement("div",{className:"25-percents",style:e.usefulRate>=25?{backgroundColor:"#50B5FF"}:{backgroundColor:"#fff"}}),s.createElement("div",{className:"50-percents",style:e.usefulRate>=50?{backgroundColor:"#50B5FF"}:{backgroundColor:"#fff"}}),s.createElement("div",{className:"75-percents",style:e.usefulRate>=75?{backgroundColor:"#50B5FF"}:{backgroundColor:"#fff"}}),s.createElement("div",{className:"100-percents",style:e.usefulRate>=100?{backgroundColor:"#50B5FF"}:{backgroundColor:"#fff"}})),s.createElement("span",{className:"useful-rate"},e.usefulRate,"%")),s.createElement("div",{className:"people-percent"},s.createElement("span",{className:"percent"},e.usefulRate,"% считают ответ полезным"),s.createElement("button",{className:"rate-answer"},"Полезно")))));return t.unshift(s.createElement("div",{key:t.length+1,className:"answer-not-found"},s.createElement("a",{href:"https://vk.com/zeer_csgo",target:"_blank",className:"plus-icon"},s.createElement("img",{src:"/images/answer-not-found.png"})),s.createElement("h3",{className:"not-found-title"},"Не нашли ответа"),s.createElement("span",{className:"message"},"Свяжитесь с нами через кнопку, либо по контактам в футере"))),t}renderAnswers(){const e=this.state.answers.map(((e,t)=>{const a=this.addElement(e);let n=350;for(let t=0;t<e.answers.length;t++)t%4==0&&(n+=500);return s.createElement("div",{key:t,className:"answers-wrap"},s.createElement("div",{className:"answer-title",onClick:()=>{const t=this.state.answers.map((t=>(t.sort==e.sort&&(t.isShown=!t.isShown),t)));this.setState({answers:t})}},s.createElement("img",{style:e.isShown?{transform:"rotate(90deg)"}:{transform:"rotate(0deg)"},className:"answers-arrow",src:"/images/Rectangle.png"}),s.createElement("h3",{className:"title"},e.sort," ",s.createElement("span",{className:"number"},"(",e.answers.length,")")),s.createElement("div",{className:"gray-line"})),s.createElement("div",{className:"answers",style:e.isShown?{maxHeight:"".concat(n,"px"),transition:"500ms"}:{maxHeight:0,transition:"250ms"}},a))}));return s.createElement(s.Fragment,null,e)}handleChangeCategory(e){this.setState({currentCategory:e.target.textContent})}handleSearch(e){this.filterAnswers(e.target.value)}hiddenCategoryMenu(){this.setState({hiddenSearchCategories:!0})}toggleCategoryMenu(){this.setState({hiddenSearchCategories:!this.state.hiddenSearchCategories})}render(){const{searchValue:e,hiddenSearchCategories:t,currentCategory:a,deviceWidth:n}=this.state,{isRequestMaking:r}=this.props;let o="";const i=this.state.categoriesToSearch.map((e=>s.createElement("span",{className:"category",onClick:function(e){this.handleChangeCategory(e),this.setState({hiddenSearchCategories:!0})}.bind(this),key:e,style:e==a?{backgroundColor:"#2d2d36"}:{}},e)));if(n>600)for(let e=0;e<a.length;e++){if(!(e<11&&a[e])){o+="...";break}o+=a[e]}else for(let e=0;e<a.length;e++){if(!(e<22&&a[e])){o+="...";break}o+=a[e]}return s.createElement("div",{className:"FAQ"},s.createElement("div",{className:"container"},s.createElement("h2",null,"Ответы на вопросы"),s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"categories"},s.createElement("div",{className:"first-category",onClick:this.toggleCategoryMenu},o,s.createElement("img",{src:"/images/categories-arrow-menu.png",className:"arrow"})),s.createElement("div",{style:t?{maxHeight:0,transition:"200ms"}:{maxHeight:"550px",transition:"500ms"},className:"the-rest-categories"},i.map((e=>e)))),s.createElement("input",{onClick:this.hiddenCategoryMenu,placeholder:"Ваш вопрос...",className:"search",value:e,onChange:this.handleSearch}),s.createElement("img",{className:"search-icon",src:"/images/search-icon.png"})),s.createElement(I.Z,{style:{display:r?"block":"none",margin:"50px auto 0 auto"}}),s.createElement("div",{className:"answers-wrap",style:{transform:"translateX(".concat(r?"-2%":0,")"),opacity:r?0:1}},this.renderAnswers())))}}function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function se(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(a),!0).forEach((function(t){ne(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class re extends s.Component{constructor(){super(),this.state={isRequestMaking:!1,product:{},changes:[{createdDate:new Date}],showAllChanges:!1,cost:1,choosenDropdown:"Ежеквартально"},this.loadProduct=this.loadProduct.bind(this),this.showAllChanges=this.showAllChanges.bind(this),this.renderChanges=this.renderChanges.bind(this),this.calculateCost=this.calculateCost.bind(this),this.getCost=this.getCost.bind(this),this.getChoosenDropdown=this.getChoosenDropdown.bind(this)}async componentDidUpdate(e){const{product:t}=this.props;JSON.stringify(e.product)!=JSON.stringify(t)&&this.setState({product:t,changes:t.changes})}async componentDidMount(){await this.loadProduct()}async loadProduct(){if(this.props.product)this.setState({product:this.props.product});else{this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params,t=await h("\n                query getProduct($title: String!) {\n                    getProduct(title: $title) {\n                        id\n                        title\n                        productFor\n                        logo\n                        changes {\n                            id\n                            version\n                            created\n                            description\n                        }\n                        imageURL\n                        imageURLdashboard\n                        workingTime\n                        reloading\n                        costPerDay\n                        description\n                        locks\n                        timeBought\n                        allCost {\n                            cost\n                            costPer\n                            menuText\n                            days\n                        }\n                        peopleBought {\n                            name\n                            avatar\n                        }\n                        characteristics {\n                            version\n                            osSupport\n                            cpuSupport\n                            gameMode\n                            developer\n                            supportedAntiCheats\n                        }\n                        status\n                        cost {\n                            perDay\n                            perMonth\n                            perYear\n                        }\n                    }\n                }\n            ",{title:e}),{getProduct:a}=t;let{changes:s}=a;this.setState({product:a,changes:s,isRequestMaking:!1,cost:a.cost})}}showAllChanges(){this.setState({showAllChanges:!this.state.showAllChanges})}renderChanges(){return{changes:!this.props.hideChanges&&this.state.changes.map(((e,t)=>!this.state.showAllChanges&&t<3||this.state.showAllChanges?s.createElement("div",{key:e.id,className:"change"},s.createElement("div",{className:"general"},s.createElement("span",{className:"version"},e.version," версия"),s.createElement("span",{className:"created"},new Date(e.created).toLocaleDateString())),s.createElement("div",{className:"description"},e.description,".")):void 0))||[],lastUpdate:this.state.changes?this.state.changes[this.state.changes.length-1]:{createdDate:new Date}}}calculateCost(e){this.setState({choosenDropdown:e.target.textContent})}getCost(e){this.setState({cost:e})}getChoosenDropdown(e){this.setState({choosenDropdown:e})}render(){const{product:e,isRequestMaking:t,choosenDropdown:a}=this.state,{buyProduct:n,chooseDaysAmountShown:r}=this.props,o=this.renderChanges(),i=o.changes,c=o.lastUpdate;let l,m=new Date;c&&(m=new Date(c.created));let d=(new Date).getDate()-m.getDate(),h=(new Date).getMonth()+1-m.getMonth()+1,p=(new Date).getFullYear()-m.getFullYear();if(0==d){let e=(new Date).getHours()-m.getHours();if(0==e){let e=0;e=(new Date).getMinutes()-m.getMinutes();const t=Number(e.toString()[e.toString().length-1]);if(0==e){let e=0;e=(new Date).getSeconds()-m.getSeconds(),l="".concat(e,1==e?" секунду":e<5&&e>1?" секунд":" секунды"),0==e&&(l=null)}else l="".concat(e,e<20&&e>4?" минут":1==t?" минуту":t<5&&t>1?" минуты":" минут")}else 1==e?l="".concat(e," час"):e<5&&e>1?l="".concat(e," часа"):e<=20&&e>=5?l="".concat(e," часов"):e<24&&e>20&&(l="".concat(e," часа"))}else if(d<31&&d>0){const e=Number(d.toString()[d.toString().length-1]);l="".concat(d,d<20&&d>4?" дней":1==e?" день":e<5&&e>1?" дня":" дней")}else if(h<6&&h>0)l=1==h?"1 месяц":"".concat(h,h<=4&&h>=2?" месяца":" месяцев");else if(h<12&&h>=6)l="Пол года";else{const e=Number(p.toString()[p.toString().length-1]);1==e?l="".concat(p," год"):0==e||p<=20&&p>=5?l="".concat(p," лет"):e<5&&e>1?l="".concat(p," года"):e>=5&&(l="".concat(p," лет"))}let u=[{title:"Работает",content:""},{title:"Блокировок",content:""},{title:"Обновляется",content:""},{title:"Стоимость",content:""}];e&&Object.keys(e).length>0&&(u[0]={title:"Работает",content:e.workingTime},u[1]={title:"Блокировок",content:e.locks},u[2]={title:"Обновляется",content:e.reloading},e.costPerDay&&(u[3]={title:"Стоимость",content:"".concat(e.costPerDay," ₽ / День")}));const g=s.createElement("div",{className:"product-wrap",style:{opacity:t||this.props.isRequestMaking?0:1}},s.createElement("div",{className:"cover",style:{backgroundImage:'url("'.concat(e.imageURLdashboard,'")')}}),s.createElement("div",{className:"product"},s.createElement("div",{className:"container"},s.createElement("div",{className:"main"},s.createElement("div",{className:"logo",style:{backgroundImage:'url("'.concat(e.logo,'")')}}),s.createElement("div",{className:"product-title"},s.createElement("h3",{className:"title"},e.title," | ",e.productFor),s.createElement(B,{renderPeopleLimit:5,people:e.peopleBought})),s.createElement("div",{className:"actions"},s.createElement("button",{className:"\n                                        status-button\n                                        ".concat("undetect"==e.status?"undetect":"onupdate"==e.status?"onupdate":"detect","\n                                    ")},"undetect"==e.status?"Undetect":"onupdate"==e.status?"On update":"Detect",s.createElement("img",{className:"ellipse",src:"\n                                            /images/Ellipse ".concat("undetect"==e.status?1:"onupdate"==e.status?2:3,".png\n                                        ")})),s.createElement("span",{className:"last-update"},s.createElement("span",{className:"createdDate"},l?"Обновлён ".concat(l," назад"):"Ни разу не обновлялся"),s.createElement("div",{className:"circle"}),s.createElement("span",{className:"current-version"},this.state.chagnes&&this.state.changes[0]?this.state.changes[0].version:"1,00"," версия")))),s.createElement("div",{className:"general-info"},u.map(((e,t)=>{if(e)return s.createElement("div",{key:e.title,className:"general-info-wrap"},s.createElement("h3",{className:"info-title"},e.title),s.createElement("span",{className:"info-content"},e.content))}))),s.createElement("div",{className:"general"},s.createElement("div",{className:"description"},s.createElement("h4",null,"Описание продукта"),s.createElement("p",null,e.description)),s.createElement("div",{className:"characteristics"},s.createElement("h4",null,"Характеристики"),s.createElement("ul",null,s.createElement("li",{className:"characteristic"},s.createElement("div",{className:"wrap"},s.createElement("span",{className:"name"},"Версия игры:")," ",s.createElement("span",{className:"value"},e.characteristics&&e.characteristics.version))),s.createElement("li",{className:"characteristic"},s.createElement("div",{className:"wrap"},s.createElement("span",{className:"name"},"Поддерживаемые ОС:")," ",s.createElement("span",{className:"value"},e.characteristics&&e.characteristics.osSupport))),s.createElement("li",{className:"characteristic"},s.createElement("div",{className:"wrap"},s.createElement("span",{className:"name"},"Поддерживаемые процессоры:")," ",s.createElement("span",{className:"value"},e.characteristics&&e.characteristics.cpuSupport))),s.createElement("li",{className:"characteristic"},s.createElement("div",{className:"wrap"},s.createElement("span",{className:"name"},"Режим игры:")," ",s.createElement("span",{className:"value"},e.characteristics&&e.characteristics.gameMode))),s.createElement("li",{className:"characteristic"},s.createElement("div",{className:"wrap"},s.createElement("span",{className:"name"},"Разработчик:")," ",s.createElement("span",{className:"value"},e.characteristics&&e.characteristics.developer))),s.createElement("li",{className:"characteristic"},s.createElement("div",{className:"wrap"},s.createElement("span",{className:"name"},"Поддерживаемые античиты:")," ",s.createElement("span",{className:"value"},e.characteristics&&e.characteristics.supportedAntiCheats))))),s.createElement("div",{className:"cost"},s.createElement(K,{getCost:this.getCost,costPerDay:e.costPerDay,getChoosenDropdown:this.getChoosenDropdown,cost:e.cost,allCost:e.allCost}),s.createElement("div",{className:"button",style:{pointerEvents:this.props.isRequestMaking||r?"none":"all"}},s.createElement("button",{onClick:()=>{let{choosenDropdown:t}=this.state,a=1,s=1;e.allCost.map((e=>{e.menuText.toLowerCase()==t.toLowerCase()&&(s=e.cost,a=e.days)})),n&&this.props.showChoosingDays(e)},className:"buy-button ".concat("onupdate"==e.status?"disabled":"")},"Купить")))))));return s.createElement("div",{className:"info"},this.props.hideCircularProgress?"":s.createElement(I.Z,{className:"progress-bar",style:{display:t||this.props.isRequestMaking?"block":"none"}}),s.createElement("h2",{style:{display:this.props.hideh2?"none":"block"}},"Информация о продукте"),s.createElement("div",{className:"general",style:se({opacity:t||this.props.isRequestMaking?0:1,pointerEvents:t||r||this.props.isRequestMaking?"none":"all",marginTop:this.props.hideh2?0:"30px"},this.props.style||"")},g),s.createElement("div",{className:"changes-log",style:{opacity:this.props.hideChanges||t||this.props.isRequestMaking?0:1,pointerEvents:this.props.hideChanges||r||t||this.props.isRequestMaking?"none":"all"}},s.createElement("h2",null,"Журнал изменений"),i.length>0&&s.createElement("div",{className:"changes",style:{opacity:t||this.props.isRequestMaking?0:1,pointerEvents:t||r||this.props.isRequestMaking?"none":"all"}},i,s.createElement("div",{className:"show-all"},i.length>3&&s.createElement("button",{onClick:this.showAllChanges,className:"show-more"},this.state.showAllChanges?"Спрятать":"Показать ещё"),s.createElement("span",{style:i.length>3?{}:{margin:0},className:"how-many-shown"},"Показано последние",i.length>3?this.state.showAllChanges?" ".concat(i.length," "):" 3 ":" ".concat(i.length," "),"обновлений из ",i.length)))))}}const oe=(0,i.EN)(re);class ie extends s.Component{constructor(){super(),this.state={popularProducts:[],isRequestMaking:!1,product:null},this.getProduct=this.getProduct.bind(this)}async componentDidUpdate(e){const t=e.match.params.title,{title:a}=this.props.match.params;t!=a&&await this.getProduct()}async getProduct(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params,t=await h("\n            query getProduct($title: String!) {\n                getProduct(title: $title) {\n                    id\n                    title\n                    productFor\n                    logo\n                    changes {\n                        version\n                        created\n                        description\n                    }\n                    imageURL\n                    imageURLdashboard\n                    workingTime\n                    reloading\n                    costPerDay\n                    description\n                    locks\n                    timeBought\n                    peopleBought {\n                        name\n                        avatar\n                    }\n                    characteristics {\n                        version\n                        osSupport\n                        cpuSupport\n                        gameMode\n                        developer\n                        supportedAntiCheats\n                    }\n                    status\n                    cost {\n                        perDay\n                        perMonth\n                        perYear\n                    }\n                    allCost {\n                        cost\n                        costPer\n                        menuText\n                        days\n                    }\n                }\n            }\n        ",{title:e});this.setState({isRequestMaking:!1,product:t.getProduct})}render(){const{isRequestMaking:e,product:t}=this.state,{buyProduct:a,showChoosingDays:n,chooseDaysAmountShown:o}=this.props;let i=[];for(let e=0;e<this.props.popularProducts.length;e++){const t=this.props.popularProducts[e];if(!(e<3))break;i.push(s.createElement("div",{key:t.id,className:"popular-product"},s.createElement("img",{className:"cover",src:t.imageURLdashboard}),s.createElement("h3",null,t.title," | ",t.productFor),s.createElement("span",{className:"description"},t.description),s.createElement(B,{people:t.peopleBought}),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"buy button ".concat("onupdate"==t.status?"disabled":""),onClick:()=>n(t)},"Купить"),s.createElement(r.rU,{to:"/dashboard/products/".concat(t.title),className:"detailed button"},"Подробнее"))))}const c=i.map((e=>{if(e.key)return e}));return s.createElement("div",{className:"product-info"},s.createElement("div",{className:"container"},s.createElement(oe,{match:this.props.match,buyProduct:a,hideChanges:!1,hideCircularProgress:!1,hideh2:!1,isRequestMaking:e,product:t,chooseDaysAmountShown:o,showChoosingDays:n}),s.createElement("div",{className:"popular-products"},s.createElement("h2",null,"Популярные продукты"),s.createElement(I.Z,{className:"progress-bar",style:{display:c.length>0?"none":"block"}}),s.createElement("div",{className:"products",style:{pointerEvents:c.length>0?o?"none":"all":"none",opacity:c.length>0?1:0}},c.length>0&&c))))}}const ce=(0,i.EN)(ie);function le(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class de extends s.Component{constructor(){super(),this.state={errorMessage:".",errorMessageStyles:{opacity:0},newPasswordShown:!1,repeatedPasswordShown:!1,requestMaking:!1,captchaPassed:!1},this.showError=this.showError.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleInputFocus=this.handleInputFocus.bind(this),this.toggleNewPassword=this.toggleNewPassword.bind(this),this.toggleRepeatedPassword=this.toggleRepeatedPassword.bind(this)}showError(e){this.setState({errorMessage:e,errorMessageStyles:{opacity:1}})}async handleSubmit(e){e.preventDefault(),this.setState({requestMaking:!0});const t=document.forms.changePassword,a=t.oldPassword.value,s=t.newPassword.value,n=t.repeatNewPassword.value,r=(0,o.Z)(localStorage.getItem("token"));if(s!=n)return void this.showError("Повторите новый пароль правильно");if(!this.state.captchaPassed)return l("error","Вы не прошли РеКапчу"),void this.setState({requestMaking:!1});const i={name:r.name,oldPassword:a,newPassword:s},c=await h("\n            mutation changePassword(\n                $name: String!,\n                $oldPassword: String!,\n                $newPassword: String!\n            ) {\n                changePassword(\n                    name: $name,\n                    oldPassword: $oldPassword,\n                    newPassword: $newPassword\n                ) {\n                    success\n                    message\n                }\n            }\n        ",i),{message:m,success:d}=c.changePassword;d?(l("success",m),this.props.hideModal()):l("error",m),this.setState({requestMaking:!1})}handleInputFocus(){this.setState({errorMessageStyles:{opacity:0}})}toggleNewPassword(){this.setState({newPasswordShown:!this.state.newPasswordShown})}toggleRepeatedPassword(){this.setState({repeatedPasswordShown:!this.state.repeatedPasswordShown})}render(){const{hideModal:e,modalShown:t}=this.props,{errorMessage:a,errorMessageStyles:n,newPasswordShown:r,repeatedPasswordShown:o,requestMaking:i}=this.state,c=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?le(Object(a),!0).forEach((function(t){me(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):le(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.style);return c.pointerEvents=i?"none":"all",s.createElement("div",{style:c,className:"change-password modal-form"},s.createElement("div",{className:"heading"},s.createElement("h2",null,"Смена пароля"),s.createElement(b.Z,{onClick:e,className:"close-modal"})),s.createElement("label",{style:n,className:"error"},a),s.createElement("form",{name:"changePassword",onSubmit:this.handleSubmit,className:"form",style:{opacity:i?.5:1}},s.createElement("fieldset",{disabled:!t},s.createElement("div",{className:"field-wrap"},s.createElement("input",{required:"required",name:"oldPassword",className:"field old-password",onFocus:this.handleInputFocus}),s.createElement("label",null,"Старый пароль")),s.createElement("div",{className:"field-wrap"},s.createElement("input",{required:"required",name:"newPassword",className:"field new-password",onFocus:this.handleInputFocus,type:r?"text":"password"}),s.createElement("label",null,"Придумайте новый пароль"),s.createElement("img",{onClick:this.toggleNewPassword,src:"/images/field-shown.png",className:"field-shown"}),s.createElement("img",{src:"/images/closed-eye.png",className:"field-hidden",onClick:this.toggleNewPassword,style:r?{display:"none"}:{display:"block"}})),s.createElement("div",{className:"field-wrap"},s.createElement("input",{required:"required",name:"repeatNewPassword",className:"field repeat-new-password",onFocus:this.handleInputFocus,type:o?"text":"password"}),s.createElement("label",null,"Новый пароль ещё раз"),s.createElement("img",{onClick:this.toggleRepeatedPassword,src:"/images/field-shown.png",className:"field-shown"}),s.createElement("img",{src:"/images/closed-eye.png",className:"field-hidden",onClick:this.toggleRepeatedPassword,style:o?{display:"none"}:{display:"block"}})),s.createElement(S,{handleToken:()=>this.setState({captchaPassed:!0}),handleExpire:()=>this.setState({captchaPassed:!1})}),s.createElement("button",{className:"change-password-submit",type:"submit"},"Сменить пароль"))))}}class he extends s.Component{constructor(){super(),this.state={timeWorking:{from:2018,to:2021},deviceWidth:0}}componentDidMount(){window.onresize=function(){this.setState({deviceWidth:window.innerWidth})}.bind(this),this.setState({deviceWidth:window.innerWidth})}render(){const{timeWorking:e,deviceWidth:t}=this.state,{style:a}=this.props;return s.createElement("footer",{style:a,className:"general-footer"},s.createElement("div",{className:"container"},s.createElement("div",{className:"footer-wrap"},s.createElement("div",{className:"zeer"},s.createElement("img",{className:"logo",src:"/images/zeer-logo.png"}),s.createElement("div",{className:"time-working"},"ZEER - ",s.createElement("span",null,e.from),"/",s.createElement("span",null,e.to))),s.createElement("div",{className:"contacts"},t>800&&s.createElement("span",{className:"we-in-soc-media"},"Мы в социальных сетях"),s.createElement("div",{className:"soc-media"},s.createElement("a",{href:"https://t.me/zeer_changer",target:"_blank"},s.createElement("img",{src:"/images/telegram-icon.png"})),s.createElement("a",{href:"https://vk.com/zeer_csgo",target:"_blank"},s.createElement("img",{src:"/images/vk-icon.png"}))),s.createElement("div",{className:"gray-line"}))),s.createElement("a",{style:t>700?{marginTop:0}:{marginTop:"20px"},className:"download-loader",onClick:e=>p(e.target)},"Скачать лоадер")))}}class pe extends s.Component{constructor(){super(),this.state={user:{},selectedImage:""},this.changeAvatar=this.changeAvatar.bind(this)}async createLog(){const e=(0,o.Z)(localStorage.getItem("token")),t=await f(),{ip:a,city:s}=t,n={log:{name:e.name,action:"Выход из аккаунта",date:new Date,location:"Москва",IP:"localhost"},navigator:{userAgent:navigator.userAgent,platform:navigator.platform,appName:navigator.appName,appVersion:navigator.appVersion},locationData:{ip:a,location:s}};await h("\n            mutation createLog(\n                $log: ActionLogInput,\n                $navigator: NavigatorInput,\n                $locationData: LocationInput!\n            ) {\n                createLog(\n                    log: $log,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    name\n                }\n            }\n        ",n)}async changeAvatar(e){const{history:t,_this:a,location:{pathname:s}}=this.props;s.includes("/dashboard")?t.push("/dashboard"):s.includes("/admin")&&t.push("/admin"),await async function(e,t,a){t.setState({isRequestMaking:!0});const s=(0,o.Z)(localStorage.getItem("token")),n=s.name+"_"+e.name;let r=new File([e],n);const i=new FormData,c="/upload-images/"+n;if(!(e.type.includes("jpg")||e.type.includes("jpeg")||e.type.includes("png")||e.type.includes("bmp")))return l("error","Неправильный формат, вы можете загрузить только файлы с расширением .jpg, .jpeg, .png, .bmp"),void t.setState({isRequestMaking:!1});i.append("avatar",r),await fetch("".concat("https://zeer-marketplace-ui-macsik121.herokuapp.com","/uploaded-images"),{method:"POST",body:i});const m=await h("\n        mutation changeAvatar($name: String!, $avatar: String!) {\n            changeAvatar(name: $name, avatar: $avatar)\n        }\n    ",{name:s.name,avatar:c});localStorage.setItem("token",m.changeAvatar),console.log(n),await h("\n        mutation updateBoughtIcon($name: String!, $newAvatar: String!) {\n            updateBoughtIcon(name: $name, newAvatar: $newAvatar) {\n                message\n                success\n            }\n        }\n    ",{name:s.name,newAvatar:c}),await t.getUser(),t.getPopularProducts&&t.getPopularProducts(),t.getProducts&&t.getProducts(),t.setState({userAvatar:{background:'url("'.concat(c,'") center/cover no-repeat')},isRequestMaking:!1})}(e.target.files[0],a)}render(){const{hiddenUserDropdown:e,toggleUserDropdown:t,userDropdownShown:a,user:n,userAvatar:o,logout:i,hideChangedPasswordNotification:c,toggleModal:m}=this.props;return s.createElement("div",{className:"user-menu"},s.createElement("div",{onClick:function(){this.props.hiddenMenuDropdown&&this.props.hiddenMenuDropdown(),t()}.bind(this),style:{backgroundPosition:"center center",background:o.background,border:a?"2px solid #fff":"2px solid #1C1C24",opacity:Object.keys(o).length>0?1:0},className:"avatar"},s.createElement("span",{className:"first-char"},o.background&&o.background.includes("#")&&n.name.substring(0,2))),s.createElement("span",{className:"username",style:{opacity:Object.keys(n).length>0?1:0}},n.name?n.name:"имя"),s.createElement("img",{onClick:function(){this.props.hiddenMenuDropdown&&this.props.hiddenMenuDropdown(),t()}.bind(this),className:"menu-arrow",src:"/images/user-menu-arrow.png"}),s.createElement("div",{className:"dropdown",style:a?{maxHeight:"550px",transition:"350ms"}:{maxHeight:0,transition:"200ms"},onClick:()=>{e()}},s.createElement("button",null,s.createElement("div",{className:"item change-avatar"},"Установить новый аватар",s.createElement("input",{onChange:this.changeAvatar,type:"file",className:"choose-file"}))),s.createElement("button",{className:"show-modal-change-password",onClick:function(){e&&e(),c&&c(),m&&m()}.bind(this)},s.createElement("div",{className:"item"},"Сменить пароль")),""!=n.hwid&&s.createElement(r.OL,{onClick:e,to:"/dashboard/reset-binding"},s.createElement("div",{className:"item"},"Сбросить привязку")),n.status&&n.status.isAdmin&&s.createElement(r.OL,{onClick:e,to:"/admin/statistics"},s.createElement("div",{className:"item"},"Админ-панель")),s.createElement("div",{onClick:async()=>{const{path:e}=this.props.match;"/dashboard"==e&&"/admin"!=e&&(this.createLog(),l("info","Вы вышли из аккаунта")),i()},className:"item"},"Выйти")))}}const ue=(0,i.EN)(pe);class ge extends s.Component{constructor(){super(),this.state={user:{},navLinks:[{name:"Лобби",path:"/",isExact:!0,content:[{tag:"img",class:"icon",content:"self-closing tag",src:"/images/Home.svg"},{tag:"span",class:"",content:"Лобби"}]},{name:"Продукты",path:"products",isExact:!1,content:[{tag:"img",class:"icon",content:"self-closing tag",src:"/images/Category.svg"},{tag:"span",class:"",content:"Продукты"}]},{name:"Управление подписками",path:"subscriptions",isExact:!1,content:[{tag:"img",class:"icon",content:"self-closing tag",src:"/images/Path.svg"},{tag:"span",class:"",content:"Управление подписками"}]},{name:"FAQ",path:"FAQ",isExact:!1,content:[{tag:"img",class:"icon",content:"self-closing tag",src:"/images/Folder.svg"},{tag:"span",class:"",content:"FAQ"}]}],menuDropdownShown:!1,userDropdownShown:!1,deviceWidth:0,userAvatar:{},currentLink:"Лобби",currentPath:""},this.toggleMenuDropdown=this.toggleMenuDropdown.bind(this),this.hiddenMenuDropdown=this.hiddenMenuDropdown.bind(this),this.toggleUserDropdown=this.toggleUserDropdown.bind(this),this.hiddenUserDropdown=this.hiddenUserDropdown.bind(this),this.logout=this.logout.bind(this)}componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&(this.setState({userDropdownShown:!1,menuDropdownShown:!1}),this.props.hideModal())}.bind(this);const{userAvatar:e,user:t}=this.props;this.setState({user:t,deviceWidth:window.innerWidth,userAvatar:e})}toggleMenuDropdown(e){this.setState({menuDropdownShown:!this.state.menuDropdownShown})}hiddenMenuDropdown(){this.setState({menuDropdownShown:!1})}toggleUserDropdown(e){this.setState({userDropdownShown:!this.state.userDropdownShown})}hiddenUserDropdown(){this.setState({userDropdownShown:!1})}async logout(){localStorage.clear(),this.props.getUser(),this.props.history.push("/")}render(){const{navLinks:e,menuDropdownShown:t,deviceWidth:a,userDropdownShown:n}=this.state,{toggleModal:o,hideModal:i,user:c,userAvatar:l,style:m}=this.props,d=e.map((e=>s.createElement(r.OL,{key:e.path,to:"/"==e.path?"/dashboard":"/dashboard/".concat(e.path),exact:e.isExact,className:"link-item",onClick:function(){this.setState({userDropdownShown:!1,menuDropdownShown:!1})}.bind(this)},e.content.map(((e,t)=>"self-closing tag"!=e.content?s.createElement(e.tag,{key:e.content,className:e.class},e.content):s.createElement(e.tag,{src:e.src?e.src:"",key:t,className:e.class}))),s.createElement("div",{className:"border-bottom"}))));let h;return a&&(h=a>=700?s.createElement("div",{className:"links-wrap"},d):s.createElement("div",{className:"three-dots"},s.createElement("div",{className:"open-menu",onClick:function(e){this.hiddenUserDropdown(),this.toggleMenuDropdown(e)}.bind(this)},s.createElement("div",{className:"line-1 menu-line",style:t?{backgroundColor:"#1E75FF"}:{backgroundColor:"#92929D"}}),s.createElement("div",{className:"line-2 menu-line",style:t?{backgroundColor:"#1E75FF"}:{backgroundColor:"#92929D"}})),s.createElement("div",{style:t?{maxHeight:"550px",transition:"350ms"}:{maxHeight:0,transition:"200ms"},className:"menu-dropdown"},d))),s.createElement("nav",{className:"nav",style:m},s.createElement("div",{className:"container"},s.createElement(ue,{user:c,userDropdownShown:n,toggleUserDropdown:this.toggleUserDropdown,hiddenUserDropdown:this.hiddenUserDropdown,toggleMenuDropdown:this.toggleMenuDropdown,hiddenMenuDropdown:this.hiddenMenuDropdown,userAvatar:l,logout:this.logout,hideChangedPasswordNotification:this.props.hideChangedPasswordNotification,toggleModal:o,hideModal:i,setNewAvatar:this.props.setNewAvatar,_this:this.props._this}),s.createElement("ul",{className:"links"},h,s.createElement(r.rU,{onClick:function(e){this.hiddenMenuDropdown(),this.hiddenUserDropdown()}.bind(this),to:"/dashboard"},s.createElement("img",{className:"logo",src:"/images/zeer-logo.png"})))))}}const we=(0,i.EN)(ge);class Ee extends s.Component{constructor(){super(),this.state={rules:[{icon:"/images/entries-icon.png",content:s.createElement("span",{className:"content"},"Администрация в праве",s.createElement("br",null),"заблокировать Вашу подписку.")},{icon:"/images/lock-icon.png",content:s.createElement("span",{className:"content"},"Указывайте реальные причины",s.createElement("br",null),"сброса.")},{icon:"/images/pencil-icon.png",content:s.createElement("span",{className:"content"},"Убедитесь, что Вы не нарушаете",s.createElement("br",null),s.createElement("a",{className:"additional-link",href:"https://zeer-marketplace-ui-macsik121.herokuapp.com/terms.pdf"},"правила нашего сообщества"),".")}],isFormDisabled:!1,isErrorShown:!1,formError:"."},this.handleSubmit=this.handleSubmit.bind(this),this.handleFocus=this.handleFocus.bind(this),this.handleChange=this.handleChange.bind(this)}showError(e){this.setState({isErrorShown:!0,formError:e})}async handleSubmit(e){this.setState({isFormDisabled:!0}),e.preventDefault();const t=document.forms.newApplication,a=t.reason.value;if(0==a.length)return this.showError("Заполните это поле"),void this.setState({isFormDisabled:!1});await this.props.makeResetRequest(a),t.reason.value="",l("success","Вы успешно подали запрос на сброс привязки!"),this.setState({isFormDisabled:!1})}handleFocus(){this.setState({isErrorShown:!1})}handleChange(){this.setState({isErrorShown:!1})}render(){const{resetRequests:e,isRequestMaking:t}=this.props,{isFormDisabled:a,formError:n,isErrorShown:r}=this.state,o=e.map(((e,t)=>{if(t<30)return s.createElement("div",{key:e.number,className:"reset"},s.createElement("div",{className:"number"},e.number),s.createElement("div",{className:"reason-of-reset"},e.reason),s.createElement("div",{className:"date"},new Date(e.date).toLocaleDateString()),s.createElement("div",{className:"status"},s.createElement("img",{src:"/images/".concat(e.status,"-status.png")})))})),i=this.state.rules.map((e=>s.createElement("div",{key:e.icon,className:"rule"},s.createElement("div",{className:"icon"},s.createElement("img",{src:e.icon})),e.content)));return s.createElement("div",{className:"reset-binding"},s.createElement("div",{className:"container"},s.createElement("div",{className:"reset-binding-form"},s.createElement("h2",{className:"reset-title"},"Сброс привязки"),s.createElement("form",{onSubmit:this.handleSubmit,name:"newApplication",className:"new-application"},s.createElement("fieldset",{disabled:a},s.createElement("h3",null,"Новая заявка"),s.createElement("span",{className:"last-reset"},e[0]?"Последний сброс ".concat(new Date(e[0].date).toLocaleDateString()):"У вас нету сбросов"),s.createElement("label",{className:"error",style:{opacity:r?1:0}},n),s.createElement("div",{className:"field-wrap"},s.createElement("textarea",{required:!0,name:"reason",placeholder:"Причина сброса",name:"reason",className:"reset-reason",onFocus:this.handleFocus,onKeyDown:function(e){13==e.keyCode&&this.handleSubmit(e)}.bind(this),onChange:this.handleChange})),s.createElement("button",{type:"submit",className:"send"},"Отправить"))),s.createElement("div",{className:"rules"},i)),s.createElement("div",{className:"history"},s.createElement("h2",{className:"history-title"},"Последние 30 сбросов"),s.createElement(I.Z,{style:{display:t?"block":"none"},className:"progress-bar"}),s.createElement("div",{className:"last-thirty-resets",style:{opacity:t?0:1}},s.createElement("div",{className:"heading"},s.createElement("span",{className:"number"},"№"),s.createElement("span",{className:"reason-of-reset"},"Причина сброса"),s.createElement("span",{className:"date"},"дата"),s.createElement("span",{className:"status"},"статус")),s.createElement("div",{className:"resets"},o)))))}}class ve extends s.Component{constructor(){super(),this.state={user:{},subscriptions:{all:[],active:[],overdue:[]},showingChangePassword:!1,popularProducts:[],userAvatar:{},deviceWidth:0,products:[],answersFAQ:[],passwordChangedNotification:"",passwordChangedNotificationShown:!1,agreementShown:!1,resetRequests:[],popularProductsRequestMaking:!1,productsRequestMaking:!0,answersFAQRequestMaking:!0,subscriptionsRequestMaking:!0,resetBindingRequestsRequestMaking:!0,isMounted:!1,chooseDaysAmountShown:!1,productToBuy:{},isRequestMaking:!1},this.showModal=this.showModal.bind(this),this.hideModal=this.hideModal.bind(this),this.toggleModal=this.toggleModal.bind(this),this.setNotificationMessage=this.setNotificationMessage.bind(this),this.getSubscriptions=this.getSubscriptions.bind(this),this.getPopularProducts=this.getPopularProducts.bind(this),this.getProducts=this.getProducts.bind(this),this.buyProduct=this.buyProduct.bind(this),this.hideAgreement=this.hideAgreement.bind(this),this.toggleAgreement=this.toggleAgreement.bind(this),this.getResetRequests=this.getResetRequests.bind(this),this.makeResetRequest=this.makeResetRequest.bind(this),this.getUser=this.getUser.bind(this),this.showChoosingDays=this.showChoosingDays.bind(this),this.hideChoosingDays=this.hideChoosingDays.bind(this),this.toggleRequestMaking=this.toggleRequestMaking.bind(this)}componentDidUpdate(e,t){if(JSON.stringify(t.user)!=JSON.stringify(this.state.user)){const{user:e}=this.state,t={};e.avatar&&e.avatar.includes("#")?(t.background=e.avatar,e.nameFirstChar=e.name.substring(0,2)):(t.background='url("'.concat(e.avatar,'") center/cover no-repeat'),e.nameFirstChar=""),this.setState({userAvatar:t})}}async componentDidMount(){this.props.getUser(),this.setState({isMounted:!0});const{history:e}=this.props;this.setState({deviceWidth:window.innerWidth}),window.onkeydown=function(e){27==e.keyCode&&(this.hideChoosingDays(),this.hideModal(),this.hideAgreement(),this.hideModal(),this.hideAgreement())}.bind(this);const t=localStorage.getItem("token");if(!t||""==t)return void this.props.history.push("/");let a=t&&""!=t?(0,o.Z)(t):{name:""};await this.getUser(a.name),a=this.state.user,this.getProducts(),await this.getPopularProducts();const s={};a.avatar&&a.avatar.includes("#")?(s.background=a.avatar,a.nameFirstChar=a.name.substring(0,2)):(s.background='url("'.concat(a.avatar,'") center/cover no-repeat'),a.nameFirstChar=""),this.setState({userAvatar:s,user:a});if("jwt expired"==(await h("\n            query verifyToken($token: String!) {\n                verifyToken(token: $token)\n            }\n        ",{token:t})).verifyToken)return localStorage.clear(),void e.push("/");this.getSubscriptions(),this.getResetRequests(),this.setState({answersFAQRequestMaking:!0});const n=await h("\n            query {\n                getAnswers {\n                    sort\n                    answers {\n                        title\n                        answer\n                        rateCount\n                        usefulRate\n                    }\n                }\n            }\n        ");this.setState({answersFAQ:n.getAnswers,answersFAQRequestMaking:!1})}componentWillUnmount(){this.setState({isMounted:!1})}async getUser(e){const t=(0,o.Z)(localStorage.getItem("token")),a=await h("\n            query user($name: String!) {\n                user(name: $name) {\n                    email\n                    name\n                    status {\n                        isAdmin\n                        isBanned\n                        simpleUser\n                    }\n                    avatar\n                    hwid\n                }\n            }\n        ",{name:e&&""!=e?e:t.name});if(""==a.user.name)return localStorage.clear(),await this.props.getUser(),void this.props.history.push("/");this.setState({user:a.user})}async buyProduct(e){let{title:t="",cost:a=1,days:s=30,promoName:n="null"}=e;const r=(0,o.Z)(localStorage.getItem("token"));let i=navigator.userAgent.replaceAll("/","-");const{ip:c,city:l}=await f();""==n&&(n="null");const m={title:encodeURIComponent(t),name:encodeURIComponent(r.name),navigator:{userAgent:i,platform:encodeURIComponent(navigator.platform),appName:navigator.appName,appVersion:navigator.appVersion},locationData:{ip:c,location:l},productCost:a},{paymentNumber:d}=await h("\n            query { paymentNumber }\n        ");console.log(d);const p="https://paymaster.ru/payment/init?LMI_MERCHANT_ID=".concat("77aa76b8-1551-42c5-be5f-f49d6330260f","&LMI_PAYMENT_NO=").concat(d+1,"&LMI_PAYMENT_AMOUNT=").concat(a,"&LMI_CURRENCY=RUB&LMI_PAYMENT_DESC=Оплата%20товара%20").concat(m.title,"%20на%20").concat(360==s?"1 год":s,"%20").concat(360==s?"":1==s?"день":"дней","&__USER_AGENT__=").concat(m.navigator.userAgent,"&__LOCATION__=").concat(m.locationData.location,"&__PRODUCT_TITLE__=").concat(m.title,"&__USERNAME__=").concat(m.name,"&__PRODUCT_COST__=").concat(m.productCost,"&__DAYS__=").concat(s,"&LMI_SHOPPINGCART.ITEMS[0].NAME=").concat(m.title,"&LMI_SHOPPINGCART.ITEMS[0].QTY=1&LMI_SHOPPINGCART.ITEMS[0].PRICE=").concat(m.productCost,".&LMI_SHOPPINGCART.ITEMS[0].TAX=no_vat");window.location.href=p}async getProducts(){this.setState({productsRequestMaking:!0});const e=await h("\n            query {\n                products {\n                    title\n                    costPerDay\n                    id\n                    productFor\n                    imageURLdashboard\n                    workingTime\n                    description\n                    currentDate\n                    peopleBought {\n                        name\n                        avatar\n                    }\n                    characteristics {\n                        version\n                        osSupport\n                        cpuSupport\n                        gameMode\n                        developer\n                        supportedAntiCheats\n                    }\n                    status\n                    cost {\n                        perDay\n                        perMonth\n                        perYear\n                    }\n                    allCost {\n                        cost\n                        costPer\n                        menuText\n                        days\n                    }\n                }\n            }\n        ");this.setState({products:e.products,productsRequestMaking:!1})}async getPopularProducts(){this.setState({popularProductsRequestMaking:!0});let e=await w();const t=e.slice();e=[];for(let a=0;a<t.length;a++){const s=t[a];if(!(a<3))break;e.push(s)}this.setState({popularProducts:e,popularProductsRequestMaking:!1})}async getSubscriptions(){this.setState({subscriptionsRequestMaking:!0});let e={};if(localStorage.getItem("token")&&""!=localStorage.getItem("token")){e=(0,o.Z)(localStorage.getItem("token"));const t=await h("\n                query getSubscriptions($name: String!) {\n                    getSubscriptions(name: $name) {\n                        all {\n                            status {\n                                isExpired\n                                isActive\n                                isFreezed\n                            }\n                            activelyUntil\n                            title\n                            imageURL\n                            productFor\n                            wasFreezed\n                            freezeTime\n                        }\n                        active {\n                            status {\n                                isExpired\n                                isActive\n                                isFreezed\n                            }\n                            activelyUntil\n                            title\n                            imageURL\n                            productFor\n                            wasFreezed\n                            freezeTime\n                        }\n                        overdue {\n                            status {\n                                isExpired\n                                isActive\n                                isFreezed\n                            }\n                            activelyUntil\n                            title\n                            imageURL\n                            productFor\n                            wasFreezed\n                            freezeTime\n                        }\n                    }\n                }\n            ",{name:e.name});this.setState({subscriptions:t.getSubscriptions,subscriptionsRequestMaking:!1})}}async makeResetRequest(e){const{ip:t,city:a}=await f(),s=(0,o.Z)(localStorage.getItem("token")),{name:n}=s,r={name:n,reason:e,navigator:{userAgent:navigator.userAgent,platform:navigator.platform,appName:navigator.appName,appVersion:navigator.appVersion},locationData:{ip:t,location:a}},i=await h("\n            mutation makeResetRequest(\n                $name: String!,\n                $reason: String!,\n                $navigator: NavigatorInput,\n                $locationData: LocationInput\n            ) {\n                makeResetRequest(\n                    name: $name,\n                    reason: $reason,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    reason\n                    number\n                    status\n                    date\n                }\n            }\n        ",r);return await this.getResetRequests(),i.makeResetRequest}async getResetRequests(){let e;if(this.setState({resetBindingRequestsRequestMaking:!0}),!localStorage.getItem("token"))return;e=(0,o.Z)(localStorage.getItem("token"));const t=await h("\n            query getResetRequests($name: String!) {\n                getResetRequests(name: $name) {\n                    date\n                    status\n                    reason\n                    number\n                }\n            }\n        ",{name:e.name});return this.setState({resetRequests:t.getResetRequests,resetBindingRequestsRequestMaking:!1}),t.getResetRequests}toggleModal(){this.setState({showingChangePassword:!this.state.showingChangePassword})}showModal(){this.setState({showingChangePassword:!0})}hideModal(){this.setState({showingChangePassword:!1})}setNotificationMessage(e){this.setState({passwordChangedNotification:e,passwordChangedNotificationShown:!0})}toggleAgreement(){this.setState({agreementShown:!this.state.agreementShown})}showAgreement(){this.setState({agreementShown:!0})}hideAgreement(){this.setState({agreementShown:!1})}showChoosingDays(e){this.setState({chooseDaysAmountShown:!0,productToBuy:e})}hideChoosingDays(){this.setState({chooseDaysAmountShown:!1})}toggleRequestMaking(){this.setState({isRequestMaking:!this.state.isRequestMaking})}render(){const{showingChangePassword:e,deviceWidth:t,agreementShown:a,answersFAQ:n,user:r,userAvatar:o,subscriptions:c,popularProducts:l,products:m,resetRequests:d,productsRequestMaking:h,popularProductsRequestMaking:p,answersFAQRequestMaking:u,subscriptionsRequestMaking:g,resetBindingRequestsRequestMaking:w,isMounted:E,chooseDaysAmountShown:v,productToBuy:y,isRequestMaking:b}=this.state;return s.createElement("div",{className:"dashboard",style:e||a||b?{overflow:"hidden",height:"100vh"}:{overflow:"inherit",height:"auto"}},s.createElement("div",{style:{opacity:E?1:0}},s.createElement("header",{style:e||a?{opacity:".5",transition:"500ms",pointerEvents:"none",userSelect:"none"}:{opactiy:1,transition:"500ms",pointerEvents:"all",userSelect:"text"},className:"header"},s.createElement(we,{user:r,history:this.props.history,match:this.props.match,selectedImage:this.props.selectedImage,toggleModal:this.toggleModal,showingChangePassword:e,userAvatar:o,getUser:this.props.getUser,_this:this,style:v||b?{opacity:".5",pointerEvents:"none",userSelect:"none"}:{opactiy:1,pointerEvents:"all",userSelect:"text",opacity:E?1:0}})),s.createElement(I.Z,{className:"progress-bar",style:{display:b?"block":"none"}}),s.createElement(de,{style:e?{opacity:1,transform:"translateY(0)",margin:"auto",pointerEvents:"all"}:{opacity:0,transform:"translateY(-170%)",margin:"17vh auto 0",pointerEvents:"none"},modalShown:e,hideModal:this.hideModal}),s.createElement(U,{style:a?{transform:"translateY(0)",opacity:1,pointerEvents:"all"}:{transform:"translateY(-170%)",opacity:0,pointerEvents:"none"},hideAgreement:this.hideAgreement}),s.createElement(W,{style:{opacity:v?1:0,pointerEvents:v?"all":"none"},hideModal:this.hideChoosingDays,buyProduct:this.buyProduct,product:y}),s.createElement("main",{style:e||a||v||b?{opacity:".5",pointerEvents:"none",userSelect:"none"}:{opactiy:1,pointerEvents:"all",userSelect:"text",opacity:E?1:0},className:"main"},s.createElement(i.rs,null,s.createElement(i.AW,{exact:!0,path:"/dashboard/products",render:()=>s.createElement(z,{products:m,getSubscriptions:this.getSubscriptions,buyProduct:this.buyProduct,isRequestMaking:h,showChoosingDays:this.showChoosingDays,chooseDaysAmountShown:v})}),s.createElement(i.AW,{path:"/dashboard/FAQ",render:()=>s.createElement(te,{answers:n,isRequestMaking:u})}),s.createElement(i.AW,{path:"/dashboard/products/:title",render:()=>s.createElement(ce,{popularProducts:l,getPopularProducts:this.getPopularProducts,buyProduct:this.buyProduct,showChoosingDays:this.showChoosingDays,chooseDaysAmountShown:v})}),s.createElement(i.AW,{path:"/dashboard/subscriptions",exact:!0,render:()=>s.createElement(Q,{subscriptions:c,products:m,toggleAgreement:this.toggleAgreement,hideAgreement:this.hideAgreement,agreementShown:a,getSubscriptions:this.getSubscriptions,user:r,buyProduct:this.buyProduct,isRequestMaking:g,showChoosingDays:this.showChoosingDays,chooseDaysShown:v})}),s.createElement(i.AW,{path:"/dashboard/reset-binding",render:()=>s.createElement(Ee,{resetRequests:d,makeResetRequest:this.makeResetRequest,isRequestMaking:w})}),s.createElement(i.AW,{exact:!0,path:"/dashboard",render:()=>s.createElement(_,{user:r,userAvatar:o,subscriptions:c,popularProducts:l,getPopularProducts:this.getPopularProducts,deviceWidth:t,buyProduct:this.buyProduct,isRequestMaking:p,updateMount:this.updateMount,showChoosingDays:this.showChoosingDays})}))),s.createElement(he,{style:e||a||v||b?{opacity:".5",transition:"500ms",pointerEvents:"none",userSelect:"none"}:{opactiy:1,transition:"500ms",pointerEvents:"all",userSelect:"text"}})))}}const ye=(0,i.EN)(ve);class be extends s.Component{constructor(){super(),this.state={scaleY:"scaleY(0)"}}componentDidUpdate(){const{array:e}=this.props,{scaleY:t}=this.state;e.length>0&&"scaleY(0)"==t&&this.setState({scaleY:"scaleY(1)"})}render(){const{className:e,style:t,array:a,graphColor:n,isRequestMaking:r,graphTheme:o}=this.props,{scaleY:i}=this.state,c=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],l=["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сент","Окт","Ноябрь","Дек"],m=a.map(((e,t)=>{let a;return e.date?a=new Date(e.date):(a=new Date,a.setDate((new Date).getDate()-(new Date).getDay()+t)),s.createElement("div",{key:new Date-a||t,className:"day"},l[a.getMonth()],". ",c[a.getDay()],", ",a.getDate())})),d=[1];a&&a.map((e=>{d.push(e.value)}));let h=Math.max(...d);h=100*Math.ceil(h/100);let p=h/2;const u=a.map(((e,t)=>s.createElement("div",{key:t,className:"graph-item"},s.createElement("div",{className:"graph-value",id:"graph-value"+(t+1).toString()+o,style:{bottom:e.value||0==e.value?e.value/h*100+2+"%":"2px"}},e.value),s.createElement("div",{className:"graph-column",id:"graph-column",style:{backgroundColor:n,transform:i,height:"".concat(e.value||0==e.value?e.value/h*100+"%":"2px"),opacity:e.value||0==e.value?1:0,pointerEvents:e.value||0==e.value?"all":"none"},onClick:()=>{document.getElementById("graph-value"+(t+1).toString()+o).classList.toggle("active")}}))));return s.createElement("div",{className:"graph ".concat(e),style:t},s.createElement("div",{className:"graph-theme"},s.createElement("div",{className:"graph-color",style:{backgroundColor:n}})," - ",s.createElement("div",{className:"label"},o)),s.createElement("div",{className:"graph-wrap"},s.createElement("div",{className:"left-indicators"},s.createElement("div",{className:"left-indicators-wrap"},s.createElement("div",{className:"the-biggest indicator"},h),s.createElement("div",{className:"middle indicator"},p),s.createElement("div",{className:"zero indicator"},"0"))),s.createElement("div",{className:"column-statistics"},u)),s.createElement("div",{className:"bottom-indicators"},m))}}class Ne extends s.Component{constructor(){super(),this.state={statisticTabs:[{title:"Всего пользователей",value:0},{title:"Активные подписки",value:0},{title:"Баны",value:0},{title:"Заработано за сегодня",value:0}],isRequestMaking:!0,purchases:[],profit:[]}}async componentDidMount(){this.setState({isRequestMaking:!0});let e=this.state.statisticTabs,t=await h("\n            query {\n                getUsers {\n                    name\n                    subscriptions {\n                        title\n                    }\n                    status {\n                        isBanned\n                    }\n                }\n            }\n        ");t=t.getUsers;let a=await h("\n            query {\n                products {\n                    timeBought\n                }\n            }\n        ");a=a.products;const s=new Date,n=((new Date).getFullYear(),(new Date).getMonth(),(new Date).getDay());s.setDate(s.getDate()-n);const r=new Date(new Date(s).toISOString().substr(0,10)),o=new Date(r);o.setDate(r.getDate()+7);const i={week:{from:r,to:o}};let c=await h("\n            query purchases($week: WeekInput) {\n                purchases(week: $week) {\n                    date\n                    boughtTime\n                }\n            }\n        ",i),l=await h("\n            query profit($week: WeekInput!) {\n                profit(week: $week) {\n                    date\n                    cost\n                }\n            }\n        ",i);c=c.purchases,l=l.profit;const m=[],d=[];c.map((e=>{e.value=e.boughtTime,delete e.boughtTime,m.push(e)})),c=m,l.map((e=>{e.value=e.cost,delete e.cost,d.push(e)}));let p=0;t.map((e=>{p+=e.subscriptions.length}));const u=l[(new Date).getDay()].value||0;let g=0;t.map((e=>{e.status.isBanned&&g++})),e.map((e=>{let{title:a}=e;"Всего пользователей"==a?e.value=t.length:"Активные подписки"==a?e.value=p:"Заработано за сегодня"==a?e.value=u:"Баны"==a&&(e.value=g)})),this.setState({isRequestMaking:!1,statisticTabs:e,purchases:c,profit:l})}render(){const{isRequestMaking:e,statisticTabs:t,purchases:a,profit:n}=this.state,r=t.map((e=>"Заработано за сегодня"==e.title?s.createElement("div",{key:e.title,className:"tab"},s.createElement("h3",{className:"stat-title"},e.title),s.createElement("span",{className:"stat-value"},e.value,s.createElement("span",{style:{fontSize:"24px",color:"#515151"}},"₽"))):s.createElement("div",{key:e.title,className:"tab"},s.createElement("h3",{className:"stat-title"},e.title),s.createElement("span",{className:"stat-value"},e.value))));return s.createElement("div",{className:"statistics"},s.createElement("h2",null,"Общая статистика"),s.createElement(I.Z,{className:"progress-bar",style:{display:e?"block":"none"}}),s.createElement("div",{className:"statistics-wrap",style:{opacity:e?0:1}},s.createElement("div",{className:"tabs"},r),s.createElement("div",{className:"graphs"},s.createElement(be,{className:"earned-today",array:a,graphColor:"rgb(0, 153, 51)",isRequestMaking:e,graphTheme:"Совершено покупок за сегодня"}),s.createElement(be,{className:"profit",array:n,graphColor:"#0047b3",isRequestMaking:e,graphTheme:"Заработано за сегодня"}))))}}class Se extends s.Component{constructor(){super(),this.state={array:[],path:"",page:0,chooseAdditionalPagesShown:!1,limitPage:0,hiddenPageLinks:[],pages:[],searchValue:"",itemsOnPage:15},this.handleSearchPages=this.handleSearchPages.bind(this),this.toggleChooseAdditionalPages=this.toggleChooseAdditionalPages.bind(this),this.hideChooseAdditionalPages=this.hideChooseAdditionalPages.bind(this)}componentDidUpdate(e){let{path:t,page:a}=this.props;const s=this.props.array?this.props.array:[],n=this.props.itemsOnPage?this.props.itemsOnPage:15;a=+a,e.array!=s&&this.setState({array:s,path:t,page:a,itemsOnPage:n})}componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.hideChooseAdditionalPages()}.bind(this)}handleSearchPages(e){this.setState({searchValue:e.target.value.trim()})}toggleChooseAdditionalPages(){document.getElementById("search-pages").focus(),this.setState({chooseAdditionalPagesShown:!this.state.chooseAdditionalPagesShown})}hideChooseAdditionalPages(){document.getElementById("search-pages").blur(),this.setState({chooseAdditionalPagesShown:!1})}render(){let{path:e,page:t,chooseAdditionalPagesShown:a,array:n,searchValue:o,itemsOnPage:i}=this.state;t=+t;const c=[];let l=0;const m=[];n.map(((t,a)=>{const n=s.createElement(r.OL,{className:"remained-page",to:"/admin/".concat(e,"/").concat(a/i+1),key:a/i+1,onClick:this.hideChooseAdditionalPages},a/i+1);if(a%i==0){((a/i+1).toString().includes(o)||""==o)&&m.push(n),l=a}})),l=l/i+1;let d=n.length/i;d=Math.ceil(d),d>4&&c.push(s.createElement("button",{className:"page-link more-pages",key:"chooseAdditionalPagesButton"},s.createElement("div",{className:"three-dots-wrap",onClick:this.toggleChooseAdditionalPages},"..."),s.createElement("div",{className:"additional-pages-dropdown",style:{pointerEvents:a?"all":"none",opacity:a?1:0}},s.createElement("div",{className:"search-wrap"},s.createElement("input",{type:"text",onChange:this.handleSearchPages,className:"search-pages",id:"search-pages",onKeyDown:e=>{27==e.keyCode&&this.hideChooseAdditionalPages()}})),s.createElement("div",{className:"additional-pages"},m))));const h=[s.createElement(r.rU,{className:"page-link ".concat(t<=2?"disabled":""),to:"/admin/".concat(e,"/").concat(t-2),key:"backTwoTimes"},s.createElement("img",{className:"back switch-page",src:"/images/categories-arrow-menu.png"}),s.createElement("img",{className:"back switch-page",src:"/images/categories-arrow-menu.png"})),s.createElement(r.rU,{className:"page-link ".concat(t<=1?"disabled":""),to:"/admin/".concat(e,"/").concat(t-1),key:"backOneTime"},s.createElement("img",{className:"back switch-page",src:"/images/categories-arrow-menu.png"})),s.createElement(r.OL,{to:"/admin/".concat(e,"/").concat(t<=3?1:t>=l-1?l-3:t-2),className:"page-link",key:"page - 2"},t<=3?1:t>=l-1?l-3:t-2)];return d>=2&&h.push(s.createElement(r.OL,{to:"/admin/".concat(e,"/").concat(t<=3?2:t>=l-1?l-2:t-1),className:"page-link",key:"page - 1"},t<=3?2:t>=l-1?l-2:t-1)),n.length>0&&c.unshift(h),d>=4?c.push(s.createElement(r.OL,{to:"/admin/".concat(e,"/").concat(t<3?3:t+1<l?t+1:l-1),className:"page-link",key:"page + 1"},t<3?3:t+1<l?t+1:l-1),s.createElement(r.OL,{to:"/admin/".concat(e,"/").concat(t<3?4:t+2<l?t+2:l),className:"page-link",key:"page + 2"},t<3?4:t+2>l?l:t+2)):d>=3&&c.push(s.createElement(r.OL,{to:"/admin/".concat(e,"/").concat(t<=3?3:t+1<l?t+1:l-1),className:"page-link",key:"page + 1"},t<=3?3:t+1<l?t+1:l-1)),n.length>0&&c.push(s.createElement(r.rU,{className:"page-link ".concat(t+1>l?"disabled":""),to:"/admin/".concat(e,"/").concat(t+1),key:"skipTwoTimes"},s.createElement("img",{className:"skip switch-page",src:"/images/categories-arrow-menu.png"})),s.createElement(r.rU,{className:"page-link ".concat(t+2>l?"disabled":""),to:"/admin/".concat(e,"/").concat(t+2),key:"skipOneTime"},s.createElement("img",{className:"skip switch-page",src:"/images/categories-arrow-menu.png"}),s.createElement("img",{className:"skip switch-page",src:"/images/categories-arrow-menu.png"}))),s.createElement("div",{className:"pages"},c)}}function fe(e){const{user:t,agreedToDeleteShown:a,hideModal:n,deleteUser:r}=e;return s.createElement("div",{className:"confirm",style:{opacity:a?1:0,top:a?0:"-310px"}},s.createElement("div",{className:"heading"},s.createElement("h3",null,"Подтвердите действие"),s.createElement(b.Z,{className:"close-icon",onClick:n})),s.createElement("div",{className:"warning"},"Вы действительно хотите удалить пользователя с именем ",t.name,"?"),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button agree",onClick:async()=>{await r(t.name),n()}},"Да"),s.createElement("button",{className:"button refuse",onClick:n},"Нет")))}class Ce extends s.Component{constructor(){super(),this.state={users:[{subscriptions:[{status:{isActive:!1}}]}],usersCopy:[],user:{subscriptions:[]},userToDelete:{},areUsersLoaded:!1,isRequestMaking:!1,searchOnlyRoles:!1,agreedToDeleteShown:!1,currentPage:1},this.toggleSearchOnlyRoles=this.toggleSearchOnlyRoles.bind(this),this.searchUsers=this.searchUsers.bind(this),this.deleteUser=this.deleteUser.bind(this),this.hideConfirmDeleteUser=this.hideConfirmDeleteUser.bind(this),this.handleSearchBarClick=this.handleSearchBarClick.bind(this)}componentDidUpdate(){const{number:e}=this.props.match.params;this.state.currentPage!=e&&this.setState({currentPage:e})}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.setState({agreedToDeleteShown:!1})}.bind(this),await this.getUsers()}async getUsers(){this.setState({areUsersLoaded:!1});const e=await h("\n            query {\n                getUsers {\n                    email\n                    name\n                    id\n                    status {\n                        isAdmin\n                        isBanned\n                        simpleUser\n                    }\n                    registeredDate\n                    subscriptions {\n                        title\n                        status {\n                            isActive\n                        }\n                    }\n                }\n            }\n        ");this.setState({users:e.getUsers,areUsersLoaded:!0}),this.setState({usersCopy:this.state.users.slice()})}async deleteUser(e){this.setState({isRequestMaking:!0});const t=(0,o.Z)(localStorage.getItem("token")),{userAgent:a,platform:s,appName:n,appVersion:r}=navigator,i=await f(),{ip:c,city:m}=i,d={name:e,navigator:{userAgent:a,platform:s,appName:n,appVersion:r},locationData:{ip:c,location:m},adminName:t.name};await h("\n            mutation deleteUser(\n                $name: String!,\n                $navigator: NavigatorInput!,\n                $adminName: String!\n            ) {\n                deleteUser(\n                    name: $name,\n                    navigator: $navigator,\n                    adminName: $adminName\n                )\n            }\n        ",d),await this.getUsers(),l("success","Вы успешно удалили пользователя ".concat(e)),this.setState({isRequestMaking:!1})}toggleSearchOnlyRoles(){this.setState({searchOnlyRoles:!this.state.searchOnlyRoles})}hideConfirmDeleteUser(){this.setState({agreedToDeleteShown:!1})}toggleBand(e){e.target.classList.toggle("active")}toggleParentElement(e){e.target.parentNode.classList.toggle("active")}searchUsers(e){let t=e.target.value;t=t.toLowerCase().trim(),this.props.history.push("/admin/users/1");const a=[];this.state.usersCopy.map((e=>{if(this.state.searchOnlyRoles)(e.status.isAdmin&&t.includes("админ")||e.status.simpleUser&&t.includes("обычный пользователь")||e.status.isBanned&&t.includes("забаненный"))&&a.push(e);else{if(e.id.toString().includes(t))return void a.push(e);if(e.name.toLowerCase().includes(t))return void a.push(e);if(e.email.toLowerCase().includes(t))return void a.push(e)}})),""==t?this.setState({users:this.state.usersCopy}):0==a.length?this.setState({users:[]}):this.setState({users:a})}handleSearchBarClick(){this.setState({searchOnlyRoles:!this.state.searchOnlyRoles})}render(){const{areUsersLoaded:e,isRequestMaking:t,userToDelete:a,agreedToDeleteShown:n}=this.state,{page:o}=this.props.match.params,i=this.state.users.length>0&&this.state.users.map(((e,t)=>{const a=15*o;if(t<a&&t>=a-15){let t=!1;for(let a=0;a<e.subscriptions.length;a++)if(e.subscriptions[a].status&&e.subscriptions[a].status.isActive){t=!0;break}return s.createElement("div",{onClick:this.toggleBand,key:e.email,className:"user"},s.createElement("span",{className:"ID user-info",onClick:this.toggleParentElement},e.id),s.createElement("span",{className:"login user-info",onClick:this.toggleParentElement},e.name),s.createElement("span",{className:"e-mail user-info",onClick:this.toggleParentElement},e.email),s.createElement("span",{className:"registered-date user-info",onClick:this.toggleParentElement},new Date(e.registeredDate).toLocaleDateString()),s.createElement("span",{className:"subscription user-info",style:t?{backgroundColor:"#04BE00"}:{backgroundColor:"#DD4D4D78"},onClick:e=>e.stopPropagation()},t?"Активна":"Неактивна"),s.createElement("div",{className:"actions user-info",onClick:e=>e.stopPropagation()},s.createElement(r.rU,{to:"/admin/users/edit-user/".concat(e.name),className:"button edit"},"Изменить"),s.createElement("button",{type:"button",className:"button delete",onClick:()=>{this.setState({userToDelete:e,agreedToDeleteShown:!0})}},"x")))}}));return s.createElement("div",{className:"users",style:{pointerEvents:t?"none":"all"}},s.createElement(fe,{user:a,agreedToDeleteShown:n,hideModal:this.hideConfirmDeleteUser,deleteUser:this.deleteUser}),s.createElement("div",{className:"search-bar",style:{opacity:n?.5:1,pointerEvents:n?"none":"all"}},s.createElement("div",{className:"search-bar-wrap"},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchUsers})),s.createElement("div",{className:"checkbox-wrap"},s.createElement("div",{className:"checkbox"},s.createElement("input",{onChange:this.toggleSearchOnlyRoles,type:"checkbox",checked:this.state.searchOnlyRoles}),s.createElement("div",{className:"checkbox-bg",onClick:this.toggleSearchOnlyRoles})),s.createElement("span",null,"Только по ролям"))),s.createElement("div",{className:"info-notif",onClick:()=>{l("info",'Чтобы искать пользователей по ролям вам нужно активировать "Только по ролям" и: 1. Чтобы найти всех админов вписать: админ; 2. Найти всех забаненныx пользователей вписать: забаненный; 3. Найти всех обычныx пользователей вписать: Обычный пользователь')}},"i")),s.createElement("h2",null,"Пользователи"),s.createElement("div",{className:"users-list",style:{pointerEvents:n?"none":"all",userSelect:n?"none":"text",opacity:n?.5:1}},s.createElement("header",{className:"heading"},s.createElement("div",{className:"ID head-item"},"ID"),s.createElement("div",{className:"login head-item"},"Логин"),s.createElement("div",{className:"e-mail head-item"},"Почта"),s.createElement("div",{className:"registration-date head-item"},"Регистрация"),s.createElement("div",{className:"subscription head-item"},"Подписка"),s.createElement("div",{className:"action head-item"},"Действие")),s.createElement("div",{className:"all-users"},s.createElement(I.Z,{className:"progress-bar",style:e?{display:"none"}:{display:"block"}}),s.createElement("div",{className:"users-wrap",style:e?{opacity:1}:{opacity:0}},i),s.createElement(Se,{page:o,array:i,path:"users"}))))}}const ke=(0,i.EN)(Ce);var Pe=a(1843),De=a(1197);function Me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getFullYear(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(new Date).getMonth();return t++,[...new Array(new Date(e,t,0).getDate()).keys()]}class Ae extends s.Component{constructor(){super(),this.state={months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],daysOfWeek:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],currentDay:(new Date).getDate(),currentMonth:(new Date).getMonth(),currentYear:(new Date).getFullYear(),currentDate:new Date,daysOfCurrentMonth:Me(),activeMonth:(new Date).getMonth(),activeYear:(new Date).getFullYear(),activeDay:(new Date).getDate(),activeDate:new Date,chooseYearShown:!1,chooseDateShown:!0,currentDayOfWeek:(new Date).getDay()},this.switchNextMonth=this.switchNextMonth.bind(this),this.switchPrevMonth=this.switchPrevMonth.bind(this),this.showChooseYear=this.showChooseYear.bind(this),this.hideChooseYear=this.hideChooseYear.bind(this),this.toggleChooseYear=this.toggleChooseYear.bind(this),this.showChooseDate=this.showChooseDate.bind(this),this.chooseYear=this.chooseYear.bind(this),this.chooseDay=this.chooseDay.bind(this)}componentDidUpdate(){this.state.chooseYearShown||this.state.chooseDateShown||this.setState({chooseDateShown:!0})}componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.props.hideCalendar()}.bind(this)}switchNextMonth(){let{currentMonth:e,currentYear:t,currentDay:a}=this.state;e++;let s=new Date("".concat(t,"-").concat(this.state.currentMonth,"-").concat(a));e<12?this.setState({currentMonth:e,currentDate:s,daysOfCurrentMonth:Me(t,e)}):(s=new Date("".concat(t,"-01-01")),this.setState({currentMonth:0,currentYear:t+1,currentDate:s,daysOfCurrentMonth:Me(t,1),activeYear:t+1}))}switchPrevMonth(){let{currentMonth:e,currentYear:t,currentDay:a}=this.state;e--,e<0?this.setState({currentMonth:11,currentYear:--t,daysOfCurrentMonth:Me(--t,11)}):this.setState({currentMonth:e,daysOfCurrentMonth:Me(t,e)})}showChooseYear(){this.setState({chooseYearShown:!0})}hideChooseYear(){this.setState({chooseYearShown:!1})}toggleChooseYear(){this.setState({chooseYearShown:!this.state.chooseYearShown,chooseDateShown:!this.state.chooseDateShown})}showChooseDate(){this.setState({chooseYearShown:!1,chooseDateShown:!0})}chooseYear(e){this.setState({currentYear:+e.target.textContent,activeYear:+e.target.textContent}),this.toggleChooseYear()}chooseDay(e){let{currentYear:t,currentMonth:a}=this.state;const s="".concat(t,"-").concat(a+1,"-").concat(e.target.textContent);this.setState({currentDay:e.target.textContent,activeDay:e.target.textContent,currentMonth:new Date(s).getMonth(),activeMonth:new Date(s).getMonth(),currentDayOfWeek:new Date(s).getDay()})}render(){let{currentMonth:e,months:t,currentYear:a,currentDay:n,daysOfWeek:r,activeMonth:o,activeYear:i,activeDay:c,chooseYearShown:l,chooseDateShown:m,daysOfCurrentMonth:d,currentDayOfWeek:h}=this.state;const{calendarShown:p,hideCalendar:u,setDate:g}=this.props,w=this.props.style||{pointerEvents:p?"all":"none",opacity:p?1:0},E=d.map((t=>s.createElement("div",{key:t,className:"\n                        day\n                        ".concat(t+1==c&&o==e&&"active-day"),onClick:this.chooseDay},t+1))),v=[];let y=new Date("".concat(a,"-").concat(e+1,"-01")).getDay();0==y&&(y=7);for(let e=0;e<y;e++)v.push(s.createElement("div",{key:e,className:"day day-hidden"},e));return v.pop(),s.createElement("div",{className:"calendar",style:w},s.createElement("div",{className:"current-date"},s.createElement("div",{className:"year"},s.createElement("label",{onClick:this.toggleChooseYear,className:"active-year",style:{color:l?"#fff":"rgba(255, 255, 255, .6)"}},i)),s.createElement("div",{className:"day",style:{color:m?"#fff":"rgba(255, 255, 255, .6)"},onClick:this.showChooseDate},s.createElement("span",{className:"day-of-week"},r[h]),", ",s.createElement("div",{className:"today-date"},n," ",t[o]))),s.createElement("div",{className:"choose-date-body"},s.createElement("div",{className:"year",style:{opacity:l&&p?1:0,pointerEvents:l&&p?"all":"none"}},function(){return[2018,2019,2020,2021,2022,2023,2024,2025,2026,2027,2028,2029,2030,2031,2032,2033,2034,2035,2036,2037,2038,2039,2040,2041,2042,2043,2044,2045,2046,2047,2048,2049,2050,2051,2052,2053,2054,2055,2056,2057,2058,2059,2060,2061,2062,2063,2064,2065,2066,2067,2068,2069,2070,2071,2072,2073,2074,2075,2076,2077,2078,2079,2080].map((e=>s.createElement("span",{className:"choose-year ".concat(e==i?"active-year":""),key:e,onClick:this.chooseYear},e)))}.bind(this)()),s.createElement("div",{className:"days-date",style:{opacity:m&&p?1:0,pointerEvents:m&&p?"all":"none"}},s.createElement("div",{className:"heading"},s.createElement(Pe.Z,{className:"previous switch-month",onClick:this.switchPrevMonth}),s.createElement("div",{className:"date"},s.createElement("div",{className:"current-month"},t[e])," ",s.createElement("div",{className:"current-date"},a," г.")),s.createElement(De.Z,{className:"next switch-month",onClick:this.switchNextMonth})),s.createElement("div",{className:"table"},s.createElement("div",{className:"table-head"},s.createElement("div",{className:"day-of-week monday"},"Пн"),s.createElement("div",{className:"day-of-week tuesday"},"Вт"),s.createElement("div",{className:"day-of-week wednesday"},"Ср"),s.createElement("div",{className:"day-of-week thursday"},"Чт"),s.createElement("div",{className:"day-of-week friday"},"Пт"),s.createElement("div",{className:"day-of-week saturday"},"Сб"),s.createElement("div",{className:"day-of-week sunday"},"Вс")),s.createElement("div",{className:"table-body"},v,E)))),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"set-date button",onClick:()=>{const t="".concat(a,"-").concat(++e,"-").concat(n);g(t);const s=new Date,r=s.getDate(),o=s.getDay(),i=s.getMonth(),c=s.getFullYear();this.setState({currentDay:r,currentDayOfWeek:o,currentMonth:i,currentYear:c,activeDay:r,activeMonth:i,activeYear:c,activeDate:new Date})}},"установить"),s.createElement("button",{className:"cancel button",onClick:()=>{this.setState({chooseYearShown:!1,chooseDateShown:!1}),u()}},"отмена")))}}function Re(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(a),!0).forEach((function(t){Le(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Re(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Le(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class qe extends s.Component{constructor(){super(),this.state={user:{name:"",email:"",status:{},subscriptions:[]},userStatuses:[],oldUsername:"",isUserGotten:!1,chooseRoleShown:!1,calendarShown:!1,productName:"",products:[]},this.handleChangeUserData=this.handleChangeUserData.bind(this),this.editUser=this.editUser.bind(this),this.editUserPassword=this.editUserPassword.bind(this),this.changeUserRole=this.changeUserRole.bind(this),this.toggleRoleMenu=this.toggleRoleMenu.bind(this),this.changeActivelyUntil=this.changeActivelyUntil.bind(this),this.getUser=this.getUser.bind(this),this.hideCalendar=this.hideCalendar.bind(this),this.setDate=this.setDate.bind(this),this.freezeUserSubscription=this.freezeUserSubscription.bind(this),this.showCalendar=this.showCalendar.bind(this),this.issueSubscription=this.issueSubscription.bind(this)}async componentDidMount(){this.setState({isUserGotten:!1});const e=(await h("\n            query {\n                products {\n                    id\n                    title\n                    productFor\n                    imageURLdashboard\n                }\n            }\n        ")).products;e.map((e=>{e.activelyUntil=""})),await this.getUser(),this.setState({isUserGotten:!0,products:e})}async getUser(){this.setState({isUserGotten:!1});const e=this.props.match.params.username,t=await h("\n            query user($name: String!) {\n                user(name: $name) {\n                    email\n                    name\n                    hwid\n                    subscriptions {\n                        status {\n                            isExpired\n                            isActive\n                            isFreezed\n                        }\n                        title\n                        activelyUntil\n                        imageURL\n                        productFor\n                        wasFreezed\n                        freezeTime\n                    }\n                    status {\n                        isAdmin\n                        simpleUser\n                        isBanned\n                    }\n                }\n            }\n        ",{name:e}),{user:a}=t,s=[];Object.keys(a.status).map((e=>s.push(e))),a.subscriptions.map((e=>{e.activelyUntil=new Date(e.activelyUntil).toISOString().substr(0,10),e.resetCooldown=!1})),this.setState({user:a,isUserGotten:!0,oldUsername:a.name,userStatuses:s}),this.setState({isUserGotten:!0})}handleChangeUserData(e){const{name:t,value:a}=e.target;this.setState({user:Oe(Oe({},this.state.user),{},{[t]:a})})}async editUser(e){e.preventDefault(),this.setState({isUserGotten:!1});const{oldUsername:t}=this.state,{status:a}=this.state.user;let s="simpleUser";for(const e in a)a[e]&&(s=e);const n=document.forms.editUserForm,r=n.name.value,i=n.email.value,c=n.hwid.value,m=(0,o.Z)(localStorage.getItem("token")),{platform:d,userAgent:p,appName:u,appVersion:g}=navigator,w=await f(),{ip:E,city:v}=w,y={name:r,email:i,oldName:t,hwid:c,role:s,navigator:{platform:d,userAgent:p,appVersion:g,appName:u},locationData:{ip:E,location:v},adminName:m.name},b=await h("\n            mutation editUser(\n                $oldName: String!,\n                $name: String!,\n                $email: String!,\n                $hwid: String!,\n                $role: String!,\n                $navigator: NavigatorInput!,\n                $locationData: LocationInput!,\n                $adminName: String!\n            ) {\n                editUser(\n                    oldName: $oldName,\n                    name: $name,\n                    email: $email,\n                    hwid: $hwid,\n                    role: $role,\n                    navigator: $navigator,\n                    locationData: $locationData,\n                    adminName: $adminName\n                ) {\n                    id\n                    name\n                    email\n                    password\n                    avatar\n                    registeredDate\n                    subscriptions {\n                        status {\n                            isActive\n                            isFreezed\n                            isExpired\n                        }\n                        activelyUntil\n                        title\n                        productFor\n                        imageURL\n                    }\n                    status {\n                        isAdmin\n                        isBanned\n                        simpleUser\n                    }\n                }\n            }\n        ",y);if(""==b)return"";const N=b.editUser,S=[];Object.keys(N.status).map((e=>S.push(e))),this.setState({isUserGotten:!0,oldUsername:N.name,user:N,userStatuses:S}),this.props.history.push("/admin/users/edit-user/".concat(N.name)),l("info","Вы отредактировали пользователя ".concat(t))}async editUserPassword(e){e.preventDefault(),this.setState({isUserGotten:!1});const t=document.forms.editUserPassword,a=t.adminPassword.value,s=t.newPassword.value,n=(0,o.Z)(localStorage.getItem("token")),r={adminPassword:a,newPassword:s,userName:this.props.match.params.username,adminName:n.name};await h("\n            mutation editUserPassword(\n                $adminName: String!,\n                $adminPassword: String!,\n                $userName: String!,\n                $newPassword: String!\n            ) {\n                editUserPassword(\n                    adminName: $adminName,\n                    adminPassword: $adminPassword,\n                    userName: $userName,\n                    newPassword: $newPassword\n                )\n            }\n        ",r);this.setState({isUserGotten:!0})}changeUserRole(e){let{textContent:t}=e.target;"Админ"==t?t="isAdmin":"Обычный пользователь"==t?t="simpleUser":"Забаненный"==t&&(t="isBanned");const a=Oe({},this.state.user.status);for(const e in a)a[e]=null;a[t]=!0,this.setState({user:Oe(Oe({},this.state.user),{},{status:a})}),this.toggleRoleMenu()}toggleRoleMenu(){this.setState({chooseRoleShown:!this.state.chooseRoleShown})}async changeActivelyUntil(e){this.setState({isUserGotten:!1});const{name:t}=this.state.user,{activelyUntil:a}=e,s=(e.wasFreezed,{date:new Date(a).getTime()?new Date(a).toISOString().substr(0,10):"",subscription:e,name:t});await h("\n            mutation resetFreezeCooldown(\n                $title: String!,\n                $name: String!\n            ) {\n                resetFreezeCooldown(\n                    title: $title,\n                    name: $name\n                ) {\n                    message\n                    success\n                }\n            }\n        ",{title:e.title,name:t}),delete e.resetCooldown,delete e.wasFreezed,delete e.freezeTime;const n=await h("\n            mutation updateSubscriptionTime(\n                $date: String!,\n                $subscription: SubscriptionInput!,\n                $name: String!\n            ) {\n                updateSubscriptionTime(\n                    date: $date,\n                    subscription: $subscription,\n                    name: $name\n                ) {\n                    message\n                    success\n                }\n            }\n        ",s);await this.getUser(),this.setState({isUserGotten:!0});const{message:r,success:o}=n.updateSubscriptionTime;l(o?"success":"error",r)}hideCalendar(){this.setState({calendarShown:!1})}setDate(e){const{productName:t,user:a}=this.state,s=[...a.subscriptions],n=[...this.state.products],r=new Date(e).toISOString().substr(0,10);let o=!1;for(let e=0;e<a.subscriptions.length;e++){const a=s[e];if(a.title.toLowerCase()==t.toLowerCase()){a.activelyUntil=r,o=!0;break}}o?this.setState({user:Oe(Oe({},a),{},{subscriptions:s})}):(n.map((e=>{e.title==t&&(e.activelyUntil=r)})),this.setState({products:n})),this.hideCalendar()}async freezeUserSubscription(e){this.setState({isUserGotten:!1});const t=this.props.match.params.username,a={name:t,title:e},s=await h("\n            mutation freezeSubscription($name: String!, $title: String!) {\n                freezeSubscription(name: $name, title: $title) {\n                    message\n                    success\n                }\n            }\n        ",a),{message:n,success:r}=s.freezeSubscription;l("success","Вы успешно заморозили продукт ".concat(e," у пользователя ").concat(t)),await this.getUser(),this.setState({isUserGotten:!0})}async unfreezeSubscription(e){this.setState({isUserGotten:!1});const t=this.props.match.params.username,a={name:t,title:e};await h("\n            mutation unfreezeSubscription($name: String!, $title: String!) {\n                unfreezeSubscription(name: $name, title: $title) {\n                    message\n                    success\n                }\n            }\n        ",a),l("success","Подписка ".concat(e," у пользователя ").concat(t," успешно разморожена!")),await this.getUser(),this.setState({isUserGotten:!0})}showCalendar(e){const{name:t}=e.target;this.setState({calendarShown:!0,productName:t})}async issueSubscription(e){const t=this.props.match.params.username;this.setState({isUserGotten:!1});let a={};const{products:s}=this.state;for(let t=0;t<s.length;t++){const n=s[t];if(n.title==e){a=n;break}}const{activelyUntil:n}=a,{platform:r,userAgent:o,appName:i,appVersion:c}=navigator,m=await f(),{ip:d,city:p}=m,u={name:t,title:e,productCost:0,isKey:!0,navigator:{userAgent:o,platform:r,appName:i,appVersion:c},locationData:{ip:d,location:p},issueSub:!0,days:Math.round((new Date(n)-new Date)/864e5)+1};await h("\n            mutation buyProduct(\n                $title: String!,\n                $name: String!,\n                $navigator: NavigatorInput,\n                $locationData: LocationInput!,\n                $productCost: Int!,\n                $issueSub: Boolean!,\n                $days: Int!\n            ) {\n                buyProduct(\n                    title: $title,\n                    name: $name,\n                    navigator: $navigator,\n                    locationData: $locationData,\n                    productCost: $productCost,\n                    issueSub: $issueSub,\n                    days: $days\n                ) {\n                    id\n                    title\n                    productFor\n                    costPerDay\n                    peopleBought {\n                        avatar\n                        name\n                    }\n                }\n            }\n        ",u),l("success","Вы успешно добавили подписку ".concat(e," пользователю ").concat(t,"!")),await this.getUser(),this.setState({isUserGotten:!0})}render(){const{user:e,isUserGotten:t,chooseRoleShown:a,userStatuses:n,calendarShown:r}=this.state,o=this.state.products.map(((e,t)=>{const{title:a,imageURLdashboard:n,productFor:r,activelyUntil:o}=e;return s.createElement("div",{key:t,className:"product not-existing-product"},s.createElement("img",{className:"cover",src:n}),s.createElement("div",{className:"product-title"},a," | ",r),s.createElement("div",{className:"edit-actively-until-form field-wrap"},s.createElement("label",{className:"label"},"Подписка активна:"),s.createElement("input",{type:"text",name:a,value:""==o?new Date("1980-01-01").toLocaleDateString():new Date(o).toLocaleDateString(),className:"edit-actively-until field",readOnly:!0,onClick:this.showCalendar})),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button save",onClick:()=>this.issueSubscription(a)},"Сохранить")))}));let i=e.subscriptions&&e.subscriptions.map((e=>{const{title:t,activelyUntil:a,productFor:n,imageURL:r,resetCooldown:o,status:i}=e;return s.createElement("div",{key:t,className:"product"},s.createElement("img",{className:"cover",src:r}),s.createElement("div",{className:"product-title"},t," | ",n),s.createElement("div",{className:"edit-actively-until-form field-wrap"},s.createElement("label",{className:"label"},"Подписка активна:"),s.createElement("input",{type:"text",name:t,value:new Date(a).getTime()&&10==a.length?new Date(a).toLocaleDateString():a,className:"edit-actively-until field",readOnly:!0,onClick:this.showCalendar})),s.createElement("div",{className:"reset-freeze-cooldown"},s.createElement("div",{className:"checkbox-wrap"},s.createElement("input",{type:"checkbox",className:"checkbox",onChange:e=>{const{user:t}=this.state,{subscriptions:a}=t,{name:s}=e.target;let n=0;for(let e=0;e<a.length;e++){if(a[e].title==s){n=e;break}}a[n].resetCooldown=!a[n].resetCooldown,this.setState({user:Oe(Oe({},t),{},{subscriptions:a})})},value:o,name:e.title}),s.createElement("div",{className:"checkbox-checked"},s.createElement("img",{src:"/images/check-mark.png",className:"check-mark"}))),s.createElement("label",{className:"label"},"сброс кулдауна заморозки")),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button save",onClick:()=>this.changeActivelyUntil(e)},"Сохранить"),i.isFreezed?s.createElement("button",{className:"button unfreeze",onClick:()=>this.unfreezeSubscription(t)},"Разморозить"):s.createElement("button",{className:"button freeze",onClick:()=>this.freezeUserSubscription(t)},"Заморозить")))}));if(i.length>0)for(let t=0;t<this.state.products.length;t++){const a=this.state.products[t];let s=!1;for(let t=0;t<e.subscriptions.length;t++){const n=e.subscriptions[t];if(a.title==n.title&&a.productFor==n.productFor){s=!0;break}}s||i.push(o[t])}else i=o;const c=n.map((e=>("isAdmin"==e?e="Админ":"isBanned"==e?e="Забаненный":"simpleUser"==e&&(e="Обычный пользователь"),s.createElement("div",{className:"menu-item status",onClick:this.changeUserRole,key:e},e))));return s.createElement("div",{className:"edit-user"},s.createElement(I.Z,{className:"progress-bar",style:t?{display:"none"}:{display:"block"}}),s.createElement(Ae,{calendarShown:r,hideCalendar:this.hideCalendar,setDate:this.setDate}),s.createElement("h2",null,"Редактирование пользователя ",e.name),s.createElement("div",{className:"edit-user-wrap",style:{opacity:r?.5:t?1:0,pointerEvents:r?"none":t?"all":"none"}},s.createElement("div",{className:"user-subscriptions"},i),s.createElement("div",{className:"edit-forms"},s.createElement("form",{onSubmit:this.editUser,className:"edit-user-form form",name:"editUserForm"},s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"label"},"Логин:"),s.createElement("input",{type:"text",className:"field name",name:"name",value:e.name,onChange:this.handleChangeUserData})),s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"label"},"Почта:"),s.createElement("input",{type:"text",className:"field email",name:"email",value:e.email,onChange:this.handleChangeUserData})),s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"label"},"HWID:"),s.createElement("input",{type:"text",className:"field hwid",value:e.hwid,onChange:this.handleChangeUserData,name:"hwid"})),s.createElement("div",{className:"field-wrap role-wrap"},s.createElement("label",{className:"label"},"Роль:"),s.createElement("div",{className:"menu-wrap",onClick:this.toggleRoleMenu},s.createElement("input",{type:"text",className:"field role",name:"role",value:e.status.isAdmin?"Админ":e.status.isBanned?"Забанненый":e.status.simpleUser?"Обычный пользователь":"Неизвестный",readOnly:!0,style:{borderBottomLeftRadius:a?0:"8px",transition:a?"0s":"750ms"}}),s.createElement("img",{src:"/images/user-menu-arrow.png",className:"menu-arrow",style:{transform:"rotate(".concat(a?180:0,"deg)")}}),s.createElement("div",{className:"role-menu",onClick:e=>e.stopPropagation(),style:{maxHeight:a?26*n.length:0,pointerEvents:a?"all":"none"}},c))),s.createElement("button",{type:"submit",className:"save-changes button"},"Сохранить")),s.createElement("form",{onSubmit:this.editUserPassword,name:"editUserPassword",className:"edit-user-password form"},s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"label"},"Мой пароль:"),s.createElement("input",{type:"text",className:"field my-password",name:"adminPassword"})),s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"label"},"Новый пароль:"),s.createElement("input",{type:"text",className:"field new-password",name:"newPassword"})),s.createElement("button",{type:"submit",className:"button save-changes"},"Сохранить")))))}}const Ue=(0,i.EN)(qe);class Te extends s.Component{constructor(){super(),this.state={logs:[],logsCopy:[],logsByActionCopy:[],isRequestMaking:!0,isRequestForLogsMaking:!0,searchLogs:"",searchByAction:""},this.searchLogs=this.searchLogs.bind(this),this.getActionLogs=this.getActionLogs.bind(this),this.cleanLogs=this.cleanLogs.bind(this),this.handleActionChange=this.handleActionChange.bind(this),this.filterLog=this.filterLog.bind(this),this.handleSearchChange=this.handleSearchChange.bind(this)}async componentDidMount(){await this.getActionLogs()}async cleanLogs(){this.setState({isRequestForLogsMaking:!0}),await h("\n            mutation {\n                cleanLogs\n            }\n        "),this.setState({isRequestForLogsMaking:!1}),await this.getActionLogs()}async getActionLogs(){this.setState({isRequestForLogsMaking:!0,isRequestMaking:!0});const e=await h("\n            query {\n                getActionLogs {\n                    date\n                    name\n                    location\n                    IP\n                    browser\n                    platform\n                    action\n                }\n            }\n        ");this.setState({logs:e.getActionLogs,logsCopy:e.getActionLogs,logsByActionCopy:e.getActionLogs,isRequestMaking:!1,isRequestForLogsMaking:!1})}filterLog(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";function s(e,t){return t=t.toLowerCase().trim(),(e=e.toLowerCase()).includes(t)}if(""==t&&""==a)return null;if(""!=t&&""==a){if(s(e.name,t))return e;if(s(e.location,t))return e;if(s(e.IP,t))return e;if(s(e.browser,t))return e;if(s(e.platform,t))return e}else if(""!=a&&""==t){if(s(e.action,a))return e}else if(""!=a&&""!=t&&(s(e.name,t)||s(e.location,t)||s(e.IP,t)||s(e.browser,t)||s(e.platform,t))&&s(e.action,a))return e}searchLogs(e){let t=e.target.value.toLowerCase().trim(),a=e.target.value2.toLowerCase().trim();const{logsCopy:s,logs:n}=this.state;let r=[];s.map((e=>{const s=this.filterLog(e,t,a);s&&r.push(s)})),""==t&&""==a?this.setState({logs:s}):""==t&&""!=a?(r=[],s.map((e=>{e.action.toLowerCase().includes(a)&&r.push(e)})),this.setState({logs:r})):""!=t&&""==a?(r=[],s.map((e=>{(e.name.toLowerCase().includes(t)||e.location.toLowerCase().includes(t)||e.IP.toLowerCase().includes(t)||e.browser.toLowerCase().includes(t)||e.platform.toLowerCase().includes(t))&&r.push(e)})),this.setState({logs:r})):this.setState({logs:r})}handleSearchChange(e){this.setState({searchLogs:e.target.value});const t={target:{value:e.target.value,value2:this.state.searchByAction}};this.searchLogs(t),this.props.history.push("/admin/logs/1")}handleActionChange(e){this.setState({searchByAction:e.target.value});const t={target:{value:this.state.searchLogs,value2:e.target.value}};this.searchLogs(t),this.props.history.push("/admin/logs/1")}toggleClass(e){e.target.classList.toggle("active")}toggleParentClass(e){e.target.parentNode.classList.toggle("active")}render(){const{isRequestMaking:e,isRequestForLogsMaking:t,searchLogs:a,searchByAction:n}=this.state;let r=this.state.logs.map((e=>s.createElement("div",{onClick:this.toggleClass,key:new Date-new Date(e.date),className:"log"},s.createElement("div",{onClick:e=>{e.stopPropagation(),this.toggleParentClass(e)},className:"date"},new Date(e.date).toLocaleString()),s.createElement("div",{onClick:e=>{e.stopPropagation(),this.toggleParentClass(e)},className:"name"},e.name),s.createElement("div",{onClick:e=>{e.stopPropagation(),this.toggleParentClass(e)},className:"location"},e.location),s.createElement("div",{onClick:e=>{e.stopPropagation(),this.toggleParentClass(e)},className:"ip"},e.IP),s.createElement("div",{onClick:e=>{e.stopPropagation(),this.toggleParentClass(e)},className:"browser"},e.browser),s.createElement("div",{onClick:e=>{e.stopPropagation(),this.toggleParentClass(e)},className:"platform"},e.platform),s.createElement("div",{onClick:e=>{e.stopPropagation(),this.toggleParentClass(e)},className:"action"},e.action))));const{page:o}=this.props.match.params;return r=r.map(((e,t)=>{const a=20*o;if(a-20<=t&&t<a)return e})),s.createElement("div",{className:"action-logs"},s.createElement(I.Z,{style:{display:e?"block":"none"},className:"progress-bar"}),s.createElement("div",{className:"search",style:{opacity:t?.5:1,pointerEvents:t?"none":"all"}},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field by-everything"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.handleSearchChange,value:a}))),s.createElement("div",{className:"search-bar by-actions"},s.createElement("div",{className:"search-field"},s.createElement("input",{placeholder:"Действие",onChange:this.handleActionChange,value:n}))),s.createElement("button",{onClick:this.cleanLogs,className:"clean-logs"},"Очистить логи")),s.createElement("h2",{style:{opacity:t?.5:1,pointerEvents:t?"none":"all"}},"Логи действий"),s.createElement("div",{className:"actions-wrap",style:{opacity:e?0:t?.5:1,pointerEvents:e||t?"none":"all"}},s.createElement("div",{className:"table"},s.createElement("div",{className:"table-wrap"},s.createElement("div",{className:"heading"},s.createElement("div",{className:"date"},"Дата"),s.createElement("div",{className:"name"},"Логин"),s.createElement("div",{className:"location"},"Локация"),s.createElement("div",{className:"ip"},"IP"),s.createElement("div",{className:"browser"},"Браузер"),s.createElement("div",{className:"platform"},"Платформа"),s.createElement("div",{className:"action"},"Действие")),s.createElement("div",{className:"logs"},r)),s.createElement(Se,{array:r,path:"logs",page:o,itemsOnPage:20}))))}}const xe=(0,i.EN)(Te);function $e(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:11,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;t&&e++,a++;const s=["A","a","B","b","C","c","D","d","E","e","F","f","G","g","H","h","I","i","J","j","K","k","L","l","M","m","N","n","O","o","P","p","Q","q","R","r","S","s","T","t","U","u","V","v","W","w","X","x","Y","y","Z","z"];let n="";if(s.map(((r,o)=>{if(o<e){let e=Math.floor(Math.random()*s.length+10),r=n.length,o=62-++e;10==o&&o++;let i=Math.floor(Math.random()*o);n+=t?e>=52?++r%a==0?"-":i:++r%a==0?"-":s[e]:e>=52?i:s[e]}})),"-"==n.charAt(n.length-1)){let e=n.split("");e[e.length-1]="",n=e.join("")}return n}function je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?je(Object(a),!0).forEach((function(t){Ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ie(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Be extends s.Component{constructor(){super(),this.state={isRequestMaking:!1,scrollTo:0},this.handleSubmit=this.handleSubmit.bind(this)}componentDidUpdate(e,t){const{scrollTop:a}=document.documentElement;t.scrollTo!=a&&this.setState({scrollTo:a})}async handleSubmit(e){this.setState({isRequestMaking:!0}),e.preventDefault();const t=document.forms.createKey,a=t.nameKey,s=t.amountDays,n=t.amountActivations,r=t.amountKeys;a.blur(),s.blur(),r.blur(),n.blur();const i=[];for(let e=0;e<+r.value;e++){const e=""!==a.value?a.value:$e(10,!0,5);i.push(e)}const c=(0,o.Z)(localStorage.getItem("token")),{platform:l,userAgent:m,appName:d,appVersion:p}=navigator,u=await f(),{ip:g,city:w}=u,E={key:{name:i.length>0?i:[""],daysAmount:+s.value,keysToAddAmount:+r.value,activationsAmount:+n.value},title:this.props.title,navigator:{userAgent:m,platform:l,appName:d,appVersion:p},locationData:{ip:g,location:w},username:c.name};await h("\n            mutation createKeys(\n                $key: KeyInput!,\n                $title: String!,\n                $navigator: NavigatorInput,\n                $username: String!,\n                $locationData: LocationInput\n            ) {\n                createKeys(\n                    key: $key,\n                    title: $title,\n                    navigator: $navigator,\n                    username: $username,\n                    locationData: $locationData\n                )\n            }\n        ",E);this.props.getProducts(),this.setState({isRequestMaking:!1}),this.props.hideCreateKeyModal()}render(){const{style:e,isHelpMessageShown:t,hideHelpMessage:a,title:n}=this.props,{scrollTo:r}=this.state;return s.createElement("div",{className:"create-product-key-modal",style:Fe(Fe({},e),{},{top:r+150})},s.createElement("form",{name:"createKey",onSubmit:this.handleSubmit,className:"create-key",onClick:a,style:{pointerEvents:this.state.isRequestMaking?"none":"all"}},s.createElement("h4",null,n),s.createElement("label",{className:"help-message",style:{opacity:t?1:0,pointerEvents:t?"all":"none"},onClick:a},"Чтобы закрыть модальное окно нажмите ",s.createElement("b",null,"Esc")),s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"key-name"},"Наименоваение ключа:"),s.createElement("input",{className:"field",name:"nameKey"})),s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"amount-days"},"Количество дней:"),s.createElement("input",{className:"field",name:"amountDays"})),s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"amount-activations"},"Количество активаций:"),s.createElement("input",{className:"field",name:"amountActivations"})),s.createElement("div",{className:"field-wrap"},s.createElement("label",{className:"amountKeys"},"Сколько ключей добавить:"),s.createElement("input",{className:"field",name:"amountKeys"})),s.createElement("button",{className:"save-key",type:"submit"},"Сохранить")))}}class Ye extends s.Component{constructor(){super(),this.state={products:[],isRequestSent:!0,productToAddKey:{},isCreateKeyModalShown:!1,isHelpMessageShown:!1,searchValue:"",productsCopy:[]},this.setProductToAddKey=this.setProductToAddKey.bind(this),this.getProductKeys=this.getProductKeys.bind(this),this.showHelpMessage=this.showHelpMessage.bind(this),this.hideHelpMessage=this.hideHelpMessage.bind(this),this.hideCreateKeyModal=this.hideCreateKeyModal.bind(this),this.searchProducts=this.searchProducts.bind(this)}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&(this.hideCreateKeyModal(),this.hideHelpMessage())}.bind(this),await this.getProductKeys()}async getProductKeys(){this.setState({isRequestSent:!0});const e=await h("\n            query {\n                products {\n                    id\n                    title\n                    productFor\n                    imageURLdashboard\n                    keys {\n                        active {\n                            name\n                            expiredInDays\n                            activationsAmount\n                            isUsed\n                        }\n                        unactive {\n                            name\n                            expiredInDays\n                            activationsAmount\n                            isUsed\n                        }\n                        all {\n                            name\n                            expiredInDays\n                            activationsAmount\n                            isUsed\n                        }\n                    }\n                }\n            }\n        ");this.setState({products:e.products,productsCopy:e.products.slice(),isRequestSent:!1})}searchProducts(e){const t=e.target.value,a=[];this.state.productsCopy.map((e=>e.title.toLowerCase().includes(t.toLowerCase())||e.productFor.toLowerCase().includes(t.toLowerCase())?a.push(e):void 0)),""==t?this.setState({products:this.state.productsCopy}):""!=t&&this.setState({products:a})}setProductToAddKey(e){this.setState({productToAddKey:e})}showCreateKeyModal(){this.setState({isCreateKeyModalShown:!0})}hideCreateKeyModal(){this.setState({isCreateKeyModalShown:!1})}showHelpMessage(){this.setState({isHelpMessageShown:!0})}hideHelpMessage(){this.setState({isHelpMessageShown:!1})}render(){const{isRequestSent:e,isHelpMessageShown:t,productToAddKey:a,isCreateKeyModalShown:n}=this.state,o=this.state.products.map((e=>{const t=e.keys&&e.keys.all?e.keys.all:[],a=[],n=[];return t&&t.map((e=>{e.isUsed?a.push(e):n.push(e)})),s.createElement("div",{className:"product",key:e.title},s.createElement("img",{className:"cover",src:e.imageURLdashboard}),s.createElement("span",{className:"product-title"},e.title," | ",e.productFor),s.createElement("div",{className:"keys"},s.createElement("div",{className:"active keys-amount"},"Количество активированных ключей: ",a.length),s.createElement("div",{className:"unactive keys-amount"},"Количество неактивированных ключей: ",n.length),s.createElement("div",{className:"all keys-amount"},"Количество ключей: ",t.length)),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"create-key button",onClick:()=>{this.setProductToAddKey(e),this.showCreateKeyModal()}},"Создать ключ"),s.createElement(r.rU,{to:"/admin/keys/".concat(e.title,"/1"),className:"watch-keys button"},"Просмотр ключей")))}));return s.createElement("div",{className:"keys"},s.createElement(Be,{title:a.title,style:{transform:"translateY(\n                                ".concat(n?"100px":"-170%","\n                            )"),opacity:n?1:0},hideHelpMessage:this.hideHelpMessage,isHelpMessageShown:t,getProducts:this.getProductKeys,hideCreateKeyModal:this.hideCreateKeyModal}),s.createElement("div",{className:"products-wrap",style:{opacity:n?.5:1,userSelect:n?"none":"text"},onClick:()=>{n&&this.showHelpMessage()}},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchProducts}))),s.createElement("h2",null,"Ключи"),s.createElement(I.Z,{style:e?{display:"block"}:{display:"none"},className:"progress-bar"}),s.createElement("div",{className:"products",style:{opacity:e?0:1,pointerEvents:n?"none":"all"}},o)))}}function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function ze(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ke extends s.Component{constructor(){super(),this.state={isRequestMaking:!1},this.deleteKey=this.deleteKey.bind(this)}async deleteKey(){this.setState({isRequestMaking:!0});const{match:e,keyToDelete:t,hideDeleteKeyModal:a}=this.props,s=(0,o.Z)(localStorage.getItem("token")),{userAgent:n,platform:r,appName:i,appVersion:c}=navigator,l=await f(),{ip:m,city:d}=l,p={keyName:t.name,title:e.params.title,navigator:{userAgent:n,platform:r,appName:i,appVersion:c},locationData:{ip:m,location:d},name:s.name};await h("\n            mutation deleteKey(\n                $keyName: String!,\n                $title: String!,\n                $navigator: NavigatorInput,\n                $name: String!,\n                $locationData: LocationInput\n            ) {\n                deleteKey(\n                    keyName: $keyName,\n                    title: $title,\n                    navigator: $navigator,\n                    name: $name,\n                    locationData: $locationData\n                )\n            }\n        ",p);a(),await this.props.getProduct(),this.setState({isRequestMaking:!1})}render(){const{isDeleteKeyShown:e,hideDeleteKeyModal:t,keyToDelete:a}=this.props,{isRequestMaking:n}=this.state;return s.createElement("div",{className:"confirm-action",style:{transform:"translateY(".concat(e?0:"-250%",")"),top:e?"30px":0,pointerEvents:n?"none":"all"}},s.createElement("div",{className:"heading"},s.createElement("h3",null,"Подтвердите действие"),s.createElement(b.Z,{className:"close-modal",onClick:t})),s.createElement("div",{className:"content"},"Вы действительно хотите удалить ключ с именем ",a.name),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button agree",onClick:this.deleteKey},"Да"),s.createElement("button",{className:"button refuse",onClick:t},"Нет")))}}class Ze extends s.Component{constructor(){super(),this.state={product:{},productCopy:{},isRequestMaking:!0,isDeleteKeyShown:!1,keyToDelete:{}},this.showDeleteKeyModal=this.showDeleteKeyModal.bind(this),this.hideDeleteKeyModal=this.hideDeleteKeyModal.bind(this),this.handleDeleteAllKeys=this.handleDeleteAllKeys.bind(this),this.getProduct=this.getProduct.bind(this),this.searchKeys=this.searchKeys.bind(this)}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.hideDeleteKeyModal()}.bind(this),await this.getProduct()}async getProduct(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params,t=await h("\n            query getProduct($title: String!) {\n                getProduct(title: $title) {\n                    title\n                    costPerDay\n                    id\n                    productFor\n                    imageURLdashboard\n                    keys {\n                        all {\n                            name\n                            expiredInDays\n                            activationsAmount\n                            usedAmount\n                            isUsed\n                        }\n                        active {\n                            name\n                            expiredInDays\n                            activationsAmount\n                            usedAmount\n                            isUsed\n                        }\n                        unactive {\n                            name\n                            expiredInDays\n                            activationsAmount\n                            usedAmount\n                            isUsed\n                        }\n                    }\n                }\n            }\n        ",{title:e});this.setState({product:t.getProduct,isRequestMaking:!1,productCopy:t.getProduct})}searchKeys(e){const t=e.target.value,{productCopy:a}=this.state,s=[];a.keys.all.map((e=>{e.name.toLowerCase().includes(t.toLowerCase())&&s.push(e)})),""==t?this.setState({product:{keys:{all:a.keys.all}}}):this.setState({product:{keys:{all:s}}}),this.props.history.push("/admin/keys/".concat(a.title,"/1"))}async handleDeleteAllKeys(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params;await h("\n            mutation deleteAllKeys($title: String!) {\n                deleteAllKeys(title: $title)\n            }\n        ",{title:e}),await this.getProduct(),this.setState({isRequestMaking:!1})}showDeleteKeyModal(){this.setState({isDeleteKeyShown:!0})}hideDeleteKeyModal(){this.setState({isDeleteKeyShown:!1})}render(){let{productCopy:e,isRequestMaking:t,isDeleteKeyShown:a}=this.state;const n=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(a),!0).forEach((function(t){ze(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e),r=n.keys&&n.keys.all?n.keys.all:[],o=[],i=[];r&&r.map((e=>{e.isUsed?o.push(e):i.push(e)}));const{page:c}=this.props.match.params,l=this.state.product.keys&&this.state.product.keys.all.map(((e,t)=>{const a=15*c;if(t<a&&t>=a-15)return s.createElement("div",{key:e.name,className:"key"},s.createElement("div",{className:"name"},e.name),s.createElement("div",{className:"days-amount"},e.expiredInDays),s.createElement("div",{className:"activations"},e.usedAmount,"/",e.activationsAmount),s.createElement("div",{className:"is-used"},e.isUsed?"Да":"Нет"),s.createElement("div",{className:"action"},s.createElement("button",{className:"delete",onClick:()=>{this.showDeleteKeyModal(),this.setState({keyToDelete:e})}},"Удалить")))}));return s.createElement("div",{className:"product-keys"},s.createElement(Ke,{isDeleteKeyShown:a,keyToDelete:this.state.keyToDelete,hideDeleteKeyModal:this.hideDeleteKeyModal,getProduct:this.getProduct,match:this.props.match}),s.createElement(I.Z,{className:"progress-bar",style:{display:t?"block":"none"}}),s.createElement("div",{className:"product-keys-wrap",style:{opacity:a?.5:1,pointerEvents:a?"none":"all",userSelect:a?"none":"text"}},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchKeys}))),s.createElement("h2",null,"Просмотр ключей продукта ",s.createElement("span",{style:{opacity:t?0:1}},n.title)),s.createElement("div",{className:"keys-wrap",style:{pointerEvents:a?"none":"all"}},s.createElement("div",{className:"keys",style:{opacity:t?0:1,pointerEvents:t?"none":"all",pointerEvents:a?"none":"all"}},s.createElement("div",{className:"heading"},s.createElement("div",{className:"key-name"},"Имя ключа"),s.createElement("div",{className:"days-amount"},"Количество дней"),s.createElement("div",{className:"activations"},"Кол-во активаций"),s.createElement("div",{className:"is-used"},"Использован"),s.createElement("div",{className:"action"},"Действие")),s.createElement("div",{className:"keys-of-product"},l,s.createElement(Se,{array:l||[],path:"keys/".concat(n.title),page:c}))),s.createElement("div",{className:"product",style:{opacity:t?0:1}},s.createElement("img",{className:"cover",src:n.imageURLdashboard}),s.createElement("h3",{className:"product-title"},n.title," | ",n.productFor),s.createElement("div",{className:"keys-amount"},s.createElement("div",{className:"active keys-amount"},"Количество активированных ключей: ",o.length),s.createElement("div",{className:"unactive keys-amount"},"Количество неактивированных ключей: ",i.length),s.createElement("div",{className:"all keys-amount"},"Количество ключей: ",r.length)),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button delete-all-keys",onClick:this.handleDeleteAllKeys},"Удалить все ключи"))))))}}const Ve=(0,i.EN)(Ze);function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function We(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ge extends s.Component{constructor(){super(),this.state={isRequestMaking:!1,errorMessage:".",errorShown:!1,scrollTo:0},this.handleSubmit=this.handleSubmit.bind(this),this.showError=this.showError.bind(this)}componentDidUpdate(e,t){const{scrollTop:a}=document.documentElement;t.scrollTo!=a&&this.setState({scrollTo:a})}showError(e){this.setState({errorMessage:e,errorShown:!0,isRequestMaking:!1})}async handleSubmit(e){this.setState({isRequestMaking:!0}),e.preventDefault();const t=document.forms.createPromocode,a=t.promoName,s=t.discountPercent,n=t.activationsAmount,r=this.props.expiredInDate;if(""==r)return void this.showError("Дата не выбрана");a.blur(),s.blur(),n.blur();const i=$e(10,!1),c=(0,o.Z)(localStorage.getItem("token")),{platform:l,userAgent:m,appName:d,appVersion:p}=navigator,u=await f(),{ip:g,city:w}=u,E={promocode:{name:0==a.value.length?i:a.value,discountPercent:+s.value,activationsAmount:+n.value,expirationDays:r.toISOString(),isUsed:!1},title:this.props.product.title,username:c.name,navigator:{userAgent:m,platform:l,appName:d,appVersion:p},locationData:{ip:g,location:w}};await h("\n            mutation createPromocode(\n                $promocode: ProductPromocodeInput!,\n                $title: String!,\n                $username: String!,\n                $navigator: NavigatorInput,\n                $locationData: LocationInput\n            ) {\n                createPromocode(\n                    promocode: $promocode,\n                    title: $title,\n                    username: $username,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    name\n                    discountPercent\n                    activationsAmount\n                    promocodesAmount\n                    expirationDays\n                    isUsed\n                }\n            }\n        ",E);this.props.hideCreatePromocodeModal(),await this.props.getProducts(),this.setState({isRequestMaking:!1})}chooseYear(e){this.setState({currentYear:+e.target.value,activeYear:+e.target.value})}render(){const{product:e,helpMessageShown:t,hideHelpMessage:a,expiredInDate:n,modalShown:r}=this.props,{isRequestMaking:o,errorShown:i,scrollTo:c}=this.state,l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(Object(a),!0).forEach((function(t){We(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},this.props.style);return l.pointerEvents=o?"none":r?"all":"none",s.createElement("div",{className:"create-promo-modal",style:l},s.createElement("form",{name:"createPromocode",className:"create-promocode",onSubmit:this.handleSubmit,onClick:()=>{a(),this.setState({errorShown:!1})}},s.createElement("h3",null,e.title),i?s.createElement("label",{className:"error",style:{opacity:i?1:0,pointerEvents:i?"all":"none"}},"Дата времени действия не выбрана"):s.createElement("label",{className:"help-message",style:{opacity:t?1:0,pointerEvents:t?"all":"none"}},"Чтобы закрыть модальное окно нажмите ",s.createElement("b",null,"Esc")),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Наименование промокода:"),s.createElement("input",{name:"promoName",className:"promo-name"})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Время действия:"),s.createElement("div",{className:"input",onClick:this.props.showCalendar},s.createElement("input",{name:"expiredName",className:"expired-time",value:""!=n?n.toLocaleDateString():"дд.мм.гггг",readOnly:!0}),s.createElement("img",{src:"/images/user-menu-arrow.png"}))),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Количество активаций:"),s.createElement("input",{name:"activationsAmount",className:"activations-amount"})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Скидка на покупку:"),s.createElement("input",{name:"discountPercent",className:"discount-percent"})),s.createElement("button",{className:"save",type:"submit"},"Сохранить")))}}class Qe extends s.Component{constructor(){super(),this.state={products:[],productsCopy:[],isRequestMaking:!0,isCreatePromocodeShown:!1,productToAddPromocode:{},helpMessageShown:!1,calendarShown:!1,expiredInDate:"",scrollTo:0},this.searchProducts=this.searchProducts.bind(this),this.showCreatePromocodeModal=this.showCreatePromocodeModal.bind(this),this.hideCreatePromocodeModal=this.hideCreatePromocodeModal.bind(this),this.getProducts=this.getProducts.bind(this),this.showHelpMessage=this.showHelpMessage.bind(this),this.hideHelpMessage=this.hideHelpMessage.bind(this),this.showCalendar=this.showCalendar.bind(this),this.hideCalendar=this.hideCalendar.bind(this),this.setDate=this.setDate.bind(this),this.deleteExpirationDate=this.deleteExpirationDate.bind(this)}componentDidUpdate(e,t){const{scrollTop:a}=document.documentElement;t.scrollTo!=a&&this.setState({scrollTo:a})}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&(this.state.calendarShown||this.hideCreatePromocodeModal(),this.hideCalendar())}.bind(this),await this.getProducts()}async getProducts(){this.setState({isRequestMaking:!0});const e=await h("\n            query {\n                products {\n                    id\n                    title\n                    imageURLdashboard\n                    productFor\n                    promocodes {\n                        all {\n                            name\n                            activationsAmount\n                            discountPercent\n                            expirationDays\n                            isUsed\n                        }\n                        active {\n                            name\n                            activationsAmount\n                            discountPercent\n                            expirationDays\n                            isUsed\n                        }\n                        unactive {\n                            name\n                            activationsAmount\n                            discountPercent\n                            expirationDays\n                            isUsed\n                        }\n                    }\n                }\n            }\n        ");this.setState({products:e.products,productsCopy:e.products,isRequestMaking:!1})}searchProducts(e){const t=e.target.value,{productsCopy:a}=this.state,s=[];a.map((e=>{(e.title.toLowerCase().includes(t.toLowerCase().trim())||e.productFor.toLowerCase().includes(t.toLowerCase().trim()))&&s.push(e)})),0==t.length?this.setState({products:a}):this.setState({products:s})}showCreatePromocodeModal(e){this.setState({isCreatePromocodeShown:!0,productToAddPromocode:e})}hideCreatePromocodeModal(){this.setState({isCreatePromocodeShown:!1,helpMessageShown:!1})}showHelpMessage(){this.setState({helpMessageShown:!0})}hideHelpMessage(){this.setState({helpMessageShown:!1})}showCalendar(){this.setState({calendarShown:!0})}hideCalendar(){this.setState({calendarShown:!1})}setDate(e){this.setState({expiredInDate:new Date(e),calendarShown:!1})}deleteExpirationDate(){this.setState({expiredInDate:""})}render(){const{isRequestMaking:e,isCreatePromocodeShown:t,productToAddPromocode:a,helpMessageShown:n,calendarShown:o,scrollTo:i}=this.state,c=this.state.products.map((e=>{let t=0,a=0;return e.promocodes.all.map((e=>{e.isUsed?t++:a++})),s.createElement("div",{key:e.title,className:"promocode"},s.createElement("img",{className:"cover",src:e.imageURLdashboard}),s.createElement("h3",{className:"promocode-title"},e.title," | ",e.productFor),s.createElement("div",{className:"promocodes-amount"},s.createElement("span",{className:"activated-promos"},"Кол-во активированных промокодов: ",t),s.createElement("span",{className:"unactivated-promos"},"Кол-во неактивированных промокодов: ",a),s.createElement("span",{className:"all-promos"},"Кол-во всех промокодов: ",t+a)),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button create-promo",onMouseDown:()=>this.showCreatePromocodeModal(e)},"Создать промокод"),s.createElement(r.rU,{className:"button view-promocodes",to:"/admin/promocodes/".concat(e.title,"/1")},"Просмотр промокодов")))}));return s.createElement("div",{className:"promocodes"},s.createElement(Ge,{style:{opacity:t?1:0,transform:"translateY(".concat(t?0:"-100%",")"),pointerEvents:t?"all":"none"},product:a,getProducts:this.getProducts,hideCreatePromocodeModal:this.hideCreatePromocodeModal,helpMessageShown:n,hideHelpMessage:this.hideHelpMessage,showCalendar:this.showCalendar,expiredInDate:this.state.expiredInDate,modalShown:t}),s.createElement(Ae,{hideCalendar:this.hideCalendar,setDate:this.setDate,calendarShown:o}),s.createElement("div",{className:"promocodes-wrap-products",style:{opacity:o?.25:t?.5:1},onClick:this.showHelpMessage},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchProducts}))),s.createElement("h2",null,"Промокоды"),s.createElement(I.Z,{className:"progress-bar",style:{display:e?"block":"none"}}),s.createElement("div",{className:"promocodes-wrap",style:{opacity:e?0:1,userSelect:t?"none":"text",pointerEvents:t?"none":"all"}},c)))}}function Je(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(a),!0).forEach((function(t){et(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Je(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function et(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class tt extends s.Component{constructor(){super(),this.state={isRequestMaking:!1},this.deletePromocode=this.deletePromocode.bind(this)}async deletePromocode(){this.setState({isRequestMaking:!0});const{name:e}=this.props.promoToDelete,{title:t}=this.props.match.params,a=(0,o.Z)(localStorage.getItem("token")),{platform:s,userAgent:n,appName:r,appVersion:i}=navigator,c=await f(),{ip:l,city:m}=c,d={productTitle:t,promocodeTitle:e,name:a.name,navigator:{userAgent:n,platform:s},locationData:{ip:l,location:m}};await h("\n            mutation deletePromocode(\n                $promocodeTitle: String!,\n                $productTitle: String!,\n                $name: String!,\n                $navigator: NavigatorInput,\n                $locationData: LocationInput\n            ) {\n                deletePromocode(\n                    productTitle: $productTitle,\n                    promocodeTitle: $promocodeTitle,\n                    name: $name,\n                    navigator: $navigator,\n                    locationData: $locationData\n                )\n            }\n        ",d),await this.props.getPromocodes(),this.props.hideDeletePromo(),this.setState({isRequestMaking:!1})}render(){const{promoToDelete:e,hideDeletePromo:t}=this.props,{isRequestMaking:a}=this.state,n=Xe({},this.props.style);return n.pointerEvents=a?"none":"all",s.createElement("div",{className:"confirm-action delete-promo",style:n},s.createElement("div",{className:"heading"},s.createElement("h3",null,"Подтвердите действие"),s.createElement(b.Z,{onClick:t,className:"close-modal"})),s.createElement("div",{className:"content"},"Вы действительно хотите удалить промокод с именем ",e.name),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button agree",onClick:this.deletePromocode},"Да"),s.createElement("button",{className:"button refuse",onClick:t},"Нет")))}}class at extends s.Component{constructor(){super(),this.state={product:{promocodes:{all:[],active:[],unactive:[]}},productCopy:{},isRequestMaking:!0,promoToDelete:{},deletePromocodeShown:!1},this.handlePromosSearch=this.handlePromosSearch.bind(this),this.hideDeletePromo=this.hideDeletePromo.bind(this),this.showDeletePromo=this.showDeletePromo.bind(this),this.getPromocodes=this.getPromocodes.bind(this),this.deleteAllPromocodes=this.deleteAllPromocodes.bind(this)}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.hideDeletePromo()}.bind(this),await this.getPromocodes()}async getPromocodes(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params,t=await h("\n            query getProduct($title: String!) {\n                getProduct(title: $title) {\n                    id\n                    title\n                    imageURLdashboard\n                    productFor\n                    promocodes {\n                        all {\n                            name\n                            activationsAmount\n                            promocodesAmount\n                            discountPercent\n                            expirationDays\n                            isUsed\n                        }\n                        active {\n                            name\n                            activationsAmount\n                            promocodesAmount\n                            discountPercent\n                            expirationDays\n                            isUsed\n                        }\n                        unactive {\n                            name\n                            activationsAmount\n                            promocodesAmount\n                            discountPercent\n                            expirationDays\n                            isUsed\n                        }\n                    }\n                }\n            }\n        ",{title:e});this.setState({product:t.getProduct,productCopy:t.getProduct,isRequestMaking:!1})}showDeletePromo(){this.setState({deletePromocodeShown:!0})}hideDeletePromo(){this.setState({deletePromocodeShown:!1})}async deleteAllPromocodes(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params;await h("\n            mutation deleteAllPromocodes($title: String!) {\n                deleteAllPromocodes(title: $title) {\n                    promocodes {\n                        all {\n                            name\n                            activationsAmount\n                            discountPercent\n                            isUsed\n                        }\n                    }\n                }\n            }\n        ",{title:e}),await this.getPromocodes(),this.setState({isRequestMaking:!1})}handlePromosSearch(e){let t=e.target.value;t=t.toLowerCase().trim();const{productCopy:a,product:s}=this.state,n=[];if(a.promocodes.all.map((e=>{e.name.toLowerCase().includes(t)&&n.push(e)})),""==t)this.setState({product:Xe({},a)});else{const e=Xe(Xe({},s),{},{promocodes:Xe(Xe({},s.promocodes),{},{all:n})});this.setState({product:e})}}render(){const{isRequestMaking:e,product:t,promoToDelete:a,deletePromocodeShown:n}=this.state,{page:r}=this.props.match.params;let o=0,i=0;const c=t.promocodes&&t.promocodes.all.map(((e,t)=>{const a=15*r,n=a-15;if(e.isUsed?o++:i++,t<a&&t>=n)return s.createElement("div",{key:e.name,className:"promocode"},s.createElement("div",{className:"promo-name"},e.name),s.createElement("div",{className:"discount-percent"},e.discountPercent),s.createElement("div",{className:"activations-amount"},e.activationsAmount,"/",e.promocodesAmount),s.createElement("div",{className:"is-used"},e.isUsed?"Да":"Нет"),s.createElement("div",{className:"action"},s.createElement("button",{className:"button delete",onClick:()=>{this.showDeletePromo(),this.setState({promoToDelete:e})}},"Удалить")))}));return s.createElement("div",{className:"view-promocodes"},s.createElement(tt,{style:{opacity:n?1:0,transform:"translateY(".concat(n?0:"-150%",")"),pointerEvents:n?"all":"none"},promoToDelete:a,hideDeletePromo:this.hideDeletePromo,match:this.props.match,getPromocodes:this.getPromocodes}),s.createElement(I.Z,{style:{display:e?"block":"none"},className:"progress-bar"}),s.createElement("div",{className:"view-promos-wrap",style:{opacity:n?.5:1,pointerEvents:e||n?"none":"all",userSelect:n?"none":"text"}},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.handlePromosSearch}))),s.createElement("h2",null,"Просмотр промокодов продукта ",this.state.product.title),s.createElement("div",{className:"promocodes-wrap",style:{opacity:e?0:1,pointerEvents:e?"none":"all"}},s.createElement("div",{className:"table"},s.createElement("div",{className:"heading"},s.createElement("div",{className:"promo-name"},"Наименование промокода"),s.createElement("div",{className:"discount-percent"},"% скидки"),s.createElement("div",{className:"activations-amount"},"Количество активаций"),s.createElement("div",{className:"is-used"},"Использован"),s.createElement("div",{className:"action"},"Действие")),s.createElement("div",{className:"promocodes"},c),s.createElement(Se,{array:t.promocodes?c:[],path:"promocodes/".concat(t.title),page:r})),s.createElement("div",{className:"product"},s.createElement("img",{className:"cover",src:t.imageURLdashboard}),s.createElement("h3",null,t.title," | ",t.productFor),s.createElement("div",{className:"promos-amount"},s.createElement("span",{className:"active"},"Количество активированных промокодов: ",o),s.createElement("span",{className:"unactive"},"Количество неактивированных промокодов: ",i),s.createElement("span",{className:"all"},"Количество промокодов: ",o+i)),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button delete-promos",onClick:this.deleteAllPromocodes},"Удалить все промокоды"))))))}}const st=(0,i.EN)(at);function nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(a),!0).forEach((function(t){ot(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ot(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class it extends s.Component{constructor(){super(),this.state={isRequestMaking:!1,scrollTo:0},this.deleteProduct=this.deleteProduct.bind(this)}componentDidUpdate(e,t){const{scrollTop:a}=document.documentElement;t.scrollTo!=a&&this.setState({scrollTo:a})}async deleteProduct(){this.setState({isRequestMaking:!0});const{platform:e,userAgent:t,appName:a,appVersion:s}=navigator,n=(0,o.Z)(localStorage.getItem("token")),r=await f(),{ip:i,city:c}=r,l={title:this.props.product.title,navigator:{platform:e,userAgent:t,appVersion:s,appName:a},locationData:{ip:i,location:c},name:n.name};await h("\n            mutation deleteProduct(\n                $title: String!,\n                $name: String!,\n                $navigator: NavigatorInput!,\n                $locationData: LocationInput\n            ) {\n                deleteProduct(\n                    title: $title,\n                    name: $name,\n                    navigator: $navigator,\n                    locationData: $locationData\n                )\n            }\n        ",l),await this.props.getProducts(),this.props.hideModal(),this.setState({isRequestMaking:!1})}render(){const{product:e,hideModal:t,style:a,confirmActionShown:n}=this.props,{scrollTo:r}=this.state;return s.createElement("div",{className:"confirm-action",style:rt(rt({},a),{},{pointerEvents:this.state.isRequestMaking?"none":n?"all":"none",top:r})},s.createElement("div",{className:"heading"},s.createElement("h2",null,"Подтвердите действие"),s.createElement(b.Z,{className:"close-modal",onClick:t})),s.createElement("div",{className:"content"},"Вы действительно хотите удалить продукт ",s.createElement("span",{style:{maxWidth:"360px"}},e.title),"?"),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button agree",onClick:this.deleteProduct},"Да"),s.createElement("button",{className:"button refuse",onClick:t},"Нет")))}}class ct extends s.Component{constructor(){super(),this.state={products:[],isRequestMaking:!0,confirmActionShown:!1,productToDelete:{}},this.searchProducts=this.searchProducts.bind(this),this.toggleConfirmationModal=this.toggleConfirmationModal.bind(this),this.hideConfirmationModal=this.hideConfirmationModal.bind(this),this.getProducts=this.getProducts.bind(this)}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.setState({confirmActionShown:!1})}.bind(this),await this.getProducts()}async getProducts(){this.setState({isRequestMaking:!0});const e=await h("\n            query {\n                products {\n                    title\n                    costPerDay\n                    id\n                    productFor\n                    imageURLdashboard\n                    workingTime\n                    description\n                    currentDate\n                    peopleBought {\n                        name\n                        avatar\n                    }\n                    characteristics {\n                        version\n                        osSupport\n                        cpuSupport\n                        gameMode\n                        developer\n                        supportedAntiCheats\n                    }\n                }\n            }\n        ");this.setState({isRequestMaking:!1,products:e.products,productsCopy:e.products})}searchProducts(e){let t=e.target.value;t=t.toLowerCase().trim();const{productsCopy:a}=this.state,s=[];a.map((e=>{(e.title.toLowerCase().includes(t)||e.productFor.toLowerCase().includes(t))&&s.push(e)})),""==t?this.setState({products:a}):this.setState({products:s})}toggleConfirmationModal(){this.setState({confirmActionShown:!this.state.confirmActionShown})}hideConfirmationModal(){this.setState({confirmActionShown:!1})}render(){const{isRequestMaking:e,confirmActionShown:t}=this.state,a=this.state.products.map((e=>s.createElement("div",{key:e.title,className:"product"},s.createElement("img",{src:e.imageURLdashboard,className:"cover"}),s.createElement("div",{className:"product-title"},e.title," | ",e.productFor),s.createElement("div",{className:"description"},e.description),s.createElement(B,{people:e.peopleBought,renderPeopleLimit:"3"}),s.createElement("div",{className:"buttons"},s.createElement(r.rU,{onClick:()=>this.props.setEditType("edit"),className:"button edit",to:"/admin/products/".concat(e.title)},"Редактировать"),s.createElement("button",{className:"button delete",onClick:()=>{this.setState({productToDelete:e}),this.toggleConfirmationModal()}},"Удалить")))));return s.createElement("div",{className:"products"},s.createElement(it,{style:{opacity:t?1:0,transform:"translateY(".concat(t?0:"-150%",")")},confirmActionShown:t,product:this.state.productToDelete,hideModal:this.hideConfirmationModal,getProducts:this.getProducts}),s.createElement("div",{className:"search-bar",style:{opacity:t?.5:1,pointerEvents:t?"none":"all",userSelect:t?"none":"text"}},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchProducts})),s.createElement(r.rU,{className:"add-product-link",onClick:()=>this.props.setEditType("create"),to:"/admin/products/add-product"},"Добавить продукт")),s.createElement("h2",{style:{opacity:t?.5:1,pointerEvents:t?"none":"all",userSelect:t?"none":"text"}},"Продукты"),s.createElement(I.Z,{style:{display:e?"block":"none"},className:"progress-bar"}),s.createElement("div",{className:"product-wrap",style:{opacity:e?0:t?.5:1,pointerEvents:t?"none":"all",userSelect:t?"none":"text"}},a))}}var lt=a(8428);function mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function dt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(a),!0).forEach((function(t){ht(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ht(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class pt extends s.Component{constructor(){super(),ht(this,"type","edit"),this.state={product:{title:"",productFor:"",description:"",workingTime:"",locks:"",reloading:"",costPerDay:"",characteristics:{version:"",osSupport:"",cpuSupport:"",gameMode:"",supportedAntiCheats:"",developer:""}},title:"",isRequestMaking:!0,choosenEditingTime:"",cost:0,chooseTimeShown:!1,menuTextToAdd:"",costToAdd:0,costPerToAdd:"",daysToAdd:"",additionalMenuShown:!1,additionalMenu:[{textContent:"Протестировать"}],costMenuShown:!1,allCostLength:0,costToDelete:""},this.handleProductChange=this.handleProductChange.bind(this),this.handleCharacteristicsChange=this.handleCharacteristicsChange.bind(this),this.updateProduct=this.updateProduct.bind(this),this.handleUploadFile=this.handleUploadFile.bind(this),this.addProduct=this.addProduct.bind(this),this.disableProduct=this.disableProduct.bind(this),this.getProduct=this.getProduct.bind(this),this.handleChangeCost=this.handleChangeCost.bind(this),this.toggleChooseTime=this.toggleChooseTime.bind(this),this.chooseTime=this.chooseTime.bind(this),this.addCostChange=this.addCostChange.bind(this),this.addCost=this.addCost.bind(this),this.toggleAdditionalMenu=this.toggleAdditionalMenu.bind(this),this.testCost=this.testCost.bind(this),this.toggleCostMenu=this.toggleCostMenu.bind(this)}async componentDidMount(){Object.keys(this.props.match.params).length<1?(this.type="create",this.setState({isRequestMaking:!1})):"edit"==this.type?await this.getProduct():"create"==this.type&&this.setState({product:{}})}async getProduct(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params,t=await h("\n            query getProduct($title: String!) {\n                getProduct(title: $title) {\n                    id\n                    title\n                    productFor\n                    logo\n                    imageURL\n                    imageURLdashboard\n                    workingTime\n                    reloading\n                    costPerDay\n                    description\n                    locks\n                    timeBought\n                    allCost {\n                        cost\n                        costPer\n                        menuText\n                    }\n                    peopleBought {\n                        name\n                        avatar\n                    }\n                    characteristics {\n                        version\n                        osSupport\n                        cpuSupport\n                        gameMode\n                        developer\n                        supportedAntiCheats\n                    }\n                    status\n                    cost {\n                        perDay\n                        perMonth\n                        perYear\n                    }\n                    changes {\n                        id\n                        version\n                        created\n                        description\n                    }\n                }\n            }\n        ",{title:e}),a=t.getProduct;return this.setState({isRequestMaking:!1,product:a,productCopy:a,title:a.title,allCostLength:a.allCost.length,choosenEditingTime:a.allCost[0]?a.allCost[0].menuText:""}),t.getProduct.title}handleProductChange(e){"title"==e.target.name&&e.target.value.toLowerCase().includes("/")||this.setState({product:dt(dt({},this.state.product),{},{[e.target.name]:e.target.value})})}handleCharacteristicsChange(e){this.setState({product:dt(dt({},this.state.product),{},{characteristics:dt(dt({},this.state.product.characteristics),{},{[e.target.name]:e.target.value})})})}async updateProduct(e){e.preventDefault(),this.setState({isRequestMaking:!0});const{product:t,title:a}=this.state,s=document.forms.updateProduct,n=s.imageURLdashboard,r=s.logo;t.costPerDay=+t.costPerDay,t.oldTitle=this.state.title,t.newTitle=t.title,t.status="undetect",delete t.title;const i=new FormData;i.append("imageURLdashboard",n.files[0]?n.files[0]:""),i.append("logo",r.files[0]?r.files[0]:""),await d()("/uploaded-images",{method:"POST",body:i}),n.files[0]&&r.files[0]?(delete t.imageURLdashboard,delete t.logo,t.imageURLdashboard="/upload-images/"+n.files[0].name,t.logo="/upload-images/"+r.files[0].name):n.files[0]?(delete t.imageURLdashboard,t.imageURLdashboard="/upload-images/"+n.files[0].name):r.files[0]&&(delete t.logo,t.logo="/upload-images/"+r.files[0].name);const c=(0,o.Z)(localStorage.getItem("token")),{userAgent:l,platform:m,appName:p,appVersion:u}=navigator,g=await f(),{ip:w,city:E}=g,v={product:t,navigator:{userAgent:l,platform:m,appName:p,appVersion:u},locationData:{ip:w,location:E},adminName:c.name},y=(await h("\n            mutation editProduct(\n                $product: ProductInput!,\n                $adminName: String!,\n                $navigator: NavigatorInput!,\n                $locationData: LocationInput!\n            ) {\n                editProduct(\n                    product: $product,\n                    adminName: $adminName,\n                    navigator: $navigator,\n                    locationData: $locationData\n                ) {\n                    id\n                    title\n                    productFor\n                    logo\n                    imageURL\n                    imageURLdashboard\n                    workingTime\n                    reloading\n                    costPerDay\n                    description\n                    locks\n                    timeBought\n                    peopleBought {\n                        name\n                        avatar\n                    }\n                    characteristics {\n                        version\n                        osSupport\n                        cpuSupport\n                        gameMode\n                        developer\n                        supportedAntiCheats\n                    }\n                    status\n                    cost {\n                        perDay\n                        perMonth\n                        perYear\n                    }\n                }\n            }\n        ",v)).editProduct.title;this.props.history.push("/admin/products/".concat(y)),await this.getProduct()}async handleUploadFile(e){const t=e.target.files[0],a=new FileReader;a.onload=function(t){this.setState({product:dt(dt({},this.state.product),{},{[e.target.name]:t.target.result})})}.bind(this),a.readAsDataURL(t)}async addProduct(){this.setState({isRequestMaking:!0});const{product:e}=this.state;e.peopleBought=[],e.changes=[],e.promocodes={all:[],active:[],unactive:[]},e.keys={all:[],active:[],unactive:[]},e.costPerDay=+e.costPerDay||0,e.title=e.title||"product";const t=document.forms.updateProduct,a=t.imageURLdashboard,s=t.logo,n=new FormData;n.append("imageURLdashboard",a.files[0]?a.files[0]:""),n.append("logo",s.files[0]?s.files[0]:""),await d()("/uploaded-images",{method:"POST",body:n}),a.files[0]&&s.files[0]?(delete e.imageURLdashboard,delete e.logo,e.imageURLdashboard="/upload-images/"+a.files[0].name,e.logo="/upload-images/"+s.files[0].name):a.files[0]?(delete e.imageURLdashboard,e.imageURLdashboard="/upload-images/"+a.files[0].name):s.files[0]?(delete e.logo,e.logo="/upload-images/"+s.files[0].name):(e.imageURLdashboard="",e.logo="");const{platform:r,userAgent:i,appName:c,appVersion:m}=navigator,p=await f(),{ip:u,city:g}=p,w={product:e,navigator:{platform:r,userAgent:i,appName:c,appVersion:m},locationData:{ip:u,location:g},adminName:(0,o.Z)(localStorage.getItem("token")).name},E=await h("\n            mutation createProduct(\n                $product: ProductInput!,\n                $navigator: NavigatorInput!,\n                $adminName: String!,\n                $locationData: LocationInput!\n            ) {\n                createProduct(\n                    product: $product,\n                    navigator: $navigator,\n                    adminName: $adminName,\n                    locationData: $locationData\n                ) {\n                    response {\n                        message\n                        success\n                    }\n                    product {\n                        id\n                        title\n                        productFor\n                        logo\n                        imageURL\n                        imageURLdashboard\n                        workingTime\n                        reloading\n                        costPerDay\n                        description\n                        locks\n                        timeBought\n                        peopleBought {\n                            name\n                            avatar\n                        }\n                        characteristics {\n                            version\n                            osSupport\n                            cpuSupport\n                            gameMode\n                            developer\n                            supportedAntiCheats\n                        }\n                    }\n                }\n            }\n        ",w);console.log(E);const{createProduct:v}=E;l(v.response.success?"success":"error",v.response.message),this.setState({product:v.product,title:v.product.title,isRequestMaking:!1})}async disableProduct(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params,t={title:e};await h("\n            mutation disableProduct($title: String!) {\n                disableProduct(title: $title)\n            }\n        ",t),await this.getProduct(),this.setState({isRequestMaking:!1})}handleChangeCost(e){const{choosenEditingTime:t,product:a}=this.state;let s=+e.target.value;isNaN(s)&&(s=0),a.allCost.map(((e,n)=>{e.menuText.toLowerCase()==t.toLowerCase()&&(a.allCost[n].cost=s)})),this.setState({product:a})}toggleChooseTime(){this.setState({chooseTimeShown:!this.state.chooseTimeShown})}chooseTime(e){this.setState({choosenEditingTime:e.target.textContent})}addCostChange(e){const t=e.target.name;let a=e.target.value;this.setState({[t+"ToAdd"]:a})}async addCost(){this.setState({isRequestMaking:!0});const{costToAdd:e,costPerToAdd:t,menuTextToAdd:a,daysToAdd:s}=this.state,n={title:this.props.match.params.title,cost:{cost:+e,costPer:t,menuText:a,days:+s}},{addCost:{success:r,message:o}}=await h("\n            mutation addCost($title: String!, $cost: CostInput!) {\n                addCost(title: $title, cost: $cost) {\n                    message\n                    success\n                }\n            }\n        ",n);l(r?"success":"error",o),await this.getProduct(),this.setState({isRequestMaking:!1})}toggleAdditionalMenu(){this.setState({additionalMenuShown:!this.state.additionalMenuShown})}toggleCostMenu(){this.setState({costMenuShown:!this.state.costMenuShown})}testCost(){const{costToAdd:e,costPerToAdd:t,menuTextToAdd:a,product:s}=this.state,n={cost:e,costPer:t,menuText:a};s.allCost.push(n),this.setState({product:s})}async deleteCost(e){this.setState({isRequestMaking:!0});const t={title:this.props.match.params.title,costTitle:e.menuText};await h("\n            mutation deleteCost($title: String!, $costTitle: String!) {\n                deleteCost(title: $title, costTitle: $costTitle)\n            }\n        ",t);await this.getProduct(),this.setState({isRequestMaking:!1})}render(){const{isRequestMaking:e,product:t,choosenEditingTime:a,chooseTimeShown:n,additionalMenuShown:r,additionalMenu:o,daysToAdd:i}=this.state,{allCost:c}=t,m=[];c&&c.map(((t,a)=>{m.push(s.createElement("span",{className:"time",key:a,onClick:this.chooseTime,style:{pointerEvents:e?"none":"all"}},t.menuText,s.createElement(lt.Z,{onClick:e=>{e.stopPropagation(),this.deleteCost(t)},className:"delete-icon"})))}));let d=a;t.allCost&&t.allCost.map((e=>{a.toLowerCase()==e.menuText.toLowerCase()&&(d=e.cost)}));const h=o.map((e=>{let t=()=>"";return"Протестировать"==e.textContent&&(t=this.testCost),s.createElement("div",{className:"cost-item",onClick:t,key:e.textContent},e.textContent)}));return s.createElement("div",{className:"edit-product"},s.createElement(I.Z,{className:"progress-bar",style:{display:e?"block":"none"}}),s.createElement("h2",null,"Редактирование продукта"),s.createElement("div",{className:"editing-product-form",style:{opacity:e?0:1}},s.createElement("form",{className:"change-product",style:{opacity:e?0:1,pointerEvents:e?"none":"all"},name:"updateProduct",onSubmit:this.updateProduct},s.createElement("div",{className:"field-wrap name-field"},s.createElement("label",null,"Наименование продукта:"),s.createElement("input",{className:"product-name field",type:"text",name:"title",value:t.title,onChange:this.handleProductChange})),s.createElement("div",{className:"field-wrap product-for-field"},s.createElement("label",null,"Продукт для:"),s.createElement("input",{className:"product-for field",type:"text",name:"productFor",value:t.productFor,onChange:this.handleProductChange})),s.createElement("div",{className:"field-wrap description-field"},s.createElement("label",null,"Описание продукта:"),s.createElement("textarea",{type:"text",className:"product-description field",value:t.description,name:"description",onChange:this.handleProductChange})),s.createElement("div",{className:"buttons upload-files"},s.createElement("button",{type:"button",className:"button upload-header"},"Загрузить шапку",s.createElement("input",{onChange:this.handleUploadFile,type:"file",className:"upload-files",name:"imageURLdashboard"})),s.createElement("button",{type:"button",className:"button upload-avatar"},"Загрузить аву",s.createElement("input",{type:"file",name:"logo",className:"upload-files",onChange:this.handleUploadFile}))),s.createElement("div",{className:"field-wrap upper-block-field"},s.createElement("label",null,"Верхний блок:"),s.createElement("div",{className:"input-wrap"},s.createElement("input",{type:"text",className:"field",value:t.workingTime,name:"workingTime",onChange:this.handleProductChange}),";",s.createElement("input",{type:"text",className:"field",value:t.locks,name:"locks",onChange:this.handleProductChange}),";",s.createElement("input",{type:"text",className:"field",value:t.reloading,name:"reloading",onChange:this.handleProductChange}),";",s.createElement("input",{type:"text",className:"field",value:t.costPerDay,name:"costPerDay",onChange:this.handleProductChange}),s.createElement("span",{className:"per-day"},"₽/День"))),s.createElement("div",{className:"field-wrap game-version-field"},s.createElement("label",null,"Версия игры:"),s.createElement("input",{type:"text",className:"game-version field",name:"version",value:t.characteristics&&t.characteristics.version,onChange:this.handleCharacteristicsChange})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Поддерживаемые OS:"),s.createElement("input",{type:"text",className:"field",name:"osSupport",value:t.characteristics&&t.characteristics.osSupport,onChange:this.handleCharacteristicsChange})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Поддерживаемые процессоры:"),s.createElement("input",{type:"text",className:"field",name:"cpuSupport",value:t.characteristics&&t.characteristics.cpuSupport,onChange:this.handleCharacteristicsChange})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Режим игры:"),s.createElement("input",{type:"text",className:"field",name:"gameMode",value:t.characteristics&&t.characteristics.gameMode,onChange:this.handleCharacteristicsChange})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Разработчик:"),s.createElement("input",{type:"text",className:"field",name:"developer",value:t.characteristics&&t.characteristics.developer,onChange:this.handleCharacteristicsChange})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Поддерживаемые античиты:"),s.createElement("input",{type:"text",className:"field",name:"supportedAntiCheats",value:t.characteristics&&t.characteristics.supportedAntiCheats,onChange:this.handleCharacteristicsChange})),"edit"==this.type?s.createElement(s.Fragment,null,s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Настройка цены:"),s.createElement("div",{className:"edit-time-wrap",style:{borderBottomLeftRadius:n?0:"5px"}},s.createElement("div",{className:"choose-day-wrap",onClick:this.toggleChooseTime},s.createElement("input",{type:"text",className:"field choose-day",value:a,onChange:this.handleCharacteristicsChange,readOnly:!0}),s.createElement("img",{className:"arrow",src:"/images/user-menu-arrow.png"}),s.createElement("div",{className:"choose-day-dropdown",style:{maxHeight:n?"".concat(30*(t.allCost?t.allCost.length:1)>=240?240:30*(t.allCost?t.allCost.length:1),"px"):0,overflow:t.allCost&&30*t.allCost.length>=240?"auto":"hidden",pointerEvents:n?"all":"none"}},m)),s.createElement("input",{type:"text",className:"field",value:d,name:a,onChange:this.handleChangeCost}))),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Добавление цены:"),s.createElement("div",{className:"add-cost-wrap"},s.createElement("input",{type:"text",className:"field",name:"cost",placeholder:"Цена...",onChange:this.addCostChange}),s.createElement("input",{type:"text",className:"field",name:"costPer",placeholder:"Цена за...",onChange:this.addCostChange}),s.createElement("input",{type:"text",className:"field",name:"menuText",placeholder:"Надпись в меню...",onChange:this.addCostChange}),s.createElement("div",{className:"three-dots"},s.createElement("div",{className:"menu",style:{opacity:r?1:0,pointerEvents:r?"all":"none",transform:"translateY(".concat(r?0:"5px",")"),top:"-".concat(38*o.length,"px")}},h))),s.createElement("div",{className:"field days-field-wrap"},s.createElement("input",{type:"text",className:"field days-field",name:"days",placeholder:"Дни...",value:i,onChange:this.addCostChange}),s.createElement("span",{className:"info",onClick:()=>l("info","Количество дней, которое будет прибавляться к подписке при покупке.")},"i")),s.createElement("button",{type:"button",className:"add-cost",onClick:this.addCost},"Добавить цену"))):""),s.createElement("div",{className:"product-wrap"},s.createElement(oe,{product:t,hideChanges:!0,hideCircularProgress:!0,hideh2:!0,style:{opacity:e?0:1,pointerEvents:e?"none":"all"}}),s.createElement("div",{className:"buttons",style:{pointerEvents:e?"none":"all"}},"edit"==this.type?s.createElement(s.Fragment,null,s.createElement("button",{className:"button save-changes",onClick:this.updateProduct,type:"submit"},"Сохранить изменения"),s.createElement("button",{className:"button off-the-product",onClick:this.disableProduct},"Отключить продукт")):s.createElement("button",{className:"button add-product",onClick:this.addProduct},"Добавить")))))}}const ut=(0,i.EN)(pt);class gt extends s.Component{constructor(){super(),this.state={resetBindingRequests:[],resetBindingRequestsCopy:[],isRequestMaking:!0,filterBy:"Все",existingStatuses:["Все","На рассмотрении","Принят","Отклонён"],filterDropdownShown:!1,searchValue:""},this.deleteAllRequests=this.deleteAllRequests.bind(this),this.handleSearch=this.handleSearch.bind(this),this.getResetBindings=this.getResetBindings.bind(this),this.acceptResetBinding=this.acceptResetBinding.bind(this),this.rejectResetBinding=this.rejectResetBinding.bind(this),this.filterByStatus=this.filterByStatus.bind(this),this.toggleFilterDropdown=this.toggleFilterDropdown.bind(this)}async componentDidMount(){await this.getResetBindings()}async deleteAllRequests(){this.setState({isRequestMaking:!0}),await h("\n            mutation {\n                deleteAllResetRequests\n            }\n        "),await this.getResetBindings(),this.setState({isRequestMaking:!1})}async getResetBindings(){this.setState({isRequestMaking:!0});const e=await h("\n            query {\n                getAllBindings {\n                    number\n                    reason\n                    date\n                    status\n                    id\n                    owner\n                    ip\n                    location\n                }\n            }\n        ");this.setState({resetBindingRequests:e.getAllBindings,resetBindingRequestsCopy:e.getAllBindings,isRequestMaking:!1})}filterByStatus(e){this.props.history.push("/admin/reset-binding/1"),this.toggleFilterDropdown(),this.handleSearch({target:{value:""},filterStatus:e.target.textContent}),this.setState({filterBy:e.target.textContent,searchValue:this.state.searchValue})}filterRequest(e,t){return e.id.toString().toLowerCase().trim().includes(t)||e.reason.toLowerCase().trim().includes(t)||e.ip.toLowerCase().trim().includes(t)||e.location.toLowerCase().trim().includes(t)?e:void 0}handleSearch(e){this.setState({searchValue:e.target.value},(function(){let t=this.state.searchValue;t=t.toLowerCase().trim();const{resetBindingRequestsCopy:a}=this.state;this.props.history.push("/admin/reset-binding/1");const s=[];a.map((e=>{const a=this.filterRequest(e,t);a&&s.push(a)})),""!=t||e.filterStatus?this.setState({resetBindingRequests:s}):this.setState({resetBindingRequests:a})}))}async acceptResetBinding(e,t){this.setState({isRequestMaking:!0});const a={name:e,number:+t};await h("\n            mutation acceptResetBinding($name: String!, $number: Int!) {\n                acceptResetBinding(name: $name, number: $number) {\n                    id\n                    reason\n                }\n            }\n        ",a),await this.getResetBindings(),this.setState({isRequestMaking:!1})}async rejectResetBinding(e,t){this.setState({isRequestMaking:!0});const a={name:e,number:+(t=+t)};await h("\n            mutation rejectResetBinding($name: String!, $number: Int!) {\n                rejectResetBinding(name: $name, number: $number)\n            }\n        ",a),await this.getResetBindings(),this.setState({isRequestMaking:!1})}toggleFilterDropdown(){this.setState({filterDropdownShown:!this.state.filterDropdownShown})}toggleActiveClass(e){e.target.classList.toggle("active")}toggleParentClass(e){e.target.parentNode.classList.toggle("active")}render(){const{isRequestMaking:e,existingStatuses:t,filterBy:a,filterDropdownShown:n}=this.state,{page:r}=this.props.match.params;let o=[];this.state.resetBindingRequests.map(((t,n)=>{"waiting"==t.status.toLowerCase()?t.status="на рассмотрении":"unsuccessful"==t.status.toLowerCase()?t.status="отклонён":"done"==t.status.toLowerCase()&&(t.status="принят");const r=s.createElement("div",{onClick:this.toggleActiveClass,key:new Date-new Date(t.date),className:"reset-request"},s.createElement("div",{onClick:this.toggleParentClass,className:"number"},t.id),s.createElement("div",{onClick:this.toggleParentClass,className:"reason"},t.reason),s.createElement("div",{onClick:this.toggleParentClass,className:"date"},new Date(t.date).toLocaleDateString()),s.createElement("div",{onClick:this.toggleParentClass,className:"ip"},t.ip||"localhost"),s.createElement("div",{onClick:this.toggleParentClass,className:"location"},t.location||"Москва"),s.createElement("div",{onClick:this.toggleParentClass,className:"status"},t.status),s.createElement("div",{className:"action",style:{opacity:e?0:1,pointerEvents:e?"none":"all"}},s.createElement("button",{className:"\n                                button\n                                get-request\n                                ".concat("принят"==t.status?"disabled":"","\n                            "),onClick:()=>this.acceptResetBinding(t.owner,t.number)},"принять"),s.createElement("button",{className:"\n                                button\n                                reject\n                                ".concat("отклонён"==t.status||"принят"==t.status?"disabled":"","\n                            "),onClick:()=>this.rejectResetBinding(t.owner,t.number)},"отклонить")));r&&("все"==a.toLowerCase()||"на рассмотрении"==a.toLowerCase()&&"на рассмотрении"==t.status||"принят"==a.toLowerCase()&&"принят"==t.status||"отклонён"==a.toLowerCase()&&"отклонён"==t.status)&&o.push(r)})),o=o.map(((e,t)=>{const a=15*r;if(t>=a-15&&t<a)return e}));const i=t.map((e=>s.createElement("div",{onClick:this.filterByStatus,key:e,className:"item"},e)));return s.createElement("div",{className:"reset-requests"},s.createElement("div",{className:"search-bar",style:{opacity:e?.5:1,pointerEvents:e?"none":"all"}},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.handleSearch,value:this.state.searchValue})),s.createElement("div",{className:"filter-by-status-dropdown"},s.createElement("div",{onClick:this.toggleFilterDropdown,className:"current-filter"},a,s.createElement("img",{className:"arrow",src:"/images/user-menu-arrow.png",style:{transform:"rotate(".concat(n?"180deg":0,")")}})),s.createElement("div",{className:"possible-filters",style:{maxHeight:n?"155px":0}},i)),s.createElement("button",{className:"delete-all-requests",onClick:this.deleteAllRequests},"Удалить все заявки")),s.createElement("h2",{style:{opacity:e?.5:1}},"Сброс привязки"),s.createElement(I.Z,{className:"progress-bar",style:{display:e?"block":"none"}}),s.createElement("div",{className:"reset-requests-wrap",style:{opacity:e?0:1,pointerEvents:e?"none":"all"}},s.createElement("div",{className:"heading"},s.createElement("div",{className:"number"},"№"),s.createElement("div",{className:"reason"},"причина сброса"),s.createElement("div",{className:"date"},"дата"),s.createElement("div",{className:"ip"},"ip"),s.createElement("div",{className:"location"},"локация"),s.createElement("div",{className:"status"},"статус"),s.createElement("div",{className:"action"},"действие")),s.createElement("div",{className:"requests",style:{opacity:e?0:1,pointerEvents:e?"none":"all"}},o)),s.createElement(Se,{page:r,array:o,path:"reset-binding"}))}}const wt=(0,i.EN)(gt);function Et(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function vt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(a),!0).forEach((function(t){yt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Et(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function yt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class bt extends s.Component{constructor(){super(),this.state={isRequestMaking:!1,scrollTo:0},this.createNews=this.createNews.bind(this)}componentDidUpdate(){const{scrollTo:e}=this.state,{scrollTop:t}=document.documentElement;e!=t&&this.setState({scrollTo:t})}async createNews(e){e.preventDefault(),this.setState({isRequestMaking:!0});const{title:t}=this.props.product,a=document.forms.createNews,s=a.description.value,n=a.version.value;a.description.blur(),a.version.blur();const r={change:{version:n,created:new Date,description:s},title:t};await h("\n            mutation createNews($change: ProductChangeInput!, $title: String!) {\n                createNews(change: $change, title: $title)\n            }\n        ",r);await this.props.getProducts(),await this.props.hideModal(),this.setState({isRequestMaking:!1})}render(){const{isRequestMaking:e,scrollTo:t}=this.state,{style:a}=this.props;return s.createElement("div",{className:"create-news-modal",style:vt(vt({},a),{},{top:t+150})},s.createElement("form",{onSubmit:this.createNews,name:"createNews",className:"create-news-form",style:{opacity:this.props.isRequestMaking||e?.5:a.opacity,pointerEvents:this.props.isRequestMaking||e?"none":a.pointerEvents}},s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Описание новости:"),s.createElement("textarea",{name:"description",type:"text",className:"field news-description"})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Версия:"),s.createElement("input",{name:"version",type:"text",className:"field news-version"})),s.createElement("button",{className:"save-news",type:"submit"},"Сохранить")))}}class Nt extends s.Component{constructor(){super(),this.state={products:[],productsCopy:[],isRequestMaking:!1,createNewsShown:!1,productToAddNews:{}},this.searchProducts=this.searchProducts.bind(this),this.getProducts=this.getProducts.bind(this),this.hideCreateNews=this.hideCreateNews.bind(this)}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.setState({createNewsShown:!1})}.bind(this),await this.getProducts()}async getProducts(){this.setState({isRequestMaking:!0});const e=await h("\n            query {\n                products {\n                    id\n                    title\n                    productFor\n                    imageURLdashboard\n                    changes {\n                        version\n                    }\n                }\n            }\n        ");this.setState({isRequestMaking:!1,products:e.products,productsCopy:e.products})}searchProducts(e){let t=e.target.value;t=t.toLowerCase().trim();const{productsCopy:a}=this.state,s=[];a.map((e=>{const a=e.changes.length;(e.title.toLowerCase().includes(t)||e.productFor.toLowerCase().includes(t)||a.toString().includes(t))&&s.push(e)})),""==t?this.setState({products:a}):this.setState({products:s})}hideCreateNews(){this.setState({createNewsShown:!1})}render(){const{isRequestMaking:e,createNewsShown:t,productToAddNews:a}=this.state,n=this.state.products.map((e=>s.createElement("div",{key:e.title,className:"product"},s.createElement("img",{className:"cover",src:e.imageURLdashboard}),s.createElement("div",{className:"product-title"},e.title," | ",e.productFor),s.createElement("div",{className:"content-wrap"},s.createElement("div",{className:"news-amount"},"Кол-во новостей: ",e.changes.length),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button create-news",onClick:()=>{this.setState({createNewsShown:!0,productToAddNews:e})}},"Создать новость"),s.createElement(r.rU,{className:"button view-news",to:"/admin/news/".concat(e.title,"/1")},"Просмотр новостей"))))));return s.createElement("div",{className:"news"},s.createElement(I.Z,{className:"progress-bar",style:{display:e?"block":"none"}}),s.createElement(bt,{product:a,getProducts:this.getProducts,hideModal:this.hideCreateNews,style:{opacity:t?1:0,pointerEvents:t?"all":"none"}}),s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchProducts}))),s.createElement("h2",null,"Новости"),s.createElement("div",{className:"products-wrap",style:{opacity:e?0:t?.5:1,pointerEvents:e||t?"none":"all"}},n))}}class St extends s.Component{constructor(){super(),this.state={isRequestMaking:!1},this.deleteNews=this.deleteNews.bind(this)}async deleteNews(){this.setState({isRequestMaking:!0});const{product:e,newsToDelete:t}=this.props,a={title:e.title,changeTitle:t.id};await h("\n            mutation deleteNews($title: String!, $changeTitle: Int!) {\n                deleteNews(title: $title, changeTitle: $changeTitle)\n            }\n        ",a),await this.props.getNews(),await this.props.hideModal(),this.setState({isRequestMaking:!1})}render(){const{isRequestMaking:e}=this.state,{style:t,newsToDelete:a,hideModal:n}=this.props;return s.createElement("div",{style:{opacity:e?0:t.opacity,pointerEvents:e?"none":t.pointerEvents,transform:t.transform},className:"confirm-action"},s.createElement("div",{className:"heading"},s.createElement("h2",null,"Подтвердите действие"),s.createElement(b.Z,{className:"close-modal",onClick:n})),s.createElement("div",{className:"content"},"Вы действительно хотите удалить новость версии ",a.version),s.createElement("div",{className:"buttons"},s.createElement("div",{className:"button agree",onClick:this.deleteNews},"Да"),s.createElement("div",{className:"button refuse",onClick:n},"Нет")))}}class ft extends s.Component{constructor(){super(),this.state={product:{},newsToDelete:{},isRequestMaking:!0,deleteNewsShown:!1,changes:[],changesCopy:[]},this.deleteAllNews=this.deleteAllNews.bind(this),this.hideDeleteNews=this.hideDeleteNews.bind(this),this.getNews=this.getNews.bind(this)}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&this.hideDeleteNews()}.bind(this),await this.getNews()}async getNews(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params,t={title:e},{getProduct:a}=await h("\n            query getProduct($title: String!) {\n                getProduct(title: $title) {\n                    title\n                    costPerDay\n                    id\n                    productFor\n                    imageURLdashboard\n                    changes {\n                        id\n                        version\n                        created\n                        description\n                    }\n                }\n            }\n        ",t);this.setState({isRequestMaking:!1,product:a,changes:a.changes,changesCopy:a.changes})}toggleClass(e){e.target.childNodes[0].classList.toggle("active")}async deleteAllNews(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params;await h("\n            mutation deleteAllNews($title: String!) {\n                deleteAllNews(title: $title)\n            }\n        ",{title:e}),await this.getNews(),this.setState({isRequestMaking:!1})}hideDeleteNews(){this.setState({deleteNewsShown:!1})}searchProducts(e){const{title:t}=this.props.match.params;this.props.history.push("/admin/news/".concat(t,"/1"))}render(){const{isRequestMaking:e,product:t,deleteNewsShown:a,newsToDelete:n,changes:r}=this.state,{page:o}=this.props.match.params,i=r.map(((e,t)=>{const n=15*o;if(t<n&&t>=n-15)return s.createElement("div",{onClick:this.toggleClass,key:e.id,className:"change"},s.createElement("div",{className:"description"},e.description),s.createElement("div",{className:"version"},e.version),s.createElement("div",{className:"date"},new Date(e.created).toLocaleDateString()),s.createElement("div",{className:"action"},s.createElement("button",{onClick:t=>{t.stopPropagation(),this.setState({deleteNewsShown:!0,newsToDelete:e})},style:{pointerEvents:a?"none":"all"},className:"button delete"},"Удалить")))}));return s.createElement("div",{className:"product-news"},s.createElement(I.Z,{className:"progress-bar",style:{display:e?"block":"none"}}),s.createElement(St,{style:{opacity:a?1:0,pointerEvents:a?"all":"none",transform:"translateY(".concat(a?0:"-150%",")")},product:t,newsToDelete:n,hideModal:this.hideDeleteNews,getNews:this.getNews}),s.createElement("div",{className:"search-bar",style:{opacity:e?0:a?.5:1,pointerEvents:a?"none":"all"}},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchProducts}))),s.createElement("h2",{style:{opacity:e?0:a?.5:1,pointerEvents:a?"none":"all"}},"Просмотр новостей продукта ",s.createElement("span",{style:{opacity:e?0:1,pointerEvents:e?"none":"all"}},this.props.match.params.title)),s.createElement("div",{className:"news-wrap",style:{opacity:e?0:a?.5:1,pointerEvents:a?"none":"all"}},s.createElement("div",{className:"table"},s.createElement("div",{className:"heading"},s.createElement("div",{className:"description"},"Описание"),s.createElement("div",{className:"version"},"Версия"),s.createElement("div",{className:"date"},"Дата"),s.createElement("div",{className:"action"},"Действие")),s.createElement("div",{className:"changes"},i),s.createElement(Se,{page:o,array:i,path:"news/".concat(t.title)})),s.createElement("div",{className:"product"},s.createElement("img",{className:"cover",src:t.imageURLdashboard}),s.createElement("div",{className:"product-title"},t.title," | ",t.productFor),s.createElement("div",{className:"content-wrap"},s.createElement("div",{className:"news-amount"},"Кол-во новостей: ",r.length),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button delete-all-news",onClick:this.deleteAllNews},"Удалить все новости"))))))}}const Ct=(0,i.EN)(ft);function kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Pt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(a),!0).forEach((function(t){Dt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):kt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Dt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Mt extends s.Component{constructor(){super(),this.state={isRequestMaking:!1,scrollTo:0},this.handleDeleteSort=this.handleDeleteSort.bind(this)}componentDidUpdate(e,t){const{scrollTop:a}=document.documentElement;t.scrollTo!=a&&this.setState({scrollTo:a})}async handleDeleteSort(){this.setState({isRequestMaking:!0});await h("\n            mutation deleteAnswerSort($sort: String!) {\n                deleteAnswerSort(sort: $sort)\n            }\n        ",{sort:this.props.sortToDelete.sort});await this.props.getAnswers(),await this.props.hideAgreeToDelete(),this.setState({isRequestMaking:!1})}render(){const{sortToDelete:e,style:t}=this.props,{isRequestMaking:a,scrollTo:n}=this.state;return s.createElement("div",{style:Pt(Pt({},t),{},{top:n+150}),className:"confirm-action"},s.createElement("div",{className:"heading"},s.createElement("h3",null,"Подтвердите действие"),s.createElement(b.Z,{className:"close-modal",onClick:this.props.hideAgreeToDelete})),s.createElement("div",{className:"content"},"Вы действительно хотите удалить раздел ",e.sort),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button agree",onClick:async()=>{await this.handleDeleteSort(),this.props.hideAgreeToDelete()},style:{pointerEvents:a?"none":"all"}},"Да"),s.createElement("button",{className:"button refuse",style:{pointerEvents:a?"none":"all"},onClick:this.props.hideAgreeToDelete},"Нет")))}}class At extends s.Component{constructor(){super(),this.state={isRequestMaking:!1,answerTitleValue:"",scrollTo:0},this.handleSubmit=this.handleSubmit.bind(this),this.handleAnswerTitleChange=this.handleAnswerTitleChange.bind(this)}componentDidUpdate(e,t){const{scrollTop:a}=document.documentElement;t.scrollTo!=a&&this.setState({scrollTo:a})}async handleSubmit(e){e.preventDefault(),this.setState({isRequestMaking:!0});const t=document.forms.createSort.sortTitle;t.blur();const a=await h("\n            mutation createAnswerSort($sort: String!) {\n                createAnswerSort(sort: $sort) {\n                    answers {\n                        usefulRate\n                        title\n                        rateCount\n                        answer\n                    }\n                    sort\n                }\n            }\n        ",{sort:t.value});console.log("sort"),a?(await this.props.getAnswers(),this.props.hideModal(),this.setState({isRequestMaking:!1})):t.focus()}handleAnswerTitleChange(e){e.target.value.toLowerCase().includes("/")||this.setState({answerTitleValue:e.target.value})}render(){const{createSortShown:e}=this.props,{isRequestMaking:t,scrollTo:a}=this.state;return s.createElement("div",{className:"create-sort-modal",style:{opacity:e?1:0,transform:"translateY(".concat(e?0:"-150%",")"),top:e?"".concat(30+a,"px"):0,pointerEvents:e?"all":"none",pointerEvents:t?"none":"all"}},s.createElement("form",{onSubmit:this.handleSubmit,name:"createSort",className:"create-sort"},s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Наименование раздела:"),s.createElement("input",{name:"sortTitle",onChange:this.handleAnswerTitleChange,value:this.state.answerTitleValue})),s.createElement("button",{className:"add",type:"submit"},"Добавить")))}}class Rt extends s.Component{constructor(){super(),this.state={answersFAQ:[],answersFAQCopy:[],isRequestMaking:!0,createSortShown:!1,agreeToDeleteShown:!1,sortToDelete:{}},this.showCreateSortModal=this.showCreateSortModal.bind(this),this.hideCreateSortModal=this.hideCreateSortModal.bind(this),this.hideAgreeToDelete=this.hideAgreeToDelete.bind(this),this.showAgreeToDelete=this.showAgreeToDelete.bind(this),this.getAnswers=this.getAnswers.bind(this),this.searchTabs=this.searchTabs.bind(this)}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&(this.hideCreateSortModal(),this.hideAgreeToDelete())}.bind(this),await this.getAnswers()}async getAnswers(){this.setState({isRequestMaking:!0});const e=await h("\n            query {\n                getAnswers {\n                    sort\n                    answers {\n                        title\n                        answer\n                        rateCount\n                        usefulRate\n                    }\n                }\n            }\n        ");this.setState({answersFAQ:e.getAnswers,answersFAQCopy:e.getAnswers,isRequestMaking:!1})}showCreateSortModal(){this.setState({createSortShown:!0})}hideCreateSortModal(){this.setState({createSortShown:!1})}hideAgreeToDelete(){this.setState({agreeToDeleteShown:!1})}showAgreeToDelete(){this.setState({agreeToDeleteShown:!0})}searchTabs(e){let t=e.target.value;t=t.toLowerCase().trim();const{answersFAQCopy:a}=this.state,s=[];a.map((e=>{e.sort.toLowerCase().includes(t)&&s.push(e)})),console.log(s),""==t?this.setState({answersFAQ:a}):this.setState({answersFAQ:s})}render(){const{answersFAQ:e,isRequestMaking:t,createSortShown:a,agreeToDeleteShown:n,sortToDelete:o}=this.state,i=e.map(((e,t)=>s.createElement("div",{key:t,className:"answer"},s.createElement("h3",null,e.sort),s.createElement("span",{className:"decisions-amount"},"Кол-во решений: ",e.answers.length),s.createElement("div",{className:"buttons"},s.createElement(r.rU,{to:"/admin/FAQ/".concat(e.sort,"/1"),className:"button view"},"Просмотр"),s.createElement("button",{className:"button delete",onClick:()=>{this.setState({sortToDelete:e}),this.showAgreeToDelete()}},"Удалить")))));return s.createElement("div",{className:"FAQ"},s.createElement(I.Z,{style:{display:t?"block":"none"},className:"progress-bar"}),s.createElement(At,{createSortShown:a,getAnswers:this.getAnswers,hideModal:this.hideCreateSortModal}),s.createElement(Mt,{sortToDelete:o,getAnswers:this.getAnswers,hideAgreeToDelete:this.hideAgreeToDelete,style:{opacity:n?1:0,pointerEvents:n?"all":"none",transform:"translateY(".concat(n?0:"-155%",")")}}),s.createElement("div",{className:"FAQ-wrap",style:{pointerEvents:n||a?"none":"all",opacity:n||a?.5:1,userSelect:n||a?"none":"text"}},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchTabs}))),s.createElement("h2",null,"FAQ"),s.createElement("div",{className:"FAQ-sorts-wrap",style:{opacity:t?0:1}},s.createElement("div",{className:"sorts-wrap"},s.createElement("div",{className:"add-FAQ-sort"},s.createElement("button",{onClick:this.showCreateSortModal,className:"plus-wrap"},s.createElement("img",{className:"plus",src:"/images/answer-not-found.png"})),s.createElement("h3",null,"Добавить раздел"),s.createElement("span",{className:"add-new-sort"},"Добавление нового раздела в FAQ")),i))))}}function Ot(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function Lt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(a),!0).forEach((function(t){qt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ot(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function qt(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class Ut extends s.Component{constructor(){super(),this.state={isRequestMaking:!1},this.deleteAnswer=this.deleteAnswer.bind(this)}async deleteAnswer(){this.setState({isRequestMaking:!0});const{match:e,answer:t,hideModal:a,getAnswers:s}=this.props,n={sort:e.params.title,title:t.title};await h("\n            mutation deleteAnswer($title: String!, $sort: String!) {\n                deleteAnswer(title: $title, sort: $sort)\n            }\n        ",n),await a(),await s(),this.setState({isRequestMaking:!1})}render(){const{modalShown:e,hideModal:t,answer:a}=this.props,{isRequestMaking:n}=this.state;return s.createElement("div",{className:"confirm-action delete-answer",style:{opacity:e?1:0,transform:"translateY(".concat(e?0:"-150%",")"),pointerEvents:n?"none":"all"}},s.createElement("div",{className:"heading"},s.createElement("h4",null,"Подтвердите действие"),s.createElement(b.Z,{className:"close-modal",onClick:t})),s.createElement("div",{className:"content"},"Вы действительно хотите удалить решение с названием ",a.title),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"agree button",onClick:this.deleteAnswer},"Да"),s.createElement("button",{className:"refuse button",onClick:t},"Нет")))}}class Tt extends s.Component{constructor(){super(),this.state={isRequestMaking:!1},this.createAnswer=this.createAnswer.bind(this)}async createAnswer(e){e.preventDefault(),this.setState({isRequestMaking:!0});const t=document.forms.addAnswer,a=t.title,s=t.description;a.blur(),s.blur();const n={sort:this.props.sort.sort,answer:{title:a.value,answer:s.value}};await h("\n            mutation createAnswer($sort: String!, $answer: AnswerInput!) {\n                createAnswer(sort: $sort, answer: $answer) {\n                    title\n                    answer\n                    usefulRate\n                    rateCount\n                    dateOfCreation\n                }\n            }\n        ",n);await this.props.hideModal(),await this.props.getAnswers(),this.setState({isRequestMaking:!1})}render(){const{isRequestMaking:e}=this.state,{modalShown:t}=this.props;return s.createElement("div",{className:"create-answer-modal",style:{pointerEvents:e?"none":"all",opacity:t?1:0,transform:"translateY(".concat(t?0:"-145%",")")}},s.createElement("form",{onSubmit:this.createAnswer,name:"addAnswer",className:"add-answer"},s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Наименование решения:"),s.createElement("input",{name:"title",className:"answer-title"})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Описание:"),s.createElement("textarea",{name:"description",className:"answer-description"})),s.createElement("button",{className:"add"},"Добавить")))}}class xt extends s.Component{constructor(){super(),this.state={sort:{},sortCopy:{},isRequestMaking:!0,addAnswerShown:!1,deleteAnswerShown:!1,answerToDelete:{}},this.showAddAnswer=this.showAddAnswer.bind(this),this.hideAddAnswer=this.hideAddAnswer.bind(this),this.showDeleteAnswer=this.showDeleteAnswer.bind(this),this.hideDeleteAnswer=this.hideDeleteAnswer.bind(this),this.getAnswers=this.getAnswers.bind(this),this.searchTabs=this.searchTabs.bind(this)}async componentDidMount(){window.onkeydown=function(e){27==e.keyCode&&(this.hideAddAnswer(),this.hideDeleteAnswer())}.bind(this),await this.getAnswers()}async getAnswers(){this.setState({isRequestMaking:!0});const{title:e}=this.props.match.params,t=await h("\n            query getSort($sort: String!) {\n                getSort(sort: $sort) {\n                    sort\n                    answers {\n                        title\n                        answer\n                        usefulRate\n                        rateCount\n                        dateOfCreation\n                    }\n                }\n            }\n        ",{sort:e});this.setState({sort:t.getSort,sortCopy:t.getSort,isRequestMaking:!1})}showAddAnswer(){this.setState({addAnswerShown:!0})}hideAddAnswer(){this.setState({addAnswerShown:!1})}showDeleteAnswer(){this.setState({deleteAnswerShown:!0})}hideDeleteAnswer(){this.setState({deleteAnswerShown:!1})}searchTabs(e){let t=e.target.value;t=t.toLowerCase().trim();const{sortCopy:a,sort:s}=this.state;this.props.history.push("/admin/FAQ/".concat(s.sort,"/1"));const n=[];a.answers.map((e=>{(e.title.toLowerCase().includes(t)||e.answer.toLowerCase().includes(t))&&n.push(e)})),""==t?this.setState({sort:a}):this.setState({sort:Lt(Lt({},s),{},{answers:n})})}toggleActiveClass(e){e.target.classList.toggle("active")}render(){const{isRequestMaking:e,sort:t,sortCopy:a,addAnswerShown:n,deleteAnswerShown:r,answerToDelete:o}=this.state,{page:i}=this.props.match.params,c=t.answers&&t.answers.map(((e,t)=>{const a=15*i;if(t<a&&t>=a-15)return s.createElement("div",{onClick:this.toggleActiveClass,key:t,className:"answer"},s.createElement("div",{className:"description"},e.answer),s.createElement("div",{className:"title"},e.title),s.createElement("div",{className:"date"},new Date(e.dateOfCreation).toLocaleDateString()),s.createElement("div",{className:"action"},s.createElement("button",{className:"button delete",onClick:t=>{t.stopPropagation(),this.setState({answerToDelete:e}),this.showDeleteAnswer()}},"Удалить")))}));return s.createElement("div",{className:"view-answers"},s.createElement(Tt,{sort:t,modalShown:n,getAnswers:this.getAnswers,hideModal:this.hideAddAnswer}),s.createElement(Ut,{modalShown:r,hideModal:this.hideDeleteAnswer,answer:o,match:this.props.match,getAnswers:this.getAnswers}),s.createElement(I.Z,{className:"progress-bar",style:{display:e?"block":"none"}}),s.createElement("div",{className:"answers-wrap",style:{opacity:e?0:n||r?.5:1,pointerEvents:e||n||r?"none":"all",userSelect:n?"none":"text"}},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.searchTabs}))),s.createElement("h2",null,"Просмотр FAQ раздела ",t.title),s.createElement("div",{className:"view-answers-wrap"},s.createElement("div",{className:"table"},s.createElement("div",{className:"heading"},s.createElement("div",{className:"description"},"Описание"),s.createElement("div",{className:"title"},"Название"),s.createElement("div",{className:"date"},"Дата"),s.createElement("div",{className:"action"},"Действие")),s.createElement("div",{className:"answers"},c),s.createElement(Se,{page:i,array:Object.keys(t).length>0&&c,path:"FAQ/".concat(t.sort&&t.sort)})),s.createElement("div",{className:"sort"},s.createElement("div",{className:"sort-title"},s.createElement("h3",null,a.sort),s.createElement("span",{className:"decisions-amount"},"Кол-во решений ",a.answers&&a.answers.length)),s.createElement("div",{className:"buttons"},s.createElement("button",{className:"button add-answer",onClick:this.showAddAnswer},"Добавить"))))))}}const $t=(0,i.EN)(xt);class jt extends s.Component{constructor(){super(),this.state={requestMaking:!1,searchLogs:"",searchByAction:"",logs:[],logsCopy:[]},this.handleSearchChange=this.handleSearchChange.bind(this),this.handleActionChange=this.handleActionChange.bind(this),this.cleanLogs=this.cleanLogs.bind(this),this.getInjectLogs=this.getInjectLogs.bind(this)}async componentDidMount(){await this.getInjectLogs()}async getInjectLogs(){this.setState({requestMaking:!0});const e=(await h("\n            query {\n                injectLogs {\n                    name\n                    location\n                    ip\n                    idSteam\n                    platform\n                    action\n                    date\n                }\n            }\n        ")).injectLogs;this.setState({logs:e,logsCopy:e,requestMaking:!1})}filterLog(e,t){return t=t.toLowerCase(),e.name.toLowerCase().includes(t)||e.location.toLowerCase().includes(t)||e.ip.includes(t)||e.idSteam.toLowerCase().includes(t)?e:null}handleSearchChange(e){this.props.history.push("/admin/inject-logs/1"),this.setState({searchLogs:e.target.value},(()=>{let{searchLogs:e,searchByAction:t,logsCopy:a}=this.state;e=e.toLowerCase();const s=[];t=t.toLowerCase(),a.map((a=>{let n=null;if(""!=e&&""!=t){let n=this.filterLog(a,e);n&&n.action.toLowerCase().includes(t)&&s.push(n)}else""!=e?(n=this.filterLog(a,e),n&&s.push(a)):""!=t&&(a.action.toLowerCase().includes(t)&&(n=!0),n&&s.push(a))})),""==t&&""==e?this.setState({logs:a}):this.setState({logs:s})}))}handleActionChange(e){this.setState({searchByAction:e.target.value},(()=>{let{searchByAction:e,searchLogs:t,logsCopy:a}=this.state;const s=[];e=e.toLowerCase(),a.map((a=>{let n=null;if(""!=t&&""!=e){let n=this.filterLog(a,t);n&&n.action.toLowerCase().includes(e)&&s.push(n)}else""!=t?(n=this.filterLog(a,t),n&&s.push(a)):""!=e&&(a.action.toLowerCase().includes(e)&&(n=!0),n&&s.push(a))})),""==e&&""==t?this.setState({logs:a}):this.setState({logs:s})}))}toggleActiveClass(e){e.target.classList.toggle("active")}toggleParentClass(e){e.target.parentNode.classList.toggle("active")}async cleanLogs(){this.setState({requestMaking:!0});let e=await h("\n            mutation {\n                cleanInjectLogs {\n                    message\n                    success\n                }\n            }\n        ");e=e.cleanInjectLogs;const{success:t,message:a}=e;l(t?"info":"error",a),await this.getInjectLogs(),this.setState({requestMaking:!1})}render(){const{requestMaking:e,searchLogs:t,searchByAction:a}=this.state,n=this.props.match.params.page,r=15*(n-1),o=r+15,i=this.state.logs.map(((e,t)=>{const{name:a,date:n,location:i,ip:c,idSteam:l,platform:m,action:d}=e;if(r<=t&&t<o)return s.createElement("div",{className:"log",onClick:this.toggleActiveClass,key:t},s.createElement("div",{onClick:this.toggleParentClass,className:"date"},new Date(n).toLocaleString()),s.createElement("div",{onClick:this.toggleParentClass,className:"login"},a),s.createElement("div",{onClick:this.toggleParentClass,className:"location"},i),s.createElement("div",{onClick:this.toggleParentClass,className:"ip"},c),s.createElement("div",{onClick:this.toggleParentClass,className:"id-steam"},l),s.createElement("div",{onClick:this.toggleParentClass,className:"platform"},m),s.createElement("div",{onClick:this.toggleParentClass,className:"action"},d))}));return s.createElement("div",{className:"inject-logs logs"},s.createElement(I.Z,{style:{display:e?"block":"none"},className:"progress-bar"}),s.createElement("div",{className:"search",style:{opacity:e?.5:1,pointerEvents:e?"none":"all"}},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field by-everything"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.handleSearchChange,value:t}))),s.createElement("div",{className:"search-bar by-actions"},s.createElement("div",{className:"search-field action-search"},s.createElement("input",{placeholder:"Действие",onChange:this.handleActionChange,value:a}))),s.createElement("button",{onClick:this.cleanLogs,className:"clean-logs"},"Очистить логи")),s.createElement("h2",{style:{opacity:e?.5:1,pointerEvents:e?"none":"all"}},"Логи инжекта"),s.createElement("div",{className:"table",style:{opacity:e?.5:1,pointerEvents:e?"none":"all"}},s.createElement("div",{className:"heading"},s.createElement("div",{className:"date"},"Дата"),s.createElement("div",{className:"login"},"Логин"),s.createElement("div",{className:"location"},"Локация"),s.createElement("div",{className:"ip"},"IP"),s.createElement("div",{className:"id-steam"},"ID steam"),s.createElement("div",{className:"platform"},"Платформа"),s.createElement("div",{className:"action"},"Действие")),s.createElement("div",{className:"table-content"},i)),s.createElement(Se,{array:i,path:"inject-logs",page:n}))}}const Ft=(0,i.EN)(jt);class It extends s.Component{constructor(){super(),this.state={requestMaking:!1,searchLogs:"",searchByAction:"",logs:[],logsCopy:[]},this.handleSearchChange=this.handleSearchChange.bind(this),this.cleanLogs=this.cleanLogs.bind(this),this.getCrashLogs=this.getCrashLogs.bind(this)}async componentDidMount(){await this.getCrashLogs()}async getCrashLogs(){this.setState({requestMaking:!0});const e=(await h("\n            query {\n                crashLogs {\n                    name\n                    codeError\n                    errorDesc\n                    playingTime\n                    date\n                    full_log_excetion\n                }\n            }\n        ")).crashLogs;this.setState({logs:e,logsCopy:e,requestMaking:!1})}filterLog(e,t){return t=t.toLowerCase(),e.name.toLowerCase().includes(t)||e.codeError.toLowerCase().includes(t)||e.errorDesc.toLowerCase().includes(t)||e.playingTime.toLowerCase().includes(t)?e:null}handleSearchChange(e){this.setState({searchLogs:e.target.value},(()=>{const{searchLogs:e,logsCopy:t}=this.state,a=[];t.map((t=>{this.filterLog(t,e)&&a.push(t)})),""==e?this.setState({logs:t}):this.setState({logs:a})}))}async cleanLogs(){this.setState({requestMaking:!0});let e=await h("\n            mutation {\n                cleanCrashLogs {\n                    message\n                    success\n                }\n            }\n        ");e=e.cleanCrashLogs;const{success:t,message:a}=e;l(t?"info":"error",a),await this.getCrashLogs(),this.setState({requestMaking:!1})}toggleActiveClass(e){e.target.classList.toggle("active")}toggleParentClass(e){e.target.parentNode.classList.toggle("active")}render(){const{requestMaking:e,searchLogs:t}=this.state,{page:a}=this.props.match.params,n=15*(a-1),r=n+15,o=this.state.logs.map(((e,t)=>{const{date:a,name:o,codeError:i,errorDesc:c,playingTime:l}=e;let m=encodeURIComponent(e.full_log_excetion);if(n<=t&&t<r)return s.createElement("div",{className:"log",onClick:this.toggleActiveClass,key:t},s.createElement("div",{onClick:this.toggleParentClass,className:"date"},new Date(a).toLocaleString()),s.createElement("div",{onClick:this.toggleParentClass,className:"login"},o),s.createElement("div",{onClick:this.toggleParentClass,className:"code-error"},i),s.createElement("div",{onClick:this.toggleParentClass,className:"error-description"},c),s.createElement("div",{onClick:this.toggleParentClass,className:"playing-time"},l),s.createElement("div",{className:"action"},s.createElement("a",{className:"button",href:"data:application/octet-stream,"+m,download:"full_log_excetion.txt"},"Скачать")))}));return s.createElement("div",{className:"crash-logs logs"},s.createElement(I.Z,{style:{display:e?"block":"none"},className:"progress-bar"}),s.createElement("div",{className:"search",style:{opacity:e?.5:1,pointerEvents:e?"none":"all"}},s.createElement("div",{className:"search-bar"},s.createElement("div",{className:"search-field by-everything"},s.createElement("img",{src:"/images/search-icon-admin.png"}),s.createElement("input",{type:"text",placeholder:"Search here",onChange:this.handleSearchChange,value:t}))),s.createElement("button",{onClick:this.cleanLogs,className:"clean-logs"},"Очистить логи")),s.createElement("h2",{style:{opacity:e?.5:1,pointerEvents:e?"none":"all"}},"Логи крашей"),s.createElement("div",{className:"table",style:{opacity:e?.5:1,pointerEvents:e?"none":"all"}},s.createElement("div",{className:"heading"},s.createElement("div",{className:"date"},"Дата"),s.createElement("div",{className:"login"},"Логин"),s.createElement("div",{className:"code-error"},"Код ошибки"),s.createElement("div",{className:"error-description"},"Описание ошибки"),s.createElement("div",{className:"playing-time"},"Время в игре"),s.createElement("div",{className:"action"},"Действие")),s.createElement("div",{className:"table-content"},o),s.createElement(Se,{array:o,path:"crash-logs",page:a})))}}const Bt=(0,i.EN)(It);class Yt extends s.Component{constructor(){super(),this.state={products:[],versionLoader:"",isRequestMaking:!0,apiLoaderEndpoint:"https://zeer-marketplace-api-macsik121.herokuapp.com/api_loader"},this.handleCostChange=this.handleCostChange.bind(this),this.saveProductChanges=this.saveProductChanges.bind(this),this.handleOnclickURLchange=this.handleOnclickURLchange.bind(this),this.handleLoaderChange=this.handleLoaderChange.bind(this),this.updateVersionLoader=this.updateVersionLoader.bind(this)}async componentDidMount(){this.setState({isRequestMaking:!0});const e=await h("\n            query {\n                products {\n                    id\n                    costPerDayInfo\n                    title\n                    locationOnclick\n                }\n            }\n        ");await this.getVersionLoader();const{products:t}=e;this.setState({products:t,isRequestMaking:!1})}async getVersionLoader(){this.setState({isRequestMaking:!0});const{apiLoaderEndpoint:e}=this.state;let t=await d()(e+"/version_loader",{method:"GET"});t=await t.json(),t=t.version_loader,this.setState({isRequestMaking:!1,versionLoader:t})}async saveProductChanges(e,t,a,s){e.preventDefault(),this.setState({isRequestMaking:!0});const n=document.forms["saveChanges"+t]["selectedFile"+t].files[0];n&&await this.uploadBG(t,n);const r={title:t,costPerDayInfo:a,locationOnclick:s};await h("\n            mutation (\n                $title: String!,\n                $costPerDayInfo: Int!,\n                $locationOnclick: String!\n            ) {\n                saveCostChanges(\n                    title: $title,\n                    costPerDayInfo: $costPerDayInfo,\n                    locationOnclick: $locationOnclick\n                )\n            }\n        ",r);this.setState({isRequestMaking:!1})}async uploadBG(e,t){this.setState({isRequestMaking:!0});const a={title:e,imageURL:"/upload-images/"+(t=new File([t],"".concat(e,"_")+t.name)).name},s=new FormData;s.append("mainBG",t),await d()("https://zeer-marketplace-ui-macsik121.herokuapp.com/uploaded-images",{method:"POST",body:s}),await h("\n            mutation updateProductBG($title: String!, $imageURL: String!) {\n                updateProductBG(title: $title, imageURL: $imageURL)\n            }\n        ",a),this.setState({isRequestMaking:!1})}handleCostChange(e,t){const{title:a}=t,{products:s}=this.state;s.map((t=>{if(t.title==a){const a=+e.target.value;t.costPerDayInfo=isNaN(a)?0:a}})),this.setState({products:s})}handleOnclickURLchange(e,t){const{title:a}=t,{products:s}=this.state;s.map((t=>{t.title==a&&(t.locationOnclick=e.target.value)})),this.setState({products:s})}handleLoaderChange(e){this.setState({versionLoader:e.target.value})}async updateVersionLoader(e){e.preventDefault(),this.setState({isRequestMaking:!0});const t={version:document.forms.loaderVersion.loaderVersion.value};let{changeLoaderVersion:{message:a,success:s}}=await h("\n            mutation changeLoaderVersion($version: String!) {\n                changeLoaderVersion(version: $version) {\n                    message\n                    success\n                }\n            }\n        ",t);l(s?"info":"error",a),await this.getVersionLoader(),this.setState({isRequestMaking:!1})}render(){const{isRequestMaking:e,versionLoader:t}=this.state,a=this.state.products.map(((e,t)=>s.createElement("div",{key:e.id,className:"product"},s.createElement("h3",null,"Товар №",t+1),s.createElement("form",{onSubmit:t=>this.saveProductChanges(t,e.title,e.costPerDayInfo,e.locationOnclick),name:"saveChanges".concat(e.title),className:"edit-product"},s.createElement("button",{type:"button",className:"upload-bg button"},"Залить аву",s.createElement("input",{type:"file",className:"select-file",name:"selectedFile".concat(e.title)})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Цена от:"),s.createElement("input",{type:"text",className:"field",name:"costFrom",value:e.costPerDayInfo,onChange:t=>this.handleCostChange(t,e)})),s.createElement("div",{className:"field-wrap"},s.createElement("label",null,"Куда ведёт при нажатии:"),s.createElement("input",{type:"text",className:"field",name:"clickLink",value:e.locationOnclick,onChange:t=>this.handleOnclickURLchange(t,e)})),s.createElement("button",{type:"submit",className:"save-changes button"},"Сохранить")))));return s.createElement("div",{className:"settings"},s.createElement(I.Z,{className:"progress-bar",style:{display:e?"block":"none"}}),s.createElement("h2",null,"Настройки"),s.createElement("div",{className:"settings-wrap",style:{opacity:e?0:1,pointerEvents:e?"none":"all"}},s.createElement("div",{className:"loader-action"},s.createElement("form",{className:"action create-loader",name:"loaderVersion",onSubmit:this.updateVersionLoader},s.createElement("h3",null,"Версия лоадера"),s.createElement("input",{type:"text",name:"loaderVersion",className:"loader-version field",value:t,onChange:this.handleLoaderChange}),s.createElement("button",{className:"button save",type:"submit"},"Сохранить"))),s.createElement("div",{className:"products-action"},s.createElement("div",{className:"edit-products"},a))))}}class _t extends s.Component{constructor(){super(),this.state={userDropdownShown:!1,userAvatar:{background:""},statisticsShown:!1,user:{},users:[],SearchToRender:null,productEditType:"edit",isRequestMaking:!1,adminPanelMounted:!1,navLinks:[{path:"statistics",title:"Статистика",component:Ne},{path:"users/:page",title:"Пользователи",component:ke},{path:"logs/:page",title:"Логи действий",component:xe},{path:"keys",title:"Ключи",component:Ye},{path:"promocodes",title:"Промокоды",component:Qe},{path:"products",title:"Продукты",component:ct},{path:"reset-binding/:page",title:"Сброс привязки",component:wt},{path:"news",title:"Новости",component:Nt},{path:"FAQ",title:"FAQ",component:Rt},{path:"inject-logs/:page",title:"Логи инжекта",component:Ft},{path:"crash-logs/:page",title:"Логи крашей",component:Bt},{path:"settings",title:"Настройки",component:Yt}]},this.toggleUserDropdown=this.toggleUserDropdown.bind(this),this.hideUserDropdown=this.hideUserDropdown.bind(this),this.logout=this.logout.bind(this),this.renderSearchBar=this.renderSearchBar.bind(this),this.setEditType=this.setEditType.bind(this),this.getUser=this.getUser.bind(this),this.updateAvatar=this.updateAvatar.bind(this)}async componentDidMount(){this.setState({adminPanelMounted:!0}),this.props.getUser();const e=localStorage.getItem("token"),t=(0,o.Z)(e);if(""==(await h("\n            query user($name: String!) {\n                user(name: $name) {\n                    email\n                    name\n                    id\n                    status {\n                        isAdmin\n                        isBanned\n                        simpleUser\n                    }\n                }\n            }\n        ",{name:t.name})).name)return void this.props.history.push("/");const a={};t.avatar&&t.avatar.includes("#")?(a.background=t.avatar,t.nameFirstChar=t.name.substring(0,2)):(a.background='url("'.concat(t.avatar,'") center/cover no-repeat'),t.nameFirstChar=""),this.setState({userAvatar:a,user:t})}updateAvatar(){const e=(0,o.Z)(localStorage.getItem("token")),t={};e.avatar&&e.avatar.includes("#")?(t.background=e.avatar,e.nameFirstChar=e.name.substring(0,2)):(t.background='url("'.concat(e.avatar,'") center/cover no-repeat'),e.nameFirstChar=""),this.setState({userAvatar:t,user:e})}logout(){this.props.history.push("/dashboard")}toggleUserDropdown(){this.setState({userDropdownShown:!this.state.userDropdownShown})}hideUserDropdown(){this.setState({userDropdownShown:!1})}renderSearchBar(e){this.setState({SearchToRender:e})}setEditType(e){this.setState({productEditType:e})}getUser(){const e=localStorage.getItem("token");localStorage.setItem("token",e),this.setState({user:(0,o.Z)(e)})}render(){const{userDropdownShown:e,userAvatar:t,user:a,SearchToRender:n,isRequestMaking:o,adminPanelMounted:c}=this.state,l=this.state.navLinks.map((e=>{if(e.path.toLowerCase().includes(":page")){let t=e.path.split(":");return t.pop(),s.createElement(r.OL,{key:e.title,to:"/admin/".concat(t)},e.title,s.createElement("div",{className:"border"}))}return s.createElement(r.OL,{key:e.title,to:"/admin/".concat(e.path)},e.title,s.createElement("div",{className:"border"}))})),m=this.state.navLinks.map((e=>"products"==e.path?s.createElement(i.AW,{path:"/admin/".concat(e.path),render:()=>s.createElement(e.component,{setEditType:this.setEditType}),key:e.title}):s.createElement(i.AW,{path:"/admin/".concat(e.path),render:()=>s.createElement(e.component,{SearchToRender:n,renderSearchBar:this.renderSearchBar}),key:e.title})));return s.createElement("div",{className:"admin-panel"},s.createElement(I.Z,{className:"progress-bar",style:{display:o?"block":"none"}}),s.createElement("div",{className:"admin-panel-wrap",style:{opacity:o?.5:c?1:0,pointerEvents:o?"none":"all"}},s.createElement("div",{className:"header"},s.createElement("div",{className:"heading"},s.createElement(r.rU,{className:"admin-title",to:"/admin/statistics"},"Админ панель"),n&&n),s.createElement(ue,{user:a,userAvatar:t,userDropdownShown:e,hiddenUserDropdown:this.hideUserDropdown,toggleUserDropdown:this.toggleUserDropdown,logout:this.logout,_this:this})),s.createElement("div",{className:"main"},s.createElement("nav",{className:"nav"},s.createElement(r.rU,{to:"/admin/statistics"},s.createElement("img",{src:"/images/zeer-logo.png",className:"logo"})),l),s.createElement("div",{className:"page"},s.createElement(i.rs,null,s.createElement(i.l_,{exact:!0,from:"/admin",to:"/admin/statistics"}),s.createElement(i.l_,{exact:!0,from:"/admin/users",to:"/admin/users/1"}),s.createElement(i.l_,{exact:!0,from:"/admin/logs",to:"/admin/logs/1"}),s.createElement(i.l_,{exact:!0,from:"/admin/reset-binding",to:"/admin/reset-binding/1"}),s.createElement(i.l_,{exact:!0,from:"/admin/inject-logs",to:"/admin/inject-logs/1"}),s.createElement(i.l_,{exact:!0,from:"/admin/crash-logs",to:"/admin/crash-logs/1"}),s.createElement(i.AW,{path:"/admin/users/edit-user/:username",render:()=>s.createElement(Ue,{renderSearchBar:this.renderSearchBar,SearchToRender:n})}),s.createElement(i.AW,{path:"/admin/keys/:title/:page",render:()=>s.createElement(Ve,{renderSearchBar:this.renderSearchBar,SearchToRender:n})}),s.createElement(i.AW,{path:"/admin/promocodes/:title/:page",render:()=>s.createElement(st,{renderSearchBar:this.renderSearchBar,SearchToRender:n})}),s.createElement(i.AW,{path:"/admin/FAQ/:title/:page",render:()=>s.createElement($t,null)}),s.createElement(i.AW,{path:"/admin/products/add-product",render:()=>s.createElement(ut,{type:this.state.productEditType,setEditType:this.setEditType})}),s.createElement(i.AW,{path:"/admin/products/:title",render:()=>s.createElement(ut,{type:this.state.productEditType,setEditType:this.setEditType})}),s.createElement(i.AW,{path:"/admin/news/:title/:page",render:()=>s.createElement(Ct,null)}),m))),s.createElement(he,null)))}}const zt=[{path:"/dashboard",component:ye},{path:"/admin",component:(0,i.EN)(_t)},{path:"/",component:j,exact:!0},{path:"/",component:F}];class Kt extends s.Component{constructor(){super(),this.state={user:null},this.getUser=this.getUser.bind(this)}async componentDidMount(){await this.getUser()}getUser(){let e={};const t=localStorage.getItem("token");return t&&""!=t?(e=(0,o.Z)(t),e.status.isBanned?(this.props.history.push("/"),l("info","Ваш аккаунт заблокирован. Вы не можете зайти в систему."),localStorage.clear(),!1):(this.setState({user:e}),!0)):(this.props.history.push("/"),this.setState({user:null}),!1)}render(){const{user:e}=this.state;return s.createElement(s.Fragment,null,s.createElement(c.mh,null),s.createElement(i.rs,null,e&&e.status&&!e.status.isAdmin&&s.createElement(i.l_,{from:"/admin",to:"/dashboard"}),e&&e.status&&!e.status.isAdmin&&s.createElement(i.l_,{from:"/admin",to:"/"}),zt.map((t=>s.createElement(i.AW,{path:t.path,render:()=>s.createElement(t.component,{user:e,getUser:this.getUser}),key:t.path})))))}}const Zt=(0,i.EN)(Kt);function Vt(){return s.createElement(r.VK,null,s.createElement(Zt,null))}n.hydrate(s.createElement(Vt,null),document.getElementById("content"))}},a={};function s(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}s.m=t,e=[],s.O=(t,a,n,r)=>{if(!a){var o=1/0;for(l=0;l<e.length;l++){for(var[a,n,r]=e[l],i=!0,c=0;c<a.length;c++)(!1&r||o>=r)&&Object.keys(s.O).every((e=>s.O[e](a[c])))?a.splice(c--,1):(i=!1,r<o&&(o=r));i&&(e.splice(l--,1),t=n())}return t}r=r||0;for(var l=e.length;l>0&&e[l-1][2]>r;l--)e[l]=e[l-1];e[l]=[a,n,r]},s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/",(()=>{var e={143:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var n,r,[o,i,c]=a,l=0;for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(c)var m=c(s);for(t&&t(a);l<o.length;l++)r=o[l],s.o(e,r)&&e[r]&&e[r][0](),e[o[l]]=0;return s.O(m)},a=self.webpackChunkzeer_online_store_ui=self.webpackChunkzeer_online_store_ui||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var n=s.O(void 0,[736],(()=>s(6961)));n=s.O(n)})();